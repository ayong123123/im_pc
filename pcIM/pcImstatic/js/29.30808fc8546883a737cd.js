webpackJsonp([29],{gLgV:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Dd8w"),n=s.n(i),a=s("NYxO"),r=s("zL8q"),o=s("F+jZ"),c=s("SQjO"),d={props:["msg","forbiddenInfo"],data:function(){return{getTimes:o.d,config:c.a,errorTimer:null}},computed:n()({},Object(a.c)(["selectedChat","getUserId","getGroupRemarkName"]),{chatObj:function(){return JSON.parse(this.msg.content)}},Object(a.e)(["chatListStore","chatuserInfoStore","msgListStore"])),created:function(){var e=this;this.errorTimer=setTimeout(function(){e.setError()},1e4)},beforeDestroy:function(){clearTimeout(this.errorTimer)},mounted:function(){},watch:{},methods:n()({isStopTalking:function(e){this.$emit("isStopTalking",e)},removeGroupUser:function(e){this.$emit("removeGroupUser",e)},openHandleUserVible:function(e){this.$emit("openHandleUserVible",e)},setError:function(){this.msg.code&&3!=this.msg.code||this.msg.status!=this.config.MSG_STATUS_SED||(this.msg.status=this.config.MSG_STATUS_ERROR,clearTimeout(this.errorTimer))},chongFa:function(){var e=this;(this.msg.send_uid&&this.msg.send_uid==this.getUserId||this.msg.userMsg&&this.msg.status==this.config.MSG_STATUS_ERROR)&&this.$confirm("是否重发该消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("reSendMessage",e.msg)}).catch(function(){})},findUser:function(e){this.$emit("setFindUser",e)}},Object(a.d)(["setRedSendUidType","setSendRedPackMessage","setModalState","setGetOrCheck"]),Object(a.b)(["getRedPackAction","firstGrabRedEnvelopeAction"]),{getSweepRed:function(){var e=this,t=Object(o.c)("token"),s=this.chatObj.repcode;if(t){var i=this.msg.send_uid||this.msg.groupmessage&&this.msg.groupmessage.sendid;this.setRedSendUidType({id:i,type:1,unique_value:this.msg.unique_value});var n={repcode:this.chatObj.repcode,send_head_portrait:this.msg.head_portrait,send_name:this.msg.username||this.msg.nickname,topic:this.chatObj.topic,fval:this.chatObj.fval};this.setSendRedPackMessage(n),this.firstGrabRedEnvelopeAction({token:t,repcode:s}).then(function(t){140==t.code?(e.setGetOrCheck(2),e.setModalState("redDetailState")):e.setModalState("redPupContainer")})}else Object(r.Message)({message:"提示:请重新登录",type:"warning",showClose:!0})}}),filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"time"},[e.msg.showTime?e._e():i("span",[e._v(e._s(e.getTimes(e.msg.create_time)))])]),e._v(" "),i("div",{staticClass:"main",class:{self:e.msg.userMsg||e.msg.send_uid==e.getUserId}},[e.msg.userMsg||e.msg.send_uid==e.getUserId?i("span",{staticClass:"chat-username"},[i("wx-level",{attrs:{msg:e.msg}}),e._v(e._s(e.chatuserInfoStore.dataGetInfo.nickname)+"\n    ")],1):1==e.msgListStore.activeTyep?i("span",{staticClass:"chat-username"},[e._v("\n      "+e._s(e.msgListStore.activeName)),i("wx-level",{attrs:{msg:e.msg}})],1):i("span",{staticClass:"chat-username"},[e._v("\n      "+e._s(e.getGroupRemarkName({uid:e.msg.asFrom,send_uid:e.msg.send_uid})||e.msg.nickname||e.msg.username)),i("wx-level",{attrs:{msg:e.msg}})],1),e._v(" "),e.msg.head_portrait?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.msg.head_portrait,expression:"msg.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}):e.msg.send_uid==e.getUserId?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.chatuserInfoStore.dataGetInfo.head_portrait,expression:"chatuserInfoStore.dataGetInfo.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}):i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.selectedChat.user.img,expression:"selectedChat.user.img"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.chatListStore.handleUserVible&&e.forbiddenInfo.unique_value==e.msg.unique_value&&e.msg.send_uid!=e.getUserId,expression:"chatListStore.handleUserVible && forbiddenInfo.unique_value ==msg.unique_value && msg.send_uid != getUserId"}],staticClass:"handleConfig"},[i("ul",[2!=e.forbiddenInfo.forbiddenStatus?i("li",{on:{click:function(t){return e.isStopTalking(e.msg)}}},[e._v("\n          禁言\n        ")]):e._e(),e._v(" "),1!=e.forbiddenInfo.forbiddenStatus?i("li",{on:{click:function(t){return e.isStopTalking(e.msg)}}},[e._v("\n          解禁\n        ")]):e._e(),e._v(" "),i("li",{on:{click:function(t){return e.removeGroupUser(e.msg)}}},[e._v("\n          移除\n        ")]),e._v(" "),i("li",{on:{click:function(t){return e.findUser(e.msg)}}},[e._v("\n          @TA\n        ")])])]),e._v(" "),i("div",{staticClass:"chat-red-pack chat-content-dom"},[i("div",{staticClass:"red-envelopes",class:{opacity:e.msg.redState},on:{click:e.getSweepRed}},[i("img",{attrs:{src:s("zMGS"),alt:"",width:"46",height:"50"}}),e._v(" "),i("div",{staticClass:"red-envelopes-message"},[i("div",{staticClass:"long-text"},[e._v(e._s(e.chatObj.topic))])])]),e._v(" "),i("p",[e._v("\n        扫雷红包\n      ")]),e._v(" "),e.msg.status==e.config.MSG_STATUS_SED?i("i",{staticClass:"el-icon-loading chat-loading"}):e._e(),e._v(" "),e.msg.status==e.config.MSG_STATUS_ERROR?i("i",{staticClass:"el-icon-warning chat-loading error",on:{click:function(t){return e.chongFa()}}}):e._e()])])])},staticRenderFns:[]};var m=s("VU/8")(d,u,!1,function(e){s("xck2")},"data-v-2d7b2c60",null);t.default=m.exports},xck2:function(e,t){},zMGS:function(e,t,s){e.exports=s.p+"pcImstatic/img/icon_chat_item_saolei.8fa3d71.png"}});