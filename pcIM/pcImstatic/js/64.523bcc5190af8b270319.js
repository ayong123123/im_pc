webpackJsonp([64],{Kiis:function(t,e){},YaoC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("Dd8w"),r=s.n(n),c=s("woOf"),o=s.n(c),h=s("NYxO"),g=s("SQjO"),_={name:"transpond",props:["transpondData"],data:function(){return{userObj:{},pageId:"",config:g.a,chatListMessage:[]}},created:function(){if(this.chatListStore.chatlist.length>0){this.chatListMessage=[];for(var t=0,e=this.chatListStore.chatlist.length;t<e;t++){var s={},i=this.chatListStore.chatlist[t];i.checked=!1,s=o()({},i,s),this.chatListMessage.push(s)}}},methods:r()({},Object(h.d)(["setActiveWindow"]),Object(h.b)(["getFriendList","sendMessageIM","messageForward"]),{shareFn:function(t){t.checked=!t.checked},isGroup:function(t){return this.config.MSG_GROUP_TXT==t||this.config.MSG_GROUP_IMG==t||this.config.MSG_GROUP_VIDEO==t||this.config.MSG_GROUP_SHARENOTE==t||this.config.MSG_GROUP_CARD==t},getSingleType:function(t){switch(t){case this.config.MSG_GROUP_TXT:return this.config.MSG_PRIVATE_TXT;case this.config.MSG_GROUP_IMG:return this.config.MSG_PRIVATE_IMG;case this.config.MSG_GROUP_VIDEO:return this.config.MSG_PRIVATE_VIDEO;case this.config.MSG_GROUP_SHARENOTE:return this.config.MSG_PRIVATE_SHARENOTE;case this.config.MSG_GROUP_CARD:return this.config.MSG_PRIVATE_CARD}},getGroupType:function(t){switch(1*t){case this.config.MSG_PRIVATE_TXT:return this.config.MSG_GROUP_TXT;case this.config.MSG_PRIVATE_IMG:return this.config.MSG_GROUP_IMG;case this.config.MSG_PRIVATE_VIDEO:return this.config.MSG_GROUP_VIDEO;case this.config.MSG_PRIVATE_SHARENOTE:return this.config.MSG_GROUP_SHARENOTE;case this.config.MSG_PRIVATE_CARD:return this.config.MSG_GROUP_CARD}},closeModal:function(){this.$emit("closeTranspond")},messageForwardFn:function(){var t=this;if(this.chatListMessage.some(function(t){return t.checked})){var e=[],s=[],i=0;if(this.chatListMessage.forEach(function(t){t.checked&&(i++,1==t.chatType&&e.push(t.id),2==t.chatType&&s.push(t.id))}),i>30)this.$message({type:"warning",message:"最多只能选择30个!"});else{var n={selfUid:this.getUserId,singleList:"",groupList:"",singleData:"",groupData:""},r=this.chatListStore.zhuanFaMessage.type;r=r==this.config.MSG_GROUP_NOTICE||r==this.config.MSG_GROUP_AT||r==this.config.MSG_GROUP_AT_ALL?this.config.MSG_GROUP_TXT:this.chatListStore.zhuanFaMessage.type;var c=this.isGroup(r);if(e.length>0){n.singleList=e.join(",");var o={to:0,message:this.chatListStore.zhuanFaMessage.content,type:r};c&&(o.type=this.getSingleType(r));var h=this.initForwardMessage(o);n.singleData=a()(h)}if(s.length>0){n.groupList=s.join(",");var g={to:0,message:this.chatListStore.zhuanFaMessage.content,type:r};c||(g.type=this.getGroupType(r));var _=this.initForwardMessage(g);n.groupData=a()(_)}this.messageForward(n).then(function(){t.$emit("closeTranspond")})}}else this.$message({type:"warning",message:"请选择转发对象!"})},shareCard:function(){var t=this.chatListStore.zhuanFaMessage.type;t==this.config.MSG_GROUP_VIDEO&&(t=this.config.MSG_PRIVATE_VIDEO),t==this.config.MSG_GROUP_IMG&&(t=this.config.MSG_PRIVATE_IMG);var e={to:this.userObj.id,message:this.chatListStore.zhuanFaMessage.content,type:t,reserved:a()({level:this.indexStore.userHomeData.data.userlevelid.level,levelName:this.indexStore.userHomeData.data.userlevelid.levelName})};this.sendMessageIM(e),this.$message.success("转发消息成功！"),this.$emit("closeTranspond")}}),computed:r()({},Object(h.c)(["getUserId","initForwardMessage"]),Object(h.e)(["friendsListStore","msgListStore","indexStore","chatuserInfoStore","chatListStore"]))},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"transpond"},[i("el-dialog",{attrs:{title:"选择转发对象",visible:t.transpondData.visible,width:"30%",center:""},on:{"update:visible":function(e){return t.$set(t.transpondData,"visible",e)}}},[i("div",{staticClass:"transpond_box"},t._l(t.chatListMessage,function(e){return 1==e.chatType&&!e.kefu||2==e.chatType?i("div",{staticClass:"user-card flex",class:{curr:e.checked},on:{click:function(s){return t.shareFn(e)}}},[e.user.img?i("img",{attrs:{src:e.user.img,alt:""}}):i("img",{staticClass:"avatar",attrs:{src:s("y1Vc")}}),t._v(" "),i("div",{staticClass:"flex-1"},[t._v("\n                  "+t._s(e.user.remarks_name||e.user.name)+" "),2==e.chatType?i("span",[t._v("("+t._s(e.chatCount)+")")]):t._e()])]):t._e()}),0),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.messageForwardFn}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var f=s("VU/8")(_,u,!1,function(t){s("Kiis")},"data-v-3499511e",null);e.default=f.exports}});