webpackJsonp([11],{cfKE:function(e,t,_){e.exports=_.p+"pcImstatic/img/ontop.f90c5fe.png"},dn60:function(e,t,_){e.exports=_.p+"pcImstatic/img/ontoping.4ffb134.png"},e8IK:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__=__webpack_require__("Gu7T"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_3_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_4__configWX_emoji__=__webpack_require__("6PR4"),__WEBPACK_IMPORTED_MODULE_4__configWX_emoji___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__configWX_emoji__);__webpack_exports__.a={data:function(){return{reg:"操你妈*鸡吧",topId:"",flag:!0,islast:!1}},computed:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.e)(["chatListStore","msgListStore","friendsListStore"]),Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.c)(["searchedChatlist","getUserId","selectedChat"])),created:function(){this.getUserGroup()},methods:__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_extends___default()({ontop:function(e){var t=this;this.islast=!1,this.flag=!0;var _=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.chatListStore.topInfo));if(_.length>0&&_.map(function(s,a){s.id==e.id&&s.chatType==e.chatType&&(t.flag=!1,delete s.istop,_.splice(a,1),0==_.length&&(t.islast=!0,t.flag=!0),t.updateTopInfo(_))}),this.flag||0==_.length){if(this.islast)return this.flag=!0,_=[],void this.updateTopInfo([]);this.setTopInfo(e),this.setChatGoUp({id:e.id,chatType:e.chatType})}},renderTxt:function(e){for(var t=[],_=null,s=/(\[.*?\])/g,a=0,i=0;_=s.exec(e);){if((i=_.index)>a&&t.push(e.substring(a,i)),_[1]in __WEBPACK_IMPORTED_MODULE_4__configWX_emoji___default.a.map){var n=__WEBPACK_IMPORTED_MODULE_4__configWX_emoji___default.a.map[_[1]];t.push('<img width="15" class="" src=./pcImstatic/images/faces/'+n+" />")}else t.push(_[1]);a=i+_[1].length}try{t.push(e.substring(a,e.length))}catch(_){t.push(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e))}var r="";return t.forEach(function(e,t,_){r+=e}),r},filterTxt:function filterTxt(t){var t1=t,arr=this.reg.split("*");for(var i in arr)try{var imgReg=eval("/"+arr[i]+"(?=[^>]*(<|$))/g");t1=t1.replace(imgReg,"***")}catch(e){}return t1}},Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.b)(["getGroupChatInfoAction","getLastMessageAction","getGlastMessageAction","getJudegMessageAction","getGjudgeMessageAction","getFriendInfoAction","getMergeNoticeAction","getGroupNoticeAction","delChatEnum","getUserGroup"]),Object(__WEBPACK_IMPORTED_MODULE_3_vuex__.d)(["setActiveWindow","deleteChatWindow","deleteMessageMap","setRemarkName","setModalState","setChatGoUp","sendNewChat","setTopInfo","updateTopInfo"]),{deleteWindow:function(e){var t=this;this.$confirm("删除当前聊天窗口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteChatWindow(e),t.deleteMessageMap(e),e.istop&&t.ontop(e)}).catch(function(){})},selectUserMessage:function(e){if(e.messages.unRead=0,4!=e.chatType){if(this.setActiveWindow({id:e.id,type:e.chatType,name:e.user.remarks_name||e.user.name,head_portrait:e.user.img}),1==e.chatType&&this.getLastMessageAction({send_uid:this.getUserId,accept_uid:e.id}),2==e.chatType)this.getGroupChatInfoAction({self_uid:this.getUserId,group_id:e.id}),this.getGlastMessageAction({send_id:this.getUserId,group_id:e.id}),this.getGroupNoticeAction({self_uid:this.getUserId,group_id:e.id});3==e.chatType&&this.getMergeNoticeAction({Page:1,pageNum:10})}else this.setModalState("groupZhuShou")}}),filters:{time:function(e){var t=new Date(1e3*e),_=(t.getFullYear(),(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"),s=t.getDate();s=s<10?"0"+s:s;var a=t.getHours();a=a<10?"0"+a:a;var i=t.getMinutes();i=i<10?"0"+i:i;var n=t.getSeconds();return n=n<10?"0"+n:n,_+s+" "+a+":"+i}}}},"j/IY":function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=_("e8IK"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"msglist"},[e.searchedChatlist&&e.searchedChatlist.length>0?s("ul",e._l(e.searchedChatlist,function(t,a){return s("li",{staticClass:"sessionlist",class:[{active:t.id==e.msgListStore.activeWindowId&&t.chatType==e.msgListStore.activeTyep},{offline:0==t.online}],on:{click:function(_){return e.selectUserMessage(t)},contextmenu:function(_){return _.preventDefault(),e.deleteWindow(t)}}},[s("div",{staticClass:"list-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.user.img,expression:"item.user.img"}],staticClass:"avatar",attrs:{width:"42",height:"42"}}),e._v(" "),t.messages.unRead>0&&2==t.chatType?s("span",{staticClass:"message-dian-bar"},[s("i",{staticClass:"el-icon-more"})]):e._e(),e._v(" "),t.messages.unRead>0&&(1==t.chatType||3==t.chatType||4==t.chatType)?s("el-badge",{staticClass:"message-number-bar",attrs:{value:t.messages.unRead,max:99}}):e._e()],1),e._v(" "),s("div",{staticClass:"list-right"},[1==t.chatType||2==t.chatType?s("p",{staticClass:"ontop",on:{click:function(_){return e.ontop(t)}},model:{value:e.topId,callback:function(t){e.topId=t},expression:"topId"}},[t.istop?s("img",{attrs:{src:_("dn60"),alt:""}}):s("img",{attrs:{src:_("cfKE"),alt:""}})]):e._e(),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s(t.user.remarks_name||t.user.name)+" "),2==t.chatType?s("span",[e._v("("+e._s(t.chatCount)+")")]):e._e()]),e._v(" "),s("span",{staticClass:"time"},[e._v(e._s(e._f("time")(t.messages.date)))]),e._v(" "),s("p",{staticClass:"lastmsg",domProps:{innerHTML:e._s(e.filterTxt(e.renderTxt(t.messages.lastMessage)))}})])])}),0):s("p",{staticClass:"text-center"},[e._v("暂无聊天记录 快找好友聊聊天吧")])])},staticRenderFns:[]};var i=function(e){_("zef8")},n=_("VU/8")(s.a,a,!1,i,"data-v-6200f246",null);t.default=n.exports},zef8:function(e,t){}});