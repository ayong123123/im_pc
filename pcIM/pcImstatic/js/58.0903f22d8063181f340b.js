webpackJsonp([58],{kuSn:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("mvHQ"),s=t.n(n),r=t("BO1k"),d=t.n(r),a=t("Dd8w"),o=t.n(a),f=t("NYxO"),c=(t("SQjO"),t("F+jZ")),_={data:function(){return{friendEditState:!1,nameRemark:0,getTimes:c.d}},computed:o()({},Object(f.c)(["getUserId"]),Object(f.e)(["friendsListStore","chatListStore","chatuserInfoStore","msgListStore"]),{friend_info:function(){return this.friendsListStore.friendInfo}}),watch:{friend_info:function(e){e&&(this.friendEditState=!1)}},created:function(){if(this.addFriendList({self_uid:this.getUserId}),this.friendsListStore.friendInfo="",this.friendsListStore.newAddFriendHistory.length>0){var e=[],i=!0,t=!1,n=void 0;try{for(var s,r=d()(this.friendsListStore.newAddFriendHistory);!(i=(s=r.next()).done);i=!0){var a=s.value;e.push(a.id)}}catch(e){t=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(t)throw n}}this.getAllListFriendList({self_uid:this.getUserId,friend_uid:e.join(",")})}},methods:o()({},Object(f.b)(["searchUser","addFriendList","refuseAddFriend","addMyFriendAction","getFriendList","deleteFriendInfo","blackFriendInfo","editFriendInfo","sendMessageIM","getFriendInfoAction","getAllListFriendList","addMsgAction"]),Object(f.d)(["setFriendEditState","setPicture","windowMove","setActiveWindow","deleteChatWindow","deleteMessageMap","setNewAddFriendHistory","setModalState","setIsAddFriendState","sendNewChat","createFriendChatMessage"]),{clearNewFriendFn:function(){this.setNewAddFriendHistory({clear:!0})},checkLength:function(e){var i=e.replace(/[\u4e00-\u9fa5]/g,"");return 2*(e.length-i.length)+i.length<=24},sendMessage:function(e){this.createFriendChatMessage({id:e.id});var i={id:s()(e.id),name:e.nickname||"",count:0,head_portrait:e.head_portrait||"",remarks_name:e.remarks_name||""};this.sendNewChat({message:i,type:1,state:!0})},openInfo:function(e){var i=this;this.setIsAddFriendState(!1),this.getFriendInfoAction({self_uid:this.getUserId,friend_uid:e.id}).then(function(e){i.setModalState("userInfoState")})},accepetFriend:function(e){var i=this,t={self_uid:this.getUserId,friend_uid:e.id,agree:1,add_msg:"",head_portrait:e.head_portrait,nickname:e.nickname};this.addMyFriendAction(t).then(function(t){e.agree=1,i.setNewAddFriendHistory(e),i.addFriendList({self_uid:i.getUserId})})},refuseFriend:function(e){var i=this;this.refuseAddFriend({self_uid:this.getUserId,friend_uid:e.id,agree:2}).then(function(t){e.agree=2,i.setNewAddFriendHistory(e),i.addFriendList({self_uid:i.getUserId})})},editRemark:function(){this.nameRemark=1},loseFocus:function(){var e=this;this.nameRemark=0;var i={self_uid:this.getUserId,friend_uid:this.friendsListStore.friendInfo.id,remarks_name:this.friend_info.remarks_name,friend_phone:this.friend_info.phone};this.editFriendInfo(i).then(function(i){e.getFriendList({self_uid:e.getUserId})})},deleteFriend:function(){var e=this;this.friendEditState=!1,this.$confirm("是否删除"+this.friend_info.nickname,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={self_uid:e.getUserId,friend_uid:e.friend_info.id};e.deleteFriendInfo(i).then(function(i){e.addFriendList({self_uid:e.getUserId}),e.getFriendList({self_uid:e.getUserId}),e.friendsListStore.friendInfo=""})}).catch(function(){})},blackList:function(){var e=this;this.friendEditState=!1,this.$confirm("是否拉黑"+this.friend_info.nickname,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={self_uid:e.getUserId,friend_uid:e.friend_info.id};e.blackFriendInfo(i).then(function(i){e.getFriendList({self_uid:e.getUserId}),e.friendsListStore.friendInfo=""})}).catch(function(){})}})},l={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"Info-wrapper"},[e.friend_info&&1==e.friend_info.is_admin&&e.friendsListStore.isAddFriendState?n("span",{staticClass:"el-icon-more info-more",on:{click:function(i){e.friendEditState=!e.friendEditState}}}):e._e(),e._v(" "),e.friendsListStore.isAddFriendState?e._e():n("div",{staticClass:"newfriend",on:{mousedown:function(i){return e.windowMove(i)}}},[n("div",{staticClass:"nickname"},[e._v("新的朋友")])]),e._v(" "),e.friend_info&&e.friendsListStore.isAddFriendState?n("div",{staticClass:"friendInfo",on:{click:function(i){e.friendEditState=!1}}},[n("div",{staticClass:"esInfo"},[n("div",{staticClass:"left"},[n("div",{staticClass:"people"},[n("div",{staticClass:"nickname"},[e._v(e._s(e.friend_info.nickname))]),e._v(" "),2==e.friend_info.sex?n("div",{staticClass:"gender-female"}):n("div",{staticClass:"gender-male"})])]),e._v(" "),n("div",{staticClass:"right"},[e.friend_info.head_portrait?n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:e.friend_info.head_portrait},on:{click:function(i){return e.setPicture({img:e.friend_info.head_portrait,state:!0})}}}):n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:t("y1Vc")}})])]),e._v(" "),n("div",{staticClass:"detInfo"},[1==e.friend_info.is_admin?n("div",{staticClass:"remark ",on:{click:function(i){return e.editRemark()}}},[n("span",[e._v("备   注")]),e._v(" "),n("div",{staticClass:"remarkedit point"},[0==e.nameRemark?n("a",{staticClass:"blackColor point"},[e._v(e._s(e.friend_info.remarks_name||"点击添加备注"))]):e._e(),e._v(" "),1==e.nameRemark?n("input",{directives:[{name:"model",rawName:"v-model",value:e.friend_info.remarks_name,expression:"friend_info.remarks_name"}],attrs:{type:"text",placeholder:"",maxlength:"12"},domProps:{value:e.friend_info.remarks_name},on:{blur:e.loseFocus,input:function(i){i.target.composing||e.$set(e.friend_info,"remarks_name",i.target.value)}}}):e._e()])]):e._e(),e._v(" "),n("div",{staticClass:"wxid blackColor"},[n("span",[e._v("账   号")]),e._v(e._s(e.friend_info.username))])]),e._v(" "),n("div",{staticClass:"send",on:{click:function(i){return e.sendMessage(e.friend_info)}}},[n("span",[e._v("发消息")])])]):n("div",{staticClass:"new-friend-add"},[e._l(e.friendsListStore.dataAddFriendList.data,function(i,s){return e.friendsListStore.dataAddFriendList.data.length>0?n("div",{staticClass:"new-friend-item flex-between"},[n("div",{staticClass:"new-friend-item-info flex"},[i.head_portrait?n("img",{attrs:{src:i.head_portrait,alt:""}}):n("img",{attrs:{width:"60",height:"60",src:t("y1Vc")}}),e._v(" "),n("div",{staticClass:"new-friend-item-name"},[n("span",[e._v(e._s(i.nickname))]),e._v(" "),n("p",[e._v(e._s(i.add_msg))])])]),e._v(" "),n("div",{staticClass:"new-friend-isjieshou"},[n("span",{staticClass:"accepet",on:{click:function(t){return e.accepetFriend(i)}}},[e._v("接受")]),e._v(" "),n("span",{staticClass:"refuse",on:{click:function(t){return e.refuseFriend(i)}}},[e._v("拒绝")])])]):e._e()}),e._v(" "),10002==e.friendsListStore.dataAddFriendList.code?n("div",{staticClass:"noneData"},[e._v("暂无好友请求")]):e._e(),e._v(" "),n("p",{staticClass:"last-time-p"},[e._v("最近申请  "),e.friendsListStore.newAddFriendHistory.length>0?n("span",{on:{click:e.clearNewFriendFn}},[e._v("清空记录")]):e._e()]),e._v(" "),e._l(e.friendsListStore.newAddFriendHistory,function(i,s){return e.friendsListStore.newAddFriendHistory.length>0?n("div",{staticClass:"new-friend-item flex-between"},[n("div",{staticClass:"new-friend-item-info flex"},[i.head_portrait?n("img",{attrs:{src:i.head_portrait,alt:""}}):n("img",{attrs:{width:"60",height:"60",src:t("y1Vc")}}),e._v(" "),n("div",{staticClass:"new-friend-item-name"},[n("span",[e._v(e._s(i.nickname))]),e._v(" "),n("p",[e._v(e._s(i.message))])])]),e._v(" "),n("div",{staticClass:"new-friend-isjieshou"},[n("div",[n("p",{class:1==i.agree?"green":"red"},[e._v("("+e._s(1==i.agree?"已添加":"已拒绝")+")")]),e._v("\n          "+e._s(e.getTimes(i.create_time))+"\n        ")]),e._v(" "),n("span",{staticClass:"gray",on:{click:function(t){return e.openInfo(i)}}},[e._v("查看")])])]):e._e()})],2),e._v(" "),n("transition",{attrs:{name:"showbox"}},[e.friendEditState?n("div",{staticClass:"userinfo-more-option"},[n("div",{on:{click:e.blackList}},[n("span",[e._v("删除并拉黑")])])]):e._e()])],1)},staticRenderFns:[]};var u=t("VU/8")(_,l,!1,function(e){t("nDwo")},"data-v-4269169d",null);i.default=u.exports},nDwo:function(e,i){}});