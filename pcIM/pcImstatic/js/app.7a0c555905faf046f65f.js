webpackJsonp([76],{0:function(e,t){},"1g2b":function(e,t){},"5LIk":function(e,t){},"6PR4":function(e,t){e.exports={path:"../../themes/faces/",map:{"[):]":"ee_1.png","[:D]":"ee_2.png","[;)]":"ee_3.png","[:-o]":"ee_4.png","[:p]":"ee_5.png","[(H)]":"ee_6.png","[:@]":"ee_7.png","[:s]":"ee_8.png","[:$]":"ee_9.png","[:(]":"ee_10.png","[:'(]":"ee_11.png","[:|]":"ee_18.png","[(a)]":"ee_13.png","[8o|]":"ee_14.png","[8-|]":"ee_15.png","[+o(]":"ee_16.png","[<o)]":"ee_12.png","[|-)]":"ee_17.png","[*-)]":"ee_19.png","[:-#]":"ee_20.png","[:-*]":"ee_22.png","[^o)]":"ee_21.png","[8-)]":"ee_23.png","[(|)]":"ee_24.png","[(u)]":"ee_25.png","[(S)]":"ee_26.png","[(*)]":"ee_27.png","[(#)]":"ee_28.png","[(R)]":"ee_29.png","[({)]":"ee_30.png","[(})]":"ee_31.png","[(k)]":"ee_32.png","[(F)]":"ee_33.png","[(W)]":"ee_34.png","[(D)]":"ee_35.png"}}},"6Xz1":function(e,t,a){e.exports=a.p+"pcImstatic/img/sound_icon.d781714.png"},"6q8V":function(e,t,a){e.exports=a.p+"pcImstatic/img/sys.7444870.png"},"7MRW":function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return d}),a.d(t,"a",function(){return c});var n=a("N7RA"),s=a("yb3w"),o=a("Av7u"),i="",r=(i+=Object(n.a)()+Object(n.b)())+Object(s.a)()+Object(s.b)(),g=function(t){var a=t,n=e.from(t);return n.length<a.length&&a.map(function(e,t){return a[t]=n[t]}),a},d=function(e){var t=o.enc.Utf8.parse(g(r));return o.AES.encrypt(e,t,{mode:o.mode.ECB,padding:o.pad.Pkcs7,iv:""}).ciphertext.toString(o.enc.Base64)},c=function(e){var t=o.enc.Utf8.parse(g(r)),a=e.replace(/\-/g,"+").replace(/_/g,"/"),n=o.AES.decrypt(a,t,{mode:o.mode.ECB,padding:o.pad.Pkcs7,iv:""});return o.enc.Utf8.stringify(n)};o.enc.Utf8.parse(g(r))}).call(t,a("EuP9").Buffer)},"9wfE":function(e,t,a){e.exports=a.p+"pcImstatic/img/not_sound-redpack.541194b.png"},AMYy:function(e,t){},B0xE:function(e,t,a){"use strict";var n=a("mvHQ"),s=a.n(n),o=a("//Fk"),i=a.n(o),r=a("bOdI"),g=a.n(r),d=a("YwQ6"),c=a("IcnI"),u=a("SQjO"),f=["id++","unique_value","type","code","control","action","create_time","token","from","comment","singlemessage","groupmessage","msg","asFrom","asTo","read","asGroup","status","userMsg"];window.indexedDB||window.alert("您的浏览器版本过于老旧,无法正常启动程序,请更换");var p={init:function(e){if(e=e||"webIM_"+c.a.state.chatuserInfoStore.loginData.id,!this.db){var t=new d.a(e);t.version(4).stores(g()({},"webimBeta_history",f.join(","))),this.db=t,t.open(),this.$_TABLE=t.table("webimBeta_history")}},exec:function(e,t){return new i.a(function(t,a){e(t)})},getUnreadList:function(){var e=this.$_TABLE;return this.exec(function(t){e.where("isUnread").equals(1).toArray().then(function(e){return t(e)})})},getMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=this.$_TABLE;return this.exec(function(o){s.where("type").equals(t).filter(function(a){return!a.error&&("chat"===t&&a.from==e||a.to==e)}).reverse().offset(a).limit(n).sortBy("time").then(function(e){o(e.reverse())})})},readMessage:function(e,t){this.$_TABLE||this.init();var a=this.$_TABLE;return this.exec(function(n){a.where({read:u.a.MSG_UNREAD,asFrom:t,asGroup:e}).modify({read:u.a.MSG_READ}).then(function(e){n(e)})})},updateMessageStatus:function(e,t){this.$_TABLE||this.init();var a=this.$_TABLE;return this.exec(function(n){a.where("id").equals(e).modify({status:t}).then(function(e){n(e)})})},addMessage:function(e){this.$_TABLE||this.init();var t=this.$_TABLE;(e=JSON.parse(s()(e))).groupmessage=e.groupmessage||{},e.singlemessage=e.singlemessage||{},e.groupmessage=s()(e.groupmessage),e.singlemessage=s()(e.singlemessage);t.where({asGroup:e.asGroup,asFrom:e.asFrom,asTo:e.asTo}).reverse().sortBy("create_time").then(function(e){e.forEach(function(e,a,n){a>100&&t.where("unique_value").equals(e.unique_value).filter(function(e){return!0}).delete().then(function(e){}).catch(function(e){return console.log("add messaga:",e)})})}).catch(function(e){return console.log("controlCum messaga:",e)});if(!e.error)return this.exec(function(a){t.where("unique_value").equals(e.unique_value).count().then(function(n){0===n&&t.add(e).then(function(e){a(e)}).catch(function(e){return console.log("add messaga:",e)})})})},controlCum:function(e,t,a){},clearMessage:function(e){this.$_TABLE||this.init();var t=this.$_TABLE;return this.exec(function(a){t.where("unique_value").equals(e).filter(function(e){return!0}).delete().then(function(e){a(e)}).catch(function(e){return console.log("add messaga:",e)})})},getLastMsg:function(e,t,a){this.$_TABLE||this.init();var n=this.$_TABLE;return this.exec(function(s){n.where({asGroup:e,asFrom:t,asTo:a}).last().then(function(e){s(e)}).catch(function(e){return console.log("getLast messaga:",e)})})}};window.AppDB=p,t.a=p},"F+jZ":function(e,t,a){"use strict";a.d(t,"d",function(){return r}),a.d(t,"e",function(){return d}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return S}),a.d(t,"b",function(){return p}),a.d(t,"i",function(){return f}),a.d(t,"j",function(){return l}),a.d(t,"c",function(){return h}),a.d(t,"g",function(){return g}),a.d(t,"k",function(){return M}),a.d(t,"a",function(){return m}),a.d(t,"l",function(){return u});var n=a("mvHQ"),s=a.n(n),o=a("lbHh"),i=(a.n(o),a("rSpy")),r=(a.n(i),function(e){var t=new Date(1e3*e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=t.getDate();s=s<10?"0"+s:s;var o=t.getHours();o=o<10?"0"+o:o;var i=t.getMinutes();i=i<10?"0"+i:i;var r=t.getSeconds();return a+n+s+" "+o+":"+i+":"+(r=r<10?"0"+r:r)});function g(){return new Date-1337884181081}var d=function(e){var t=new Date(1e3*e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=t.getDate();s=s<10?"0"+s:s;var o=t.getHours();o=o<10?"0"+o:o;var i=t.getMinutes();i=i<10?"0"+i:i;var r=t.getSeconds();return r=r<10?"0"+r:r,a+n+s},c=function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=t.getDate();s=s<10?"0"+s:s;var o=t.getHours();o=o<10?"0"+o:o;var i=t.getMinutes();i=i<10?"0"+i:i;var r=t.getSeconds();return r=r<10?"0"+r:r,a+n+s};function u(e){var t,a,n,s,o,i,r,g,d,c=Math.abs(1e3*e)||0;return t=Math.floor(c/1e3/60/60%24),(t+=24*(Math.floor(c/1e3/60/60/24)||0))<10?(s="0",o=""+t):(s=""+Math.floor(t/10),o=""+t%10),(a=Math.floor(c/1e3/60%60))<10?(i="0",r=""+a):(i=""+Math.floor(a/10),r=""+a%10),(n=Math.floor(c/1e3%60))<10?(g="0",d=""+n):(g=""+Math.floor(n/10),d=""+n%10),s+o+":"+i+r+":"+g+d}function f(e,t){t=t||[],"vocabulary"==e&&t==[]&&(t=""),localStorage[e]=s()(t)}function p(e){var t=localStorage[e]||!1;return t=JSON.parse(t)}function l(e,t){t=t||"",sessionStorage[e]=s()(t)}function h(e){var t=sessionStorage[e]||!1;return t=JSON.parse(t)}function m(e){window.sessionStorage.removeItem(e)}function S(e,t){return parseInt(e+(t-e)*Math.random())}function M(e,t){var a,n,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||s.length,e=e||32)for(a=0;a<e;a++)o[a]=s[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",a=0;a<36;a++)o[a]||(n=0|16*Math.random(),o[a]=s[19==a?3&n|8:n]);return o.join("")}},HQJy:function(e,t){e.exports="data:audio/x-wav;base64,UklGRhsbAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YfcaAACAgICAf4GAgH+BgICFh4aIjYuDf4KAe3h1ZGaNkXd1got9hY+Oh3d1f4yDcnuFfnN9kI2CgomMg32Bin9tbnhvX2NteHd4Zm+Ii4ePmI6DkKmunoaPo6KKiIt0TkhXYFlaYHJ/e4Scrp6an6qrnJqZmJCBjIp/ZGtvbWNmYVpHVFFVXF9pZ3dmam15hX+BhIaMhZSUlZGCj5GhqLjDvMK6wbipmndtclpYWGZcTE5BREJOaHlxXXiGkJ+RmYl9j4GIgn51bI99gZ2auMrq78m8yqi1ln6KZVp0hYtuUlNjcHF2fXlMdnuCnF9ud2uQg5SCXkyBk3+VZ0+EvfXa2POintjdwZuPgHyuoYmOg1lijX9lgohaa5J5RH9nI0+CVgY7UhgsO05QQilEZZd6OXlWUYxkaE1GVkRzckCDdkKMoH6Qe3yjp5xrsat7fLWpfoWGdXKumWuohXuxipiCi4pdeJeIjp10iKuzt5yhrKidpqyefV97jHh2aFRXbWFoamh1WllrhYFYW3B4e3psdIKIh4+elIqTraqnrqWcmJiin5CJgo2ShoCKjJOSg4mJiouKhX6JgH2DgH5+cnOGf35/cHV4fY2PiYGAjo6Ii5SOg4mOjIF9iX10cnN7Z2ptb3JmW1NaX11eXV1VTldhX1dTWVReZGdfYmVnZWVsZWF6fX9tcXt0g4iLf3iEg4+MipONj4WJlpaamJWblZWWnqCXmJuZnZOam5SMhpWWiYeHkIuNlIp+eHmFiIh6eXpweoaHeWh1e3yBdXtsb3mAgXRvg4J9c3SHeYB9hIF4gYeEkZCThomSj5CMio6VnZuQl42Kj5GPipWTiYWLlJWQkISHg4eQlpOIg4SBgoeFhoKBg4aGgXyEfoB/f4B7hYeGg3t1dnd0fIN9d3p+fnh4dHaAfXRseoWFgXJxa2p0eHt2dXRubn9/enNubGt4gn94aGt2dHdzdHF5fnV0empncoN5cXaAf3l5eHVucW92c3p4gXdxcoN+end0cXyKi4KBeneDfYOAh4V/hYiRi4KFiIuGjY2UlImLh4d/iYuIg4SDf3+CfoN6gXuEhYaKiIVzdHd1cXuEgXx7fH9+f3R5f3l9fod+gX53dHJ1fIGFfH9/fHp8iX2BeoCFkIyBf3x/g4WCfH+Gio2HhH6FfISLjI+OkYqKin6Afn6BhY+HiYV/g4GBfH16dYCGjIiAeXF2gX99dnqBhoN3dXl2e3yDh4WCfoWAgoB9enyFj5GLhIWGf3+JjJCIjo+MhoGHgICFgpGLkYyLjHuIen6BgImEiY2FioCEenqAfYN8foB8enp6eHR1fIF/eHN1bnl3c25veXiAeHV0b3Bkbnh8fnd8hX1+dHh0eXl7h4eDfX1+fXh7dHV5gIyGhIGFhHp9gIOLgIaAg4B+hnt+e32HgoR9hoB2fnWChoaFe4iFhot0eXKCh4KNiYyIgH97hn99eHuDgoZ8fHt7e3h5dn6GgYKBhoB/f3h8gYaDhIOFg4SBhYCFhIuMioyEg4WBgoGIgICFh42IhoN6gH1/gISFf4WBeX58fHpzbXR/fH18fnl/d3t7e3t7eHZ5gIJ/e3l6c3V9fH16cXWChX59fXh/fX1/foGBfn6CgHx9goGCgoGGhIaKgYKGiIeEh4WQkImFf4WAhoWIhYKHiIWJh4eChIiGioGIjI2Ggnx4eYB9fnt5foKBfoR/enx5fn+CfH57ent9dXt4fIB9gH+EfYF6dnl6f3qAg4CDfoF+fXl0dX+Eg32BfHx+fnpxeH6Ff3h7fYOBfHp3d3x/g36AeH56f35+eYCAgoKCen6DhXx9fH2BhYF/fn58hXx6fHl9fYKAfnp9enyAgoCFfX19iYeAgHt+goOJhoR9f4eHh4WAhoaJjo6NhYaDgYR+g4SEhIaIhYCBeoaFiYSDf4WOjol+eHR7goN+dnd8fHt4dHR3fnl2dXJ2fH55c2hucoB9d29wc4GBfXN0d3qDe3p4fXuHh3x8e3h8hH15dX6Ai4OBgICEiouFg4SHjIeIiIOHg4R/f39+gIOFioGEgISIjYOAhYeIi4mDhH+EgH97gIOGiIiBhYWChoCCfX+AfoaEiIJ7foF+fXl7fYKHf356gYF+eX18g4GCfn6Afn98dXN5eoKDfXp/eX19fXl2dnJ6fH17dnZ4f3x4dXd7foF7dHl3e3p8enp9en+ChH99fHp9gH9+hIaFh4WAhIF/e4CBh4SEhYOHgoeGhIKAgIGKjI6Ig4KEhYeDen+GiYyHfXx8gYN+eHZ+gYuKh4mDgoKFhH98en+EhYaAeXl6gXt5eHx/g4WBgIB/fn9/e3d7fISCf3p2eX98dXJzen6De3l7eXx7en15eHl8gX+GfXx8goSFgn+FiIeJi4eEgoOChYSDhoqKiYWAfoCAgX54gIaKiYSBf4SIhIJ8en2CiIaGgH59f4J/fHVyf4OIhIB5e4F/gX96enqAgYZ/e3x5gIJ/d3N6fISHfn99hYKFfnp7en6Bg4B+gH6ChYKAenp6foF+f3V+e3x7eXd6fH5/gHx7fHd8e3p3dnt+g4KAfXyAf398e3t9gISHgH96gX+Cgn59eoCFioqIgoKDhIKEfnd8g4iKiIF/g4SGhoF9f4GCh4WDhoSHioqEgH2BhYeEgYKBiIeDfX58fn5+fIB+enp9fIGBeHR6fXt7eHp6fnx7fXl8eX19gnx8eHt+gH15dnh7fX99fn9/foGAgHx8d3+BgYB/gICEgoGCgoCCf4KBg39/gX6DgYB9gIB9gXp8fXt4fHx/e317fH19e3yAfoB+fICEhYSBgYWIh4WBg4KFgYGBg4GChYiIhoSAgYaHhYSAfoOFhYiGhIOFhIWEgn2BgYWEhICAgYKAf3h5eXx8fH1+f319foJ/fXt8fH9+fnyAfoB8fHt8fHp7foCDhYSEgoSAgX5+eXd7eoCEg4GBgYWFg3+Af4CAf3x+gX6AhYGCg4KChoOBgX9/g4ODg4SDgICEgYB7d3V7fX+Aent8fHp+fXd2eHZ3ent4d3h3fn56dHp7f357eHuAg4eGg4SEhYmKiIaHhomMjI2LiYyIiomChoN/f4B7eXh2eHd1c3J0c3Bxa2psamhsZWVucnF4c3R9gYiHh4GDjo6Mi4uJh42KjpSSlZCZlJiak42MjoiGgX54c3Z0cW9nZWJiYl9eYWhtdnd9gH2JkYiNjomTkpGWj5CMkZSUjJCYn6OioJ+Xm5mUj4F5eXdxbmZbXE9JTFBTXmdwcXV8g4mTkpCPh42QlY+JhYaBg4mHiYyQmqGlpJ6bk4+NhHttZl5ZUEg6Q09YXWNkcYSRmJWQk5aZmpKMhIJ/f3t8e3l7fIKFhpKao6Ggmp2an5mRg3lsbGRdTT5IWl5ga2p5jJGVmZ6ZmpqWkpCHf3h5dHd2cXR5fICGiouRk5SeoJqOh4uMj4d+dG5lYVhWW2RkZnF2hpGWlZKVk5WUi4V+enJwdHFxc3B2fIOJipCLj42NiYeDfH98dm9zcnN3dXmAhoiJjIuGiH50eXp4dnVuc3x9foODg4SJiIiKgoF+f3p9fHd3eXt+f4F/f4GAgoOBgICAgYJ/e357e3x+fHt9foGFgn9/hIJ/goB9fn19gYJ+fX+AfoODgYGAgYGEg3+BgX59f35+f3x8f4OCgIKDgoSEg4F+fn5+fHx+fH19fYCBg4GAg4KBgIKAf319f398fX6Af4GBf4CAgYKCgICAf3+AgH1+fn5/f4CAf4CBf4GCgICAf4F/gX9/fX9+f39/gX9/gH+CgYCAf4GAgH+Bf32AgH5/f39/foGAf4GAgIF/gH9/gH5/gH6Af39+gIB/gICAf4CBgICAf39/f39/f4B9gIB/gX+BgICAgH+Bf39/f39/fn+Af4CAf3+AfoCAgIB/fn+Af39/f39+gH9/gX6Af3+Bf4B/f4B/f35/f39/f39/f39/foB/gIB/gX9/f3+Afn9/gH5/f36BfYF/f4GAgH9+gIB/foCAfYCAfn+Afn9/gH6AgIB/f39/f36AfoCAfn+Afn9/f39/f39/f4B+f3+AfoB+gH9/gICAgH+Af39/f36Bfn9/f39/gICAf4GAgICAf4GBf4CAfoB+f39+gH9/f3+Bf36BgIB/gX+AgX9/gH5/f39/foCAgIB/gYCAgIB/gYCAgIB/f36AgIGAfoB/gn+AgH+Bf4B+gH6Afn9/f39/f39/f3+AgICAf36BgH+Af36Af35/gH6AgH+AgX+Bf4CAgH5/foB/f36AfoB/f39/fn+Af36Af3+Afn9/f39/f36AfoB/f35/f4B+gH6BfYGAf39/f39/f39/f39/f3+Afn9/f36Af39/f4B/fYCAfn9/f4B9gIB+f4B/gYCAgICAgICAgIB+f36Af39/gH5/f4B/gH5/gYCBf4CAgH9/gH5/gH5/f39/gH5/f4B/gIB/gYCAgIB/gIF/gYCAgICAgH+AfoCAgH+Bf4B/gYB/gYF+gH9+f3+Af39/f39+gH6Af36AfoB/f36AgX+Bf4CAgX+AgIB/gX9/f36AfoB/foB+gH6Afn9/f39/gH9/f35/gH6AfoB+gH6Af39+f3+AfoB/f39/f39/f39+gH6Af39+f4B+f3+Af39/f4CAgX+Afn9/f39/f39/f4CAgH+AgYB/gX+AgIB/f39/foB/gH2AgH6Af4GAf4F/gIF/gX+AgH9/f39/f35/gH6AfoCAgYB/gICAgIGAgH+AgX9/f36Afn9/gH6AgH+BgH+AgICAgIB/f36Af39/f39/f36Afn+Af4B+f36AfoB+f4B/f39/f36Af39/foB/f39/f35/gH9+gH9+gH9+gH6Af35/f4B/fn+AfoB/foB+gH6Af3+AfX9/f3+Af39/f39/f36Af39/f36Af36Af39/f39/f39+gH9/fn+Af39+gH6Af39+f4B/f36AfoB+gH6Afn9/f3+Af39/f36Af39+gH5/gH9/f36Af39/f39+gH6AfoB/foB/f39+gH6Af36Af39/f39+f4B/fn+Af39/foB/foB/foB+f4B+gH6Af39+gH9/f39/foB/fn+AfoB+f3+AfoF+f39/f36Af36Af3+AgIB+f3+Afn9/gH6Af39/foCAfn9/f36Af39/f39/fn1/foGAf4B/foCBgYGAgH+Af4F/f399f4CAf3+Af3+DiIiCfXxuZIShhFp0mH9zl5l+kKSan6J2V2xrUFJhV0tedY+knpKesKeorp+Dc25rbWhFNFmIgnKUqZqPoKuqnYR7jYxmYnxxYGyLlJSWl6m2p5WTk3dsaF5JNSYoOVJdZnR9hZu1qJeUgV9QYHNjUkFRbIOGm6eqobnR4NnLvcK3rZyaiGtbb3FwWldRXExHQ0BERjtEXWtreaOfoJejn5qVjYiHe3xngX2Gh4mNkana6eTO0LSusKabf3VuV3qLh2VaTktUY2xhWlZSUmN/hGpDRGJaVlpROz5ckKiLisTW0tzfvrexnpGZlHZXgIZrcYZiSGp9ZX+FUmiWd1hnh2JDYm5NWV0yJ1E0J1FcZ1hpe4mtt6mono55k5WGXVVjZmVeZFpTSVZhXGVYSGZvZWlhT0tgeGVjdHlvfIx+gJWLgIqclo+SlpGmtKimtK+mr8G8sK65w8jCvLi+wLW6xsO6t7WxurWgpK2pmJqbkYeFgYeSjX5+e3V2fX52dW5la3BuanFsaWptaWJdX2lwb2VoamFeaGxtbWxqbG9ze317c3R2c3F0d3V9hIF8eHl8fYGGj4uEf4SHi4uNhn+BhIaIhYCEiYiFfn1+f4WJiXx3e4OFfXt+gX59fnp4e4GKhX12enp7gYiOi4eCgIeGi4yNhIB+g4aJhoSBg4KBhYODf4WIj49/dG1xcnp7fHRta3ZydnN6fX16cnNzd3l6cnRsbXJyb3FzgIKCe3l5eYWIhoOFhouIg4iMkomLgIeFhoiIgn+Fj4qFfXmBf4mQj4Z0dn6IioZ/fX6Afn+HgH99eXx8f3t7fXh+gHt1bnN2e310dXt7eXd4e3+Bg4WCeX18gIOBhoB9d4CIiYyHhYR/gYGJiIGHg4SEg3x+goCGh4J4dXNzhIJ/fnVxanJzenx4fH95e3dxb3l9fX95c3Z0eYKDgIWFe32Ei4uGeHyGg4SFhH19gYWPioB6hISNlI6JjISFhY6MiIN9hIaJgnt3gYSFhYN7d3d+gYmIh46Ff3t6foKBeX1/en9/fnZ2d3aBfnt3eHp/hoOEfXhweIOChIJ/fYSEho2FgYKHi4qLf3l2fouOj4B3eHqBfn57fYOBgXt7fHx+eHyAfXt2eXaAfHh9dHV7e3p7fXl7f3x+foSFg4J6hYiJf3l4dYaBhoOAgH2Df4eEgImEjIuIiIiNhImCfISBgnx+f4COhX5zdXt/i4J9eXp8hIJ+fXx1foJ8eXRtcX2Ef4J6dHJ8f36BdnqBhIV/fHuBg3+Ce3x+gICEh4SMkIiFg4WMlZGNiIiIjYyDgH+CiIeLgYV4dHp9goSIfXZ9fH6Ae3l6enR5f3x8fHp8e3t2dnN4fH59fnuCfn52fH59hH5+fYCDgId+g4eDjYmKfX+AgY+QjYR7f3mGhoSHgIJ9goSDiX2BhYKEfX92fH99foB+gH17dHh+fIJ9eXl3dnB8c3p+d3l1eXd5e3V7e3uAeX54g4F/fXp7hYeDeX5/hoyIioaJfYKDg4yIgHyCgISFgn6Ce3t8g4J+eXV6f4eFfX13eoJ/fnp9eX+Cen97eoKBgH6EgX+FgoODgH1+g4WDgX2DiIeDf4OEg4R7foeLhoaGgISDfn6CgIKCg36FgXuCg39/gH99gXt6g398eXh2fX18dnl6eHd4eXl7d3h7f3p8fH19gn15eXl3e3l6fH1+foWHhH9/goqPjIKEhImMjYWChYCDhYN/fXx9g4WDe3x9gYKAe3yBgoCAfH14fn15fnx7fYOCfX16e4KGgH98f4KIg4GAgoWIiIKAen1+hYeEgIF/hIWFfIKFjI2Jgn6Bg4KCfYCChIOCgX+AfXx+goJ/fXt8fnp7enl/fXt5eHh5eXd6f4B8e3Z3eXl5fXyCgn15d3Z4e3t9foF/fn1/g4N/fH6DioWEfX5/g396e3+Dg397fHp5fH9/gH97eXiBf356eX2DhYB7eXl5gH1+fYN/gn6AgYOAg4OHiYqFgYCBhIaGgYODgIOCh4eEgoKIi5GQiYWGh4qJioeGh4aFiIaBgoGAg4KFhYOCgIKDf318e3qAfnx6eHx7e3l5en+AgXx+goSGgoF/goaFgn5+fn2CfH2AgIB/gX9/fH58gIaKh4F9gH5/fXt2e36Bfn99fHh6dnh6e3p/f397fXt9fXp6d3p8fn17enp6e3x9gYSAfH17gIKCgYGCg4WFhIGAgH99fYKEhYaDgoKFg4GAfX+DhYeEgn59fnp7fH18gYB/f3x7fH16enl7e4B/f397eXx8fYKBg4B+gH6Bgn56e36Bh4iBgnuBf4B9goOFhoKBfoCCgXx+foCBhoSGhIJ+gYCCgoKChIOEgYOBfX19fH1/f3+BgH17enh6en15fn+Af39+goKCfX9+goaGg36Af4F/f39/hoeDg4GDgoSBfX5+goSGhoKFgX+Cf39+fYB/goWDfn98e357e3t6fYB/fXp6ent6eXp6fX9/fnx7e319e3p+foCDgoCAf31/gICCf4OGhYaDgH+BgYB+fYKChoaFgYF/gH+BfX9+gIOEhYKAf39/gX98fX2AgYF8fXp9fX59fH1/gYF/fX99fn5/f39/f4CDgYGAfH2AgYCBfn+FhISCgH6BgIB8fXx9gYGCg4GAf4GAf4J8fH1/goSBgH1/gH9/fHx+gYGAgIGAgn9/gYB/goKEhIOAf32BgIB/e3x/gIKCf3+AgH9/fH18fX6AgYB/f318fn16eXp8fYJ/fn1+foB/e3x7fX5/f35+fX1+fn5+fHp7foGAgX19foCCfn99foCCg4GCgoGAgYF/gX9+f4GEhYSCgIODgoOAf36Af4KChYWAgoCBgoJ+fn19foCCgoGAgoCBgICBgH99gIB/goCAgICBgYGAgYGAgYOBg4CBgIJ/goGBgoCAf4GDhICCfoCAgoKBgH9+gIGAgIGAgYCAf4F+fn9/fYCAgH6Bfn9+fn5/fX1+fnt8fn9/f359fn6Afn98fXx8fHx/fn9+f31/foB/fXx+fXx9fX5+fn9/f3+AgIF+gX+AfoGAf4GAf4GAgYCCgIGAgYCAgIB/gYCBgX+BgoGBgoGBgIJ/gYCAgIGBfoB+f3+AfX5/fn59fn1/gH5+fn99fn1+fX59fn59f4B+f3+AgIJ/gYCBgIKBgYCBgYKBgoGCgoKDg4ODgoCCgYOCgYCAgYGDgoGCgYKCgoGBgYCBgIGAf4F+gICBgICAgYCBgYKAgYCBgH+AgYCAf4GAf4KAgoCBgIGAgICBgH+Afn9/gH9/gH9/gIF/gH+BgIB/gIB/gICAgICAf4CAgIGAf4CAgIB/gIB/foB/foB+fX99fn9+fX18fn18fXx9e3x8ent8e3p8e3t7enx7enx7fHt6e3x8en16fnt8fH58fX19fX99f35/foCAgICAgYGBgoKCg4KBhIOChIOCg4ODhISEgoSDgoSDg4ODg4SCg4GDgoGBgoGAgYKBgICAgH6AfX5+fX5+fH59fX19fX19fH58fn18fn59fX19fX1+fX9+fX5+gH9+f4B+gICAgYB/gICAgICAgICAgX+AgX+AgX9/gYCAf4GAfoGAf4CAgICAgYGBgYGCgIGCgIGCgYCCgIKAgIOAgYKBgYGBgYCCgYCBf4CBf4CAgH9+gX5/f39+f4F+f39/f36Af39/f3+AgH6BgICBf3+BgH+Bf4CCfoGAgX+AgIF/gX+AgH+BgICAgICAgH+BgICAgH+BgICAgIF/gICAgICAgIB/gX+BgX+AgICAgICAgICAgICAgICAgX+AgICAgICBf4B/gn+AgICAgH+Cf4CAgX+AgICAgIB/gYCAgIF/gICAgYB/gICAgICAgIF/gIF/gICBf4CAgICBf4CAgIF/gICAgX+AgIB/gYCBf4F/gICAgICAgICAgX+AgICBf4CAgX+AgICAgX+AgICBf4B/gYCAgICAf4J/gICAgX+AgX+Af4GAgH+BgYCAf4CAgICAgICAgIF/gIF/f4GAgX8="},IcnI:function(e,t,a){"use strict";var n=a("7+uW"),s=a("NYxO"),o=a("//Fk"),i=a.n(o),r=a("eOoE"),g=a("YaEn"),d=a("mw3O"),c=a.n(d),u=(a("NC6I"),a("F+jZ")),f=a("zL8q"),p={state:{dataFriendList:[],indexData:{},webName:"",getParams:{data:[]},webWeiHu:{},partnersList:{code:-1,data:[],message:""},groupOwnerList:{},userHomeData:{}},mutations:{setIndexDataData:function(e,t){e.indexData=t,Object(u.i)("vocabulary",t.vocabulary)},setWebName:function(e,t){e.webName=t},setSetParamsData:function(e,t){e.getParams=t},setWebWeiHu:function(e,t){e.webWeiHu=t},setGameListPartnersList:function(e,t){e.partnersList=t},setGroupOwnerList:function(e,t){e.groupOwnerList=t},setUserHomeData:function(e,t){e.userHomeData=t}},getters:{},actions:{userHomeDataAction:function(e){Object(r.a)({method:"post",url:window.host+"/Api/member/index",data:c.a.stringify({})}).then(function(t){if(K.getters.getCodeStateZh(t.data.code))return e.commit("setUserHomeData",t.data),!0})},initIndexAction:function(e){r.a.post(window.host+"/Api/home/main").then(function(t){K.getters.getCodeStateZh(t.data.code)?("https:"==window.location.protocol&&(t.data.data.downImgUrl=t.data.data.downImgUrl.replace(/http/g,"https"),t.data.data.downUrl=t.data.data.downUrl.replace(/http/g,"https"),t.data.data.downVoiceUrl=t.data.data.downVoiceUrl.replace(/http/g,"https"),t.data.data.localDownUrl=t.data.data.localDownUrl.replace(/http/g,"https"),t.data.data.localUploadUrl=t.data.data.localUploadUrl.replace(/http/g,"https"),t.data.data.uploadImgUrl=t.data.data.uploadImgUrl.replace(/http/g,"https"),t.data.data.uploadVoiceUrl=t.data.data.uploadVoiceUrl.replace(/http/g,"https")),e.commit("setIndexDataData",t.data.data),e.commit("setWebName",t.data.data.webName),document.getElementsByTagName("title")[0].innerText=t.data.data.webName):t.data.data.message&&Object(f.Message)({message:t.data.data.message,type:"warning",showClose:!0}),9999==t.data.code&&e.commit("setWebWeiHu",t.data.data)})},getParamsAction:function(e){Object(r.a)({method:"post",url:window.host+"/Api/user/getParams",data:c.a.stringify({})}).then(function(t){return!!K.getters.getCodeStateZh(t.data.code)&&(e.commit("setSetParamsData",t.data),!0)})},getGameListPartnersList:function(e,t){Object(r.a)({method:"post",url:window.host+"/Api/GameList/agencyList",data:c.a.stringify(t)}).then(function(t){if(K.getters.getCodeStateZh(t.data.code))return e.commit("setGameListPartnersList",t.data),!0;Object(f.Message)({message:t.data.message,type:"warning",showClose:!0})})},groupOwnerListAction:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.host+"/Api/GroupOwner/income",data:c.a.stringify(t)}).then(function(t){if(a(t.data),!K.getters.getCodeStateZh(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setGroupOwnerList",t.data.data)})})}}},l=a("woOf"),h=a.n(l),m=a("Dd8w"),S=a.n(m),M=a("VGuj"),_={state:{userInfo:{name:"ratel",img:"static/images/UserAvatar.jpg"},loginData:{sign:!1,token:null,message:"",code:"",websocketToken:""},registerData:{},dataGetInfo:[],dataAccountChange:[],appDownloadUrl:{code:null,data:{}},vcode:{val:"",flag:!1,id:"",imgUrl:""}},mutations:{setVcodeShow:function(e,t){e.vcode.flag=t},setVcodeData:function(e,t){e.vcode.imgUrl="data:image/png;base64,"+t.imageData,e.vcode.id=t.uniqueId},setAppDownloadUrl:function(e,t){e.appDownloadUrl=S()({},e.appDownloadUrl,t)},setLoginData:function(e,t){e.loginData=S()({},e.loginData,t)},getLoginData:function(e,t){if(Object(u.c)("loginData")){var a=Object(u.c)("loginData");e.loginData=S()({},e.loginData,a)}else t.route.push({name:"login"})},setgetInfo:function(e,t){e.dataGetInfo=t},setAccountChange:function(e,t){e.dataAccountChange=t},windowMove:function(e,t){var a=window.document.getElementById("privateWindow"),n=t.clientX-a.offsetLeft,s=t.clientY-a.offsetTop;document.onmousemove=function(e){var t=e.clientX-n,o=e.clientY-s;a.style.left=t+"px",a.style.top=o<1?"0px":o+"px"},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}},getters:{getUserId:function(e){return e.loginData.id}},actions:{getVsCode:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){Object(r.a)({method:"post",url:window.host+"/Api/User/vcode",data:c.a.stringify({data:t})}).then(function(t){e.commit("setVcodeData",t.data.data),a.close()})})},loginAction:function(e,t){var a=t.router;delete t.router;var n=f.Loading.service({lock:!0,text:"登录中",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.host+"/Api/User/logined",data:c.a.stringify({username:t.username,password:t.password,vcode:t.vcode,uniqueId:t.uniqueId,loginFrom:1,phone_model:t.phone_model})}).then(function(s){if(n.close(),K.getters.getCodeStateZh(s.data.code)){t.rememberState?Object(u.j)("ppd",t.password):Object(u.a)("ppd");var o=!1;return Object(u.c)("username")&&s.data.data.username!=Object(u.c)("username")&&(o=!0),Object(f.Message)({message:"登录成功",type:"success",showClose:!0}),K.commit("setIsFirstLogin",!0),e.commit("setLoginData",s.data.data),e.dispatch("getInfo",{uid:s.data.data.id}),e.dispatch("userHomeDataAction"),Object(u.j)("loginData",s.data.data),Object(u.j)("imtoken",s.data.data.imtoken),Object(u.j)("token",s.data.data.token),Object(u.j)("username",s.data.data.username),o&&(Object(u.a)("vuex"),K.commit("initChatInfo")),setTimeout(function(){a.push({path:"/chat"})},500),e.commit("setVcodeShow",!1),s.data}return Object(f.Message)({message:s.data.message,type:"warning",showClose:!0}),1102==s.data.data.code&&(e.commit("setVcodeShow",!0),e.dispatch("getVsCode")),4==s.data.code&&e.dispatch("getVsCode"),!1})},loginOutAction:function(e,t){var a=f.Loading.service({lock:!0,text:"退出中...",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.host+"/Api/User/cancellation",data:c.a.stringify(t.data)}).then(function(e){return a.close(),K.getters.getCodeStateZh(e.data.code)?(Object(f.Message)({message:"退出登录成功！",type:"success",showClose:!0}),Object(u.a)("imtoken"),Object(u.a)("token"),setTimeout(function(){t.route.push({name:"login"})},500),K.commit("updateTopInfo",[]),M.a.conn.close(),e.data):(Object(f.Message)({message:e.data.message,type:"warning",showClose:!0}),!1)})},registerAction:function(e,t){var a=f.Loading.service({lock:!0,text:"注册中...",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.host+"/Api/User/reg",data:c.a.stringify(t.data)}).then(function(n){if(a.close(),!K.getters.getCodeStateZh(n.data.code))return Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}),!1;e.commit("setLoginData",n.data.data),Object(u.j)("ppd",t.data.password);var s=!1;(!Object(u.c)("username")||Object(u.c)("username")&&t.username!=Object(u.c)("username"))&&(s=!0),Object(f.Message)({message:"注册成功",type:"success",showClose:!0}),K.commit("setIsFirstLogin",!0),e.commit("setLoginDataIm",n.data.data),Object(u.j)("loginData",n.data.data),Object(u.j)("imtoken",n.data.data.imtoken),Object(u.j)("token",n.data.data.token),Object(u.j)("username",n.data.data.username),s&&(Object(u.a)("vuex"),K.commit("initChatInfo")),setTimeout(function(){e.dispatch("getInfo",{uid:n.data.data.id}),t.router.push({path:"/chat"})},500)})},resetPassAction:function(e,t){var a=f.Loading.service({lock:!0,text:"修改中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(e){Object(r.a)({method:"post",url:window.host+"/Api/Member/usereditpass",data:c.a.stringify(t.data)}).then(function(t){if(a.close(),!K.getters.getCodeStateZh(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(),Object(f.Message)({message:"修改成功！",type:"success",showClose:!0})})})},editorUser:function(e,t){var a=f.Loading.service({lock:!0,text:"上传中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){Object(r.a)({method:"post",url:window.hostIm+"/api/user/editUser",data:c.a.stringify(t.data)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"修改成功！",type:"success",showClose:!0}),e.commit("setLoginData",t.data.data);var n=Object(u.c)("loginData"),s=h()({},n,t.data.data);Object(u.j)("loginData",s)})})},modifyAvatar:function(e,t){var a=f.Loading.service({lock:!0,text:"上传中...",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.hostIm+"/api/user/editHead",data:c.a.stringify(t.data)}).then(function(n){if(a.close(),!K.getters.getCodeState(n.data.code))return Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"修改头像成功！",type:"success",showClose:!0}),e.dispatch("getInfo",{uid:t.data.self_uid}),e.commit("setLoginData",{head_portrait:t.avatarUrl})})},setWithdrawalPassword:function(e,t){var a=f.Loading.service({lock:!0,text:"设置中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(e){Object(r.a)({method:"post",url:window.host+"/Api/Member/usereditdrawpass",data:c.a.stringify(t)}).then(function(t){return a.close(),K.getters.getCodeStateZh(t.data.code)?(e(),Object(f.Message)({message:"设置成功！",type:"success",showClose:!0}),!0):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})})},confirmPassword:function(e,t){var a=f.Loading.service({lock:!0,text:"确认中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){Object(r.a)({method:"post",url:window.host+"/Api/member/userinsertdrawpass",data:c.a.stringify(t)}).then(function(t){return a.close(),K.getters.getCodeStateZh(t.data.code)?(n(),Object(f.Message)({message:"修改成功！",type:"success",showClose:!0}),e.dispatch("userHomeDataAction"),!0):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})})},getInfo:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/user/getInfo",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e.commit("setgetInfo",t.data.data),a(t.data)})})},setSignature:function(e,t){return Object(r.a)({method:"post",url:window.hostIm+"/api/user/setSignature",data:c.a.stringify(t)}).then(function(e){return!!K.getters.getCodeState(e.data.code)||(Object(f.Message)({message:e.data.message,type:"warning",showClose:!0}),!1)})},getAppDownUrl:function(e,t){return Object(r.a)({method:"post",url:window.hostIm+"/api/uploadFile/downUrl",data:c.a.stringify({})}).then(function(t){return K.getters.getCodeState(t.data.code)?(1e4==t.data.code?e.commit("setAppDownloadUrl",t.data):Object(f.Message)({message:"后台还未上传下载链接，请联系客服",type:"warning",showClose:!0}),!0):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})},getAccountChange:function(e,t){return Object(r.a)({method:"post",url:window.hostIm+"/api/user/accountChange",data:c.a.stringify(t)}).then(function(t){return K.getters.getCodeState(t.data.code)?(e.commit("setAccountChange",t.data.data),t.data.code):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})}}},C=a("mvHQ"),y=a.n(C),I=a("BO1k"),G=a.n(I),w=a("x9P2"),A=a.n(w),v=a("6q8V"),D=a.n(v),O=a("SQjO"),b=a("zcHY"),R=a.n(b),L={state:{AddContactState:!1,ChatRightBoxState:!1,ChatRightFriendBoxState:!1,videoState:!1,pictureState:!1,sendRedPackState:!1,sendBullRedState:!1,sendSweepRedState:!1,sendDragonRedState:!1,redDetailState:!1,enableSendState:!1,searchRecord:!1,redPupContainer:!1,transferDetail:!1,setPassword:!1,searchMoreState:!1,AddFriendState:!1,handleUserVible:!1,userInfoState:!1,groupUserInfoState:!1,personalInfor:!1,leftUserSetState:!1,messageSoundOpen:!1,redPackSoundOpen:!1,groupIncomeState:!1,groupManageState:!1,groupZhuShou:!1,orderFollowState:!1,planFollowState:!1,moneyRewardState:!1,groupErWeiMaState:!1,pictureObj:{img:"",state:!1},videoObj:{data:"",state:!1},userInfo:{name:"ratel",img:"static/images/UserAvatar.jpg"},searchText:"",selectFriendId:null,chatlist:[],emojis:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g},{file:"127.gif",code:"/::L",title:"汗",reg:/\/::L/g},{file:"128.gif",code:"/::>",title:"高兴",reg:/\/::>/g},{file:"129.gif",code:"/::,@",title:"闲",reg:/\/::,@/g},{file:"130.gif",code:"/:,@f",title:"努力",reg:/\/:,@f/g},{file:"131.gif",code:"/::-S",title:"骂",reg:/\/::-S/g},{file:"133.gif",code:"/:,@x",title:"秘密",reg:/\/:,@x/g},{file:"134.gif",code:"/:,@@",title:"乱",reg:/\/:,@@/g},{file:"135.gif",code:"/::8",title:"疯",reg:/\/::8/g},{file:"136.gif",code:"/:,@!",title:"哀",reg:/\/:,@!/g},{file:"137.gif",code:"/:!!!",title:"鬼",reg:/\/:!!!/g},{file:"138.gif",code:"/:xx",title:"打击",reg:/\/:xx/g},{file:"139.gif",code:"/:bye",title:"bye",reg:/\/:bye/g},{file:"142.gif",code:"/:handclap",title:"鼓掌",reg:/\/:handclap/g},{file:"145.gif",code:"/:<@",title:"什么",reg:/\/:<@/g},{file:"147.gif",code:"/::-O",title:"累",reg:/\/::-O/g},{file:"153.gif",code:"/:@x",title:"吓",reg:/\/:@x/g},{file:"155.gif",code:"/:pd",title:"刀",reg:/\/:pd/g},{file:"156.gif",code:"/:<W>",title:"水果",reg:/\/:<W>/g},{file:"157.gif",code:"/:beer",title:"酒",reg:/\/:beer/g},{file:"158.gif",code:"/:basketb",title:"篮球",reg:/\/:basketb/g},{file:"159.gif",code:"/:oo",title:"乒乓",reg:/\/:oo/g},{file:"195.gif",code:"/:circle",title:"跳舞",reg:/\/:circle/g},{file:"160.gif",code:"/:coffee",title:"咖啡",reg:/\/:coffee/g}],forbiddenUserList:{code:null,data:[],message:""},SearchFriendList:{code:null,data:{},message:""},groupUserInfoList:{},newBuildGroupName:"",dataniuniuList:"",zhuanFaMessage:{},groupHidden:!1,kefuHidden:!1,friendHidden:!1,todayLossModal:!1,showEmoji:!1,topInfo:[],mergeGroupInfo:"",userGroup:[]},mutations:{setUserGroup:function(e,t){e.userGroup=t},setTopInfo:function(e,t){e.topInfo.push(t)},updateTopInfo:function(e,t){0==t.length&&e.topInfo.length>0&&e.topInfo.map(function(e,t){delete e.istop}),e.topInfo=t},mergeGroups:function(e,t){e.mergeGroupInfo=t.groupmessage;var a=e.chatlist.filter(function(t){return t.user.remarks_name?t.user.remarks_name.includes(e.searchText):t.user.name.includes(e.searchText)}),n=JSON.parse(K.state.chatListStore.mergeGroupInfo.content),s=n.mergeId,o=n.groupId,i=K.state.friendsListStore.groupChatList,r=a.filter(function(e){return e.id==s}),g=i.filter(function(e){return e.id==o});if(r[0]){if(K.state.msgListStore.activeWindowId==r[0].id&&e.chatlist.length>0){var d=e.chatlist[e.chatlist.length-1],c=d.id,u=d.chatType,p=d.user;K.commit("setActiveWindow",{id:c,type:u,name:p.remarks_name||p.name,head_portrait:p.img}),1==u&&K.dispatch("getLastMessageAction",{send_uid:K.state.chatuserInfoStore.loginData.id,accept_uid:c}),2==u&&(K.dispatch("getGroupChatInfoAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:c}),K.dispatch("getGlastMessageAction",{send_id:K.state.chatuserInfoStore.loginData.id,group_id:c}),K.dispatch("getGroupNoticeAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:c})),3==u&&K.dispatch("getMergeNoticeAction",{Page:1,pageNum:10})}Object(f.Message)({message:"群组"+r[0].user.name+"已被合并到"+g[0].name,type:"success",showClose:!0})}},setHandleUserVible:function(e,t){e.handleUserVible=t},setForbiddenUserList:function(e,t){e.forbiddenUserList=t},setGroupJoinApply:function(e,t){var a=e.chatlist.findIndex(function(e){return t.groupmessage.groupid==e.id&&4==e.chatType});-1!=a?(e.chatlist[a].messages.date=t.create_time,e.chatlist[a].messages.unRead=e.chatlist[a].messages.unRead+1,e.chatlist[a].messages.lastMessage=t.groupmessage.content,K.commit("setChatGoUp",{id:t.groupmessage.groupid,chatType:4})):e.chatlist.unshift({chatType:4,id:t.groupmessage.groupid,chatCount:1,kefu:!1,user:{name:"群通知",img:R.a},messages:{lastMessage:t.groupmessage.content,date:t.create_time,unRead:1}})},setZhuanFaMessage:function(e,t){e.zhuanFaMessage=t},setNewBuildGroupName:function(e,t){e.newBuildGroupName=t},closeSomeModal:function(e,t){e.handleUserVible=!1,e.personalInfor=!1,e.searchMoreState=!1,e.leftUserSetState=!1,e.todayLossModal=!1,e.showEmoji=!1},upDataUserInfo:function(e,t){(e.chatlist||0!=e.chatlist.length)&&e.chatlist.forEach(function(e){e.id==t.singlemessage.sendid&&1==e.chatType&&(e.user.name=t.nickname,e.user.img=t.head_portrait)})},upDataGroupNameInfo:function(e,t){(e.chatlist||0!=e.chatlist.length)&&e.chatlist.forEach(function(e){e.id==t.group_id&&2==e.chatType&&(e.user.name=t.group_name,e.user.img=t.img,e.chatCount=t.count)})},setChatGoUp:function(e,t){if(0!==e.chatlist.length&&e.chatlist[0].id!=t.id)for(var a=null,n=0;n<e.chatlist.length;n++)if(t.id==e.chatlist[n].id&&t.chatType==e.chatlist[n].chatType){a=e.chatlist.splice(n,1),e.chatlist.unshift(a[0]);break}},setGroupUserInfoList:function(e,t){e.groupUserInfoList=S()({},e.groupUserInfoList,t)},updateGroupName:function(e,t){e.chatlist.forEach(function(e){e.id==t.id&&2==e.chatType&&(e.user.name=t.name)})},deleteChatWindow:function(e,t){if(0!=e.chatlist.length){for(var a=0;a<e.chatlist.length;a++)e.chatlist[a].chatType==t.chatType&&e.chatlist[a].id==t.id&&(e.chatlist.splice(a,1),a--);0!=e.chatlist.length&&(K.commit("setActiveWindow",{id:e.chatlist[0].id,type:e.chatlist[0].chatType,name:e.chatlist[0].user.remarks_name||e.chatlist[0].user.name}),2==e.chatlist[0].chatType&&(K.dispatch("delChatEnum",{delete_id:t.id}),K.dispatch("getGroupChatInfoAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:e.chatlist[0].id})))}},setChatRightBoxState:function(e,t){e.ChatRightBoxState=!!t&&!e.ChatRightBoxState},setChatRightFriendBoxState:function(e,t){e.ChatRightFriendBoxState=!!t&&!e.ChatRightFriendBoxState},setSearchFriendList:function(e,t){e.SearchFriendList=t},setVideoPlayer:function(e,t){e.videoObj=S()({},e.videoObj,t)},setPicture:function(e,t){e.pictureObj=S()({},e.pictureObj,t)},setModalState:function(e,t){e[t]=!e[t]},initData:function(e){var t=localStorage.getItem("vue-chat");t&&(e.chatlist=JSON.parse(t))},selectFriend:function(e,t){e.selectFriendId=t},search:function(e,t){e.searchText=t},updateChatUserList:function(e,t){var a=t.lastMessage.nickname&&2==t.chatType?t.lastMessage.nickname+":":"";e.chatlist.forEach(function(e){e.id==t.id&&e.chatType==t.chatType&&(e.messages.unRead=t.unRead,e.messages.date=t.date,t.lastMessage.type!=O.a.MSG_PRIVATE_TXT&&t.lastMessage.type!=O.a.MSG_GROUP_TXT||(e.messages.lastMessage=a+t.lastMessage.content),t.lastMessage.type!=O.a.MSG_GROUP_RED&&t.lastMessage.type!=O.a.MSG_PRIVATE_RED||(e.messages.lastMessage=a+"[有红包]"),t.lastMessage.type!=O.a.MSG_PRIVATE_IMG&&t.lastMessage.type!=O.a.MSG_GROUP_IMG||(e.messages.lastMessage=a+"[图片]"),t.lastMessage.type!=O.a.MSG_GROUP_CARD&&t.lastMessage.type!=O.a.MSG_PRIVATE_CARD||(e.messages.lastMessage=a+"[名片]"),t.lastMessage.type!=O.a.MSG_PRIVATE_ROB&&t.lastMessage.type!=O.a.MSG_GROUP_ROB||(e.messages.lastMessage=a+"[红包被领取]"),t.lastMessage.type!=O.a.MSG_GROUP_AUDIO&&t.lastMessage.type!=O.a.MSG_PRIVATE_AUDIO||(e.messages.lastMessage=a+"[语音消息]"),t.lastMessage.type!=O.a.MSG_GROUP_VIDEO&&t.lastMessage.type!=O.a.MSG_PRIVATE_VIDEO||(e.messages.lastMessage=a+"[视频]"),t.lastMessage.type!=O.a.MSG_PRIVATE_SHARE&&t.lastMessage.type!=O.a.MSG_GROUP_SHARE||(e.messages.lastMessage=a+"[盈亏]"),t.lastMessage.type!=O.a.MSG_PRIVATE_SIGN&&t.lastMessage.type!=O.a.MSG_GROUP_SIGN||(e.messages.lastMessage=a+"[签到]"),t.lastMessage.type!=O.a.MSG_PRIVATE_DASHANG&&t.lastMessage.type!=O.a.MSG_GROUP_DASHANG||(e.messages.lastMessage=a+"[打赏]"),t.lastMessage.type!=O.a.MSG_PRIVATE_SHARENOTE&&t.lastMessage.type!=O.a.MSG_GROUP_SHARENOTE||(e.messages.lastMessage=a+"[注单分享]"),t.lastMessage.type==O.a.MSG_GROUP_INGROUP&&(e.messages.lastMessage=a+"[新成员加入]"),t.lastMessage.type==O.a.MSG_GROUP_PLAN&&(e.messages.lastMessage=a+"[精准计划]"))})},setniuniuList:function(e,t){e.dataniuniuList=t},setCustomerMessage:function(e,t){var a=K.state.chatuserInfoStore.loginData.id,n=void 0,s=void 0,o=void 0;if(t.length>0){var i=!1,r=!0,g=!1,d=void 0;try{for(var c,u=G()(t);!(r=(c=u.next()).done);r=!0){var f=c.value;n=f.send_uid,s=f.send_avatar,o=f.send_remarkName||f.send_nickname,a==n&&(n=f.accept_uid,s=f.accept_avatar,o=f.send_remarkName||f.accept_nickname);var p=e.chatlist.findIndex(function(e){return n==e.id&&1==e.chatType}),l="有新消息";if(f.type==O.a.MSG_PRIVATE_AGREEADDFRIEND)l="你和"+f.send_nickname+"已成为好友可以聊天了";if(f.type==O.a.MSG_MONEY_TRANSFER&&(l="[转账]"),f.type==O.a.MSG_PRIVATE_TXT&&(l=f.content),f.type==O.a.MSG_PRIVATE_RED&&(l="[有红包]"),f.type==O.a.MSG_PRIVATE_IMG&&(l="[图片]"),f.type==O.a.MSG_PRIVATE_ROB&&(l="[红包被领取]"),f.type==O.a.MSG_PRIVATE_AUDIO&&(l="[语音消息]"),f.type==O.a.MSG_PRIVATE_VIDEO&&(l="[视频]"),f.type==O.a.MSG_PRIVATE_SHARE&&(l="[盈亏]"),f.type==O.a.MSG_PRIVATE_SIGN&&(l="[签到]"),f.type==O.a.MSG_PRIVATE_DASHANG&&(l="[打赏]"),f.type==O.a.MSG_PRIVATE_SHARENOTE&&(l="[注单分享]"),2!=f.is_admin&&3!=f.is_admin||(i=!0),-1!=p)e.chatlist[p].messages.date=f.create_time,0==e.chatlist[p].messages.unRead&&1*f.total>0&&(e.chatlist[p].messages.unRead=f.total),e.chatlist[p].messages.lastMessage=l,K.commit("setChatGoUp",{id:n,chatType:1});else if(e.chatlist.unshift({chatType:1,id:n,chatCount:1,kefu:i,user:{name:o,img:s},messages:{lastMessage:l,date:f.create_time,unRead:1*f.total}}),1==K.state.chatListStore.chatlist.length){var m={};m[n]={msgList:[],unReadNum:0,count:0,activeWindowId:n,activeName:""},K.state.msgListStore.friendMsgMap=h()({},m,K.state.msgListStore.friendMsgMap),K.commit("setActiveWindow",{id:n,type:1,name:o,head_portrait:s}),K.dispatch("getLastMessageAction",{send_uid:a,accept_uid:n})}}}catch(e){g=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(g)throw d}}e.chatlist=e.chatlist.sort(function(e,t){return 1*t.messages.date-1*e.messages.date})}e.chatlist.sort(function(e,t){return e.messages.unRead=1*e.messages.unRead||0,t.messages.unRead=1*t.messages.unRead||0,t.messages.unRead-e.messages.unRead})},upGroupOtherChatUserList:function(e,t){var a=t.groupmessage.groupid;e.chatlist.forEach(function(e){a==e.id&&2==e.chatType&&(e.messages.unRead=9,e.messages.date=t.create_time,t.type!=O.a.MSG_GROUP_AT&&t.type!=O.a.MSG_GROUP_AT_ALL||(e.messages.lastMessage='<span style="color:orangered;">【有人@我】</span>'+t.groupmessage.content),t.type==O.a.MSG_GROUP_NOTICE&&(e.messages.lastMessage='<span style="color:orangered;">【有新公告】</span>'+t.groupmessage.content),t.type==O.a.MSG_GROUP_REMOVEPERSON&&(e.messages.lastMessage='<span style="color:orangered;">【移出群聊】</span>'+t.groupmessage.content))})},upSystemChatUserList:function(e,t){e.chatlist.forEach(function(e){e.id==t.id&&e.chatType==t.chatType&&(e.messages.unRead=t.unRead,e.messages.date=t.date,t.type!=O.a.MSG_SYSTEM_GG&&t.type!=O.a.MSG_STATION_LETTER||(e.messages.lastMessage=t.lastMessage.title+":"+t.lastMessage.announcement))})},sendNewChat:function(e,t){var a,n,s=!1,o="";if(2==t.type&&(K.state.friendsListStore.groupChatList.length>0&&(a=K.state.friendsListStore.groupChatList.find(function(e){return e.id==t.message.id})),o=a&&a.group_cover||A.a,n=t.lastMessage||"已经置顶聊天，可以给我发信息啦！"),1==t.type){try{K.state.friendsListStore.kefuList.length>0&&(s=K.state.friendsListStore.kefuList.some(function(e){return e.id==t.message.id})),!s&&K.state.friendsListStore.allFriendList.length>0&&(s=K.state.friendsListStore.allFriendList.some(function(e){return e.id==t.message.id&&3==e.is_admin}))}catch(e){}o=t.message.head_portrait,n=t.lastMessage||"已经置顶聊天，可以给我发信息啦！"}3==t.type&&(o=D.a,n=t.lastMessage&&t.lastMessage.title+":"+t.lastMessage.announcement);var i=void 0;if(e.chatlist.map(function(e){e.id==t.message.id&&e.chatType==t.type&&(i=e.id)}),i||(e.chatlist.unshift({chatType:t.type,id:t.message.id,chatCount:t.message.count,kefu:s,user:{remarks_name:t.message.remarks_name,name:t.message.name,img:o},messages:{lastMessage:n||"已经置顶聊天，可以给我发信息啦！",date:Math.round((new Date).getTime()/1e3).toString(),unRead:t.state?0:1}}),1==e.chatlist.length&&K.commit("setActiveWindow",{id:t.message.id,type:t.type,name:t.message.remarks_name||t.message.name,num:t.message.count,head_portrait:t.message.head_portrait})),t.state){t.message.id,t.type,t.message.remarks_name||t.message.name,t.message.count,t.message.head_portrait;K.commit("setActiveWindow",{id:t.message.id,type:t.type,name:t.message.remarks_name||t.message.name,num:t.message.count,head_portrait:t.message.head_portrait}),g.a.push({path:"/chat"})}}},getters:{searchedChatlist:function(e){var t,a=e.chatlist.filter(function(t){return t.user.remarks_name?t.user.remarks_name.includes(e.searchText):t.user.name.includes(e.searchText)});return t=null,e.topInfo.length>0&&e.topInfo.map(function(n,s){for(var o=0;o<a.length;o++)if(e.topInfo[s].id==a[o].id&&e.topInfo[s].chatType==a[o].chatType){(t=a.splice(o,1))[0].istop=!0,a.unshift(t[0]);break}}),function(){if(K.state.chatListStore.mergeGroupInfo){var e=JSON.parse(K.state.chatListStore.mergeGroupInfo.content).mergeId;if(a=a.filter(function(t){return t.id!=e}),K.state.msgListStore.activeWindowId==e&&a.length>0){var t=a[0],n=t.id,s=t.chatType,o=t.user;K.commit("setActiveWindow",{id:n,type:s,name:o.remarks_name||o.name,head_portrait:o.img}),1==s&&K.dispatch("getLastMessageAction",{send_uid:K.state.chatuserInfoStore.loginData.id,accept_uid:n}),2==s&&(K.dispatch("getGroupChatInfoAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:n}),K.dispatch("getGlastMessageAction",{send_id:K.state.chatuserInfoStore.loginData.id,group_id:n}),K.dispatch("getGroupNoticeAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:n})),3==s&&K.dispatch("getMergeNoticeAction",{Page:1,pageNum:10})}}var i=[],r=[],g=a.filter(function(e){return 2==e.chatType}),d=function(e,t){e.forEach(function(e){return t.push(e.id),t})};d(K.state.friendsListStore.groupChatList,i),d(g,r);var c=r.filter(function(e){if(!i.includes(e))return e});0!=c.length&&c.forEach(function(e){a=a.filter(function(t){return t.id!=e})})}(),K.state.friendsListStore.allFriendList.length>0&&a.length>0&&a.forEach(function(e){K.state.friendsListStore.allFriendList.forEach(function(t){t.id&&2!=e.chatType&&t.id==e.id&&(e.online=t.online)})}),a},searchedFriendlist:function(e){return e.friendlist.filter(function(t){return t.remark.includes(e.searchText)})},selectedChat:function(e){var t=e.chatlist.find(function(e){return e.id==K.state.msgListStore.activeWindowId&&e.chatType==K.state.msgListStore.activeTyep});if(K.state.chatListStore.mergeGroupInfo&&(JSON.parse(K.state.chatListStore.mergeGroupInfo.content).mergeId==t.id&&e.chatlist.length>0))return e.chatlist[e.chatlist.length-1];return t}},actions:{upDataUserInfoAction:function(e,t){return(0,e.commit)("upDataUserInfo",t)},searchUser:function(e,t){var a=e.commit;setTimeout(function(){a("search",t)},100)},mergeGroup:function(e,t){(0,e.commit)("mergeGroups",t)},initData:function(e,t){return(0,e.commit)("initData",t)},getUserGroup:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getUserGroup",data:t}).then(function(t){if(0!==t.data.code)return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setUserGroup",t.data.data)})})},addPhoneAction:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/uploadFile/upload",headers:{"Content-Type":"multipart/form-data"},data:t}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data.data)})})},messageForward:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/push/forward",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"转发成功",type:"success",showClose:!0}),e(t.data)})})},getqiniuToken:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/uploadFile/createToken",data:c.a.stringify({key:"ac768f083acf4733b3e136c9917c89de"})}).then(function(t){return K.getters.getCodeState(t.data.code)?(e(t.data.data),t.data.data):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})})},getqiniuToken2:function(e,t){return new i.a(function(e){e({})})},getqiniuToken3:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:t.url,data:t.files}).then(function(e){})})},searchFriendListAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/user/search",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),e.commit("setSearchFriendList",t.data),!1;e.commit("setSearchFriendList",t.data)})},transferGroup:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/transferGroup",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:a.data.message,type:"success",showClose:!0}),K.dispatch("getGroupChatInfoAction",{self_uid:K.state.chatuserInfoStore.loginData.id,group_id:t.group_id}),e(!0)})})},addMyFriendAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/addFriend",data:c.a.stringify({self_uid:t.self_uid,friend_uid:t.friend_uid,agree:t.agree,add_msg:t.add_msg})}).then(function(n){if(!K.getters.getCodeState(n.data.code))return Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}),!1;if(Object(f.Message)({message:n.data.message,type:"success",showClose:!0}),0==t.agree){var s={to:t.friend_uid,message:K.state.chatuserInfoStore.dataGetInfo.nickname+"申请添加您为好友",type:O.a.MSG_PRIVATE_APPLYFRIEND,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};e.dispatch("sendMessageIM",s)}if(1==t.agree){K.commit("setActiveWindow",{id:t.friend_uid,type:1,name:t.nickname,num:1,head_portrait:t.head_portrait});var o={to:t.friend_uid,message:"您与"+K.state.chatuserInfoStore.dataGetInfo.nickname+"已成为好友，可以聊天了",type:O.a.MSG_PRIVATE_AGREEADDFRIEND,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};e.dispatch("sendMessageIM",o)}e.dispatch("getCountApplyFriendAction",{self_uid:t.self_uid}),t.searchParam&&e.dispatch("searchFriendListAction",{uid:t.self_uid,searchParam:t.searchParam}),a(n.data)})})},editGroupSelfAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/editGroupSelf",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;e.dispatch("getGroupChatInfoAction",{self_uid:t.self_uid,group_id:t.group_id})})},getForbiddenUserList:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getForbiddenUserList",data:c.a.stringify(t)}).then(function(t){return 0==t.data.code?(e.commit("setForbiddenUserList",t.data),!0):(Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1)})})},editGroupAction:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/editGroup",data:c.a.stringify(t)}).then(function(n){if(!K.getters.getCodeState(n.data.code))return Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}),!1;t.group_name&&e.commit("updateGroupName",{id:t.group_id,name:t.group_name}),a(n.data)})})},setGrabLevel:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/miscell/steGrabLevel",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"设置成功！",type:"success",showClose:!0}),e(t.data)})})},setSendGrabLevel:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/miscell/setSendGrabLevel",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"设置成功！",type:"success",showClose:!0}),e(t.data)})})},delGroupAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/delGroup",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:a.data.message,type:"success",showClose:!0}),t.del_uid?e.dispatch("getGroupChatInfoAction",{self_uid:t.self_uid,group_id:t.group_id}):(e.commit("deleteChatWindow",{id:t.group_id,chatType:2}),e.commit("setChatRightBoxState",!1))})},signOutGroupAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/signOutGroup",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:a.data.message,type:"success",showClose:!0}),e.commit("deleteChatWindow",{id:t.group_id,chatType:2}),e.commit("setChatRightBoxState",!1)})},getGroupUserInfoAction:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/getGroupUserInfo",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setGroupUserInfoList",t.data.data),n(t.data)})})},niuniuMethodAction:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.host+"/Api/Home/rule",data:c.a.stringify(t)}).then(function(t){if(0!==t.data.code)return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setniuniuList",t.data.data),a(t.data)})})},sendRedEnvelopes:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/wechatGame/sendRedEnvelopes",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data)})})},getCustomerServiceAction:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getCustomerService",data:c.a.stringify(t)}).then(function(t){if(1e4!=t.data.code)return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setCustomerMessage",t.data.data.offlineMessage),a(t.data.data)})})}}},F=a("Gu7T"),E=a.n(F),j=a("d7EF"),k=a.n(j),B=a("7MRW"),T={state:{dataAddFriendList:{data:{count:0,data:[]}},goodFriendList:[],groupChatList:[],friendInfo:null,blackList:[],groupChatInfoList:{code:null,data:{},message:""},historyMessage:{code:null,data:"",message:""},historyMessageData:{code:null,data:"",message:""},anchorInfo:"",GroupChatId:"",countApplyFriend:0,inGroupUserList:[],isAddUser:!1,isAddFriend:!1,disableSpeack:!1,saoMaGroupJoin:!1,isGetPeople:!1,kefuList:[],allFriendList:[],newAddFriendHistory:[],allListFriendList:[],isAddFriendState:!1,joinApplyList:[],friendPageSearch:"",friendPageSearchState:"0",groupUserSearch:"",clickContent:{}},mutations:{setClickContent:function(e,t){e.clickContent=t},setGroupUserSearch:function(e,t){e.groupUserSearch=""},setIsAddFriendState:function(e,t){e.isAddFriendState=t},setAllListFriendList:function(e,t){e.newAddFriendHistory.length>0&&t.data.forEach(function(t){var a=e.newAddFriendHistory.findIndex(function(e){return e.id==t.id});-1!=a&&(e.newAddFriendHistory[a].head_portrait=t.head_portrait,e.newAddFriendHistory[a].nickname=t.nickname)})},setAnchorInfo:function(e,t){e.anchorInfo=t},setHistoryMessage:function(e,t){if(t.data&&t.data.length>0){var a=t.data.sort(function(e,t){return t.create_time-e.create_time});t.data=a}e.historyMessage=t},setHistoryMessageData:function(e,t){console.log(t),e.historyMessageData=t},setNewAddFriendHistory:function(e,t){if(t.clear)e.newAddFriendHistory=[];else{var a=e.newAddFriendHistory.findIndex(function(e){return e.id==t.id});-1==a?e.newAddFriendHistory.unshift(t):e.newAddFriendHistory.splice(a,1,t)}},setRemarkName:function(e,t){if(K.state.chatListStore.chatlist.length>0){var a=!0,n=!1,s=void 0;try{for(var o,i=G()(K.state.chatListStore.chatlist.entries());!(a=(o=i.next()).done);a=!0){var r=o.value,g=k()(r,2),d=g[0];if(g[1].id==t.friend_uid){K.state.chatListStore.chatlist[d].user.remarks_name=t.remarks_name;break}}}catch(e){n=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw s}}}},setAllFriendList:function(e,t){e.allFriendList=t},setGroupInfoState:function(e,t){e[t.name]=t.state},setIsAddUser:function(e,t){e.isAddUser=t},setInGroupUser:function(e,t){e.inGroupUserList=[],t.forEach(function(t){e.inGroupUserList.push(t.uid)})},setCountApplyFriend:function(e,t){e.countApplyFriend=t},setGroupChatInfoList:function(e,t){t.data.user_info.forEach(function(e,t){e.checked=!1}),e.groupChatInfoList=t},setGroupChatInfoListNull:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:null,data:{},message:""};e.groupChatInfoList=t},setNull:function(e,t){e[t]=""},setGroupChatId:function(e,t){e.GroupChatId=t},setAddFriendList:function(e,t){e.dataAddFriendList=t},setGoodFriendKefuList:function(e,t){e.kefuList=t.filter(function(e){return 2==e.is_admin})},setGoodFriendList:function(e,t){for(var a=0;a<t.length;a++){(e.inGroupUserList.some(function(e){return e==t[a].id})&&e.isAddUser&&K.state.chatListStore.AddContactState||K.state.chatListStore.AddContactState&&3==t[a].is_admin||2==t[a].is_admin)&&(t.splice(a,1),a--)}"{}"==y()(t)&&(t=[]),t.forEach(function(e){e.initials||(e.initials="#")});var n=[];!function e(t,a){if(0==t.length)return n=a,!1;for(var s=[],o=[],i=t[0].initials||"#",r=0,g=t.length;r<g;r++)i==t[r].initials?(t[r].isChecked=!1,t[r].isChoose=!1,s.push(t[r])):(t[r].isChecked=!1,t[r].isChoose=!1,o.push(t[r]));a.push(s),e(o,a)}(t,[]),n=n.sort(function(e,t){return e[0].initials.charCodeAt()-96-(t[0].initials.charCodeAt()-96)}),e.goodFriendList=n},setFriendInfo:function(e,t){t&&t.hasOwnProperty("superman")&&(t.username=Object(B.a)(t.username)),e.friendInfo=t},setGroupChatList:function(e,t){e.groupChatList=t},setBlackListInfo:function(e,t){e.blackList=t},setJoinApplyList:function(e,t){e.joinApplyList=t}},getters:{getGroupUsers:function(e){return e.groupChatInfoList.data.user_info.filter(function(t){return t.user_group_name.includes(e.groupUserSearch)})},getGroupRemarkName:function(e){return function(t){var a=!0,n=!1,s=void 0;try{for(var o,i=G()(e.allFriendList.entries());!(a=(o=i.next()).done);a=!0){var r=o.value,g=k()(r,2),d=g[0],c=g[1];if(c.id==t.uid||c.id==t.send_uid)return e.allFriendList[d].remarks_name}}catch(e){n=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw s}}}},getGroupMyName:function(e){var t=K.getters.getUserId;return e.groupChatInfoList.data.user_info.find(function(e){return e.uid==t}).user_group_name},isBoss:function(e){return K.state.chatuserInfoStore.loginData.id==e.groupChatInfoList.data.owner_uid},isManagement:function(e){var t=!1;return e.groupChatInfoList.data.user_info&&(t=e.groupChatInfoList.data.user_info.some(function(e){return e.uid==K.state.chatuserInfoStore.loginData.id&&2==e.role})),t},getGroupChatList:function(e){return 1==e.friendPageSearchState||0==e.friendPageSearchState?e.groupChatList.filter(function(t){return t.name.includes(e.friendPageSearch)})||[]:e.groupChatList},getKefuList:function(e){return 2==e.friendPageSearchState||0==e.friendPageSearchState?e.kefuList.filter(function(t){return t.nickname.includes(e.friendPageSearch)})||[]:e.kefuList},getFriendAllPeople:function(e){for(var t=0,a=0;a<e.goodFriendList.length;a++)for(var n=0;n<e.goodFriendList[a].length;n++)t++;return t},getGoodFriendList:function(e){if(3==e.friendPageSearchState||0==e.friendPageSearchState){var t=[],a=0;return e.goodFriendList.forEach(function(n,s){var o=n.filter(function(t){return t.remarks_name?t.remarks_name.includes(e.friendPageSearch):t.nickname.includes(e.friendPageSearch)});o.length>0&&(t[a]=o,a++)}),t}return e.goodFriendList}},actions:{editGroupCover:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/editGroupCover",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:"修改成功",type:"success",showClose:!0}),e(t.data)})})},joinApplyAgreeAction:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/joinApplyAgree",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(),Object(f.Message)({message:t.data.message,type:"success",showClose:!0})})})},getJoinApplyListAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/joinApplyList",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setJoinApplyList",t.data)})},groupSetAdminAction:function(e,t){return new i.a(function(e){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/setAdmin",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data),Object(f.Message)({message:t.data.message,type:"success",showClose:!0})})})},getGroupNoticeAction:function(e,t){new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/getGroupNotice",data:c.a.stringify(t)}).then(function(t){if(1e4!==t.data.code)return!1;1==t.data.data.is_read&&K.commit("setGroupOfflineList",t.data.data),e(t.data)})})},delChatEnum:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/delChatEnum",data:c.a.stringify(t)}).then(function(e){if(1e4!==e.data.code)return!1;Object(f.Message)({message:e.data.message,type:"success",showClose:!0})})})},getForbiddenStatus:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getForbiddenStatus",data:c.a.stringify(t)}).then(function(t){return 0==t.data.code&&(e(t.data),!0)})})},forbiddenUser:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/miscell/forbiddenUser",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;var n="";n=2==t.status?"禁言成功":"解除禁言成功！",Object(f.Message)({message:n,type:"success",showClose:!0}),e(a.data)})})},getHistoryMessageAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getHistoryMessage",data:c.a.stringify(t)}).then(function(n){0===n.data.code?(t.time?e.commit("setHistoryMessageData",n.data):e.commit("setHistoryMessage",n.data),Object(f.Message)({message:n.data.message,type:"success",showClose:!0}),a(n.data.data)):(t.time?e.commit("setHistoryMessageData",""):e.commit("setHistoryMessage",""),Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}))})})},getSingleHistoryMessageAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.host+"/Api/WechatGame/getSingleMessageHistory",data:c.a.stringify(t)}).then(function(n){0===n.data.code?(t.time?e.commit("setHistoryMessageData",n.data):e.commit("setHistoryMessage",n.data),Object(f.Message)({message:n.data.message,type:"success",showClose:!0}),a(n.data.data)):(t.time?e.commit("setHistoryMessageData",""):e.commit("setHistoryMessage",""),Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}))})})},isReadNoticeAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/isReadNotice",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e(t.data)})})},getAllListFriendList:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/getAllList",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setAllListFriendList",t.data)})},addFriendList:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/addFriendList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setAddFriendList",t.data)})},refuseAddFriend:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/refuseAddFriend",data:c.a.stringify(t)}).then(function(s){if(a.close(),!K.getters.getCodeState(s.data.code))return Object(f.Message)({message:s.data.message,type:"warning",showClose:!0}),!1;e.dispatch("getCountApplyFriendAction",{self_uid:t.self_uid}),Object(f.Message)({message:s.data.message,type:"success",showClose:!0}),n(s.data)})})},getFriendList:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/getFriendList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return!1;if(1e4==t.data.code){var s=[].concat(E()(t.data.data));e.commit("setGoodFriendList",t.data.data),e.commit("setAllFriendList",s),n()}else e.commit("setGoodFriendList",[]),e.commit("setAllFriendList",[])})})},getFriendkefuList:function(e,t){var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/getFriendList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return!1;1e4==t.data.code?e.commit("setGoodFriendKefuList",t.data.data):e.commit("setGoodFriendKefuList",[])})},getFriendInfoAction:function(e,t){t.website=K.state.indexStore.indexData.website;var a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/getFriendInfo",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setFriendInfo",t.data.data),n(t.data.data)})})},firstAddGroupChat:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/firstAddGroup",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data)})})},addManyGroupChat:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/addManyGroup",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data)})})},getGroupChatList:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/getGroupList",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e.commit("setGroupChatList",t.data.data)})})},getGroupChatInfoAction:function(e,t){new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/getGroupInfo",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e.commit("setGroupChatId",t.data.data.group_id),e.commit("upDataGroupNameInfo",{group_id:t.data.data.group_id,group_name:t.data.data.group_name,img:t.data.data.group_cover,count:t.data.data.count}),e.commit("setGroupChatInfoList",t.data),a(t.data)})})},saoMaGroupJoinAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/joinApplySwitch",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;Object(f.Message)({message:"修改成功",type:"success",showClose:!0}),e(t.data)})})},deleteFriendInfo:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/deleteFriend",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:t.data.message,type:"success",showClose:!0}),e(t.data)})})},getBlackList:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/getBlackList",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setBlackListInfo",t.data.data),a(t.data)})})},blackFriendInfo:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/blackFriend",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:t.data.message,type:"success",showClose:!0}),e(t.data)})})},editFriendInfo:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/editFriendInfo",data:c.a.stringify(t)}).then(function(n){if(a(n.data),!K.getters.getCodeState(n.data.code))return Object(f.Message)({message:n.data.message,type:"warning",showClose:!0}),!1;e.commit("setRemarkName",t)})})},setIsAddAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/setIsAdd",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:"修改失败",type:"error",showClose:!0}),!1;Object(f.Message)({message:"修改成功",type:"success",showClose:!0}),e(t.data)})})},disableSpeackAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/forbiddenGroup",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:"修改失败",type:"error",showClose:!0}),!1;Object(f.Message)({message:"修改成功",type:"success",showClose:!0}),e(t.data)})})},setIsPullAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userGroup/setIsPull",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:"修改失败",type:"error",showClose:!0}),!1;Object(f.Message)({message:"修改成功",type:"success",showClose:!0}),e(t.data)})})},cancelBlack:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/cancelBlack",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:t.data.message,type:"success",showClose:!0}),e(t.data)})})},signOutGroup:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/signOutGroup",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:t.data.message,type:"success",showClose:!0}),e(t.data)})})},getCountApplyFriendAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/userFriend/countApplyFriend",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e.commit("setCountApplyFriend",t.data.data.count)})}}},H=(new Date,{state:{dataFriendList:[],dataFriendCircle:[]},mutations:{setFriendList:function(e,t){for(var a in t)t[a].intoState=!1;e.dataFriendList=t},setFriendCircleList:function(e,t){e.dataFriendCircle=t}},getters:{},actions:{getFriendListAction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{self_uid:K.getters.getUserId},a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/getSelfCircleList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setFriendList",t.data.data),n(t.data)})})},getFriendCircleList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{self_uid:K.getters.getUserId},a=f.Loading.service({lock:!0,text:"获取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/getFriendCircleList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e.commit("setFriendCircleList",t.data.data),n(t.data)})})},addLikeAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/like",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;var n={id:t.fcmid,data:{l_uid:t.likeUid,name:K.state.chatuserInfoStore.dataGetInfo.nickname}};e(n)})})},cancelLikeAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/cancelLike",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;var n={id:t.fcmid,data:{l_uid:t.self_uid,name:K.state.chatuserInfoStore.dataGetInfo.nickname}};e(n)})})},addComment:function(e,t){return Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/comment",data:c.a.stringify(t)}).then(function(e){if(K.getters.getCodeState(e.data.code)){Object(f.Message)({message:e.data.message,type:"success",showClose:!0});var a={id:e.data.data.fcmid,data:{com_uid:e.data.data.comUid,content:t.content,m_id:e.data.data.circleId,name:K.state.chatuserInfoStore.dataGetInfo.nickname}};return e.data.data.repeatUid&&(a.data.content="回复 "+t.conName+":"+t.content),a}return Object(f.Message)({message:e.data.message,type:"warning",showClose:!0}),!1})},addMoments:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/releaseCircle",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:t.data.message,type:"success",showClose:!0}),e(t.data)})})},deleteMoment:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/FriendCircle/delFriendCircle",data:c.a.stringify(t)}).then(function(a){if(!K.getters.getCodeState(a.data.code))return Object(f.Message)({message:a.data.message,type:"warning",showClose:!0}),!1;Object(f.Message)({message:a.data.message,type:"success",showClose:!0});var n={id:t.fcm_id};e(n)})})}}}),P=a("424j"),U=a("fZjL"),N=a.n(U),x=a("rfSu"),Y={base:{type:1,control:"",action:"",from:"pc",comment:"",token:"",create_time:"",unique_value:"",nickname:"",reserved:""},6:{action:"image",control:"SingleChat",type:6,head_portrait:""},7:{action:"red",control:"SingleChat",type:7,head_portrait:""},25:{action:"card",control:"SingleChat",type:25,head_portrait:""},5:{action:"text",control:"SingleChat",type:5,head_portrait:""},13:{action:"apply",control:"SingleChat",type:13,head_portrait:""},15:{action:"recall",control:"SingleChat",type:15,head_portrait:""},17:{action:"rob",control:"SingleChat",type:17,head_portrait:""},14:{action:"agree",control:"SingleChat",type:14,head_portrait:""},18:{action:"ingroup",control:"GroupChat",type:18,head_portrait:""},23:{action:"rob",control:"GroupChat",type:23,head_portrait:""},10:{action:"red",control:"GroupChat",type:10,head_portrait:""},11:{action:"tip",control:"GroupChat",type:11,head_portrait:""},24:{action:"card",control:"GroupChat",type:24,head_portrait:""},16:{action:"recall",control:"GroupChat",type:16,head_portrait:""},8:{action:"text",control:"GroupChat",type:8,head_portrait:""},9:{action:"image",control:"GroupChat",type:9,head_portrait:""},33:{action:"tipall",control:"GroupChat",type:33,head_portrait:""},21:{action:"sack",control:"Common",type:21,head_portrait:""},22:{action:"gack",control:"Common",type:22,head_portrait:""},19:{action:"thumbs",control:"Common",type:19,head_portrait:""},20:{action:"comment",control:"Common",type:20,head_portrait:""},30:{action:"clearance",control:"Game",type:30,head_portrait:""},29:{action:"cattle",control:"Game",type:29,head_portrait:""},39:{action:"solitaire",control:"GroupChat",type:39,head_portrait:""},100:{action:"index",control:"HeartBeat",type:100,head_portrait:""},44:{action:"video",control:"GroupChat",type:44,head_portrait:""},45:{action:"audio",control:"GroupChat",type:45,head_portrait:""},46:{action:"video",control:"SingleChat",type:46,head_portrait:""},47:{action:"audio",control:"SingleChat",type:47,head_portrait:""},55:{action:"groupLoss",control:"Share",type:55,head_portrait:""},54:{action:"singleLoss",control:"Share",type:54,head_portrait:""},50:{action:"singleSignIn",control:"Share",type:50,head_portrait:""},51:{action:"groupSignIn",control:"Share",type:51,head_portrait:""},49:{action:"groupShareNote",control:"Share",type:49,head_portrait:""},48:{action:"singleShareNote",control:"Share",type:48,head_portrait:""},52:{action:"singleReward",control:"Share",type:52,head_portrait:""},53:{action:"groupReward",control:"Share",type:53,head_portrait:""},57:{action:"acceptAck",control:"Common",type:57,head_portrait:""}};function W(e,t,a,n,s,o){var i=X({},Y.base),r=X({},Y[n]);return r.unique_value=Object(u.k)(),r.nickname=K.state.chatuserInfoStore.dataGetInfo.nickname,r.create_time=Math.round((new Date).getTime()/1e3).toString(),r.from="web",r.reserved=s,r.head_portrait=K.state.chatuserInfoStore.dataGetInfo.head_portrait,O.a._ifGroup(n)?r.groupmessage={comment:o&&o.findId||"",content:a,groupid:t,sendid:e,groupName:o&&o.groupName||"",groupPeoples:o&&o.count||""}:r.singlemessage={sendid:e,acceptid:t,content:a,comment:""},S()({},i,r)}function X(e,t){var a={};return N()(t).forEach(function(n){a[n]=e[n]||t[n]}),a}M.a.conn.listen({});var V={state:{onlineState:-1,redPackDetail:{},red_id:"",dataRedId:[],chatRoomFindUser:{num:0,name:"",status:!1,atAll:!1},isGoDown:!1,findUserList:[],pasteImg:{state:!1,blobUrl:"",file:{}},thisRedType:0,redSendUid:"",redUnique_value:"",sendRedPackMessage:{},firstRedState:{},getOrCheck:1,mergeNoticeList:{count:0,data:[]},daShangObj:{},rewardUserObj:{},transferDetail:{}},getters:{initForwardMessage:function(e){return function(e){var t=e.to,a=e.message,n=e.type,s=e.groupinfo,o=W(K.state.chatuserInfoStore.loginData.id,t,a,n,s);if(o.avatar=o.head_portrait,delete o.head_portrait,o.groupmessage){var i=o.groupmessage;o.groupMessage=i,o.groupMessage.sendId=K.state.chatuserInfoStore.loginData.id,o.groupMessage.groupId=0,delete o.groupmessage}if(o.singlemessage){var r=o.singlemessage;o.singleMessage=r,o.singleMessage.sendId=K.state.chatuserInfoStore.loginData.id,o.singleMessage.acceptId=0,delete o.singlemessage}return o}}},mutations:{setMessageTimes:function(e,t){var a=Object(u.c)("redHui"),n=Object(u.c)("niuDetail"),s=Object(u.c)("audioUnread");t.forEach(function(e,t){a.length>0&&(a.some(function(t){return t==e.unique_value})&&(e.redState=!0));s.length>0&&(s.some(function(t){return t==e.unique_value})&&(e.audioUnread=!0));if(n&&n[e.unique_value]){var o=n[e.unique_value];e.niu_detail=o}})},setGetOrCheck:function(e,t){e.getOrCheck=t},setPasteImg:function(e,t){e.pasteImg=S()({},e.pasteImg,t)},setChatRoomFindUser:function(e,t){if(t.status){if(e.chatRoomFindUser.num++,t.atAll)return e.chatRoomFindUser.status=!0,void(e.chatRoomFindUser.name="全部成员 ");var a={name:"@"+t.nickname,uid:t.uid};t.type?e.chatRoomFindUser.name=t.nickname+" ":e.chatRoomFindUser.name="@"+t.nickname+" ";var n=e.findUserList.findIndex(function(e){return e.uid==a.uid});-1==n?e.findUserList.unshift(a):e.findUserList.splice(n,1,a)}else e.findUserList=[];e.chatRoomFindUser.status=t.status},setOfflineMessage:function(e,t){var a=!1,n=function(e,t){var n=K.state.chatListStore.chatlist.findIndex(function(e){return t.send_uid==e.id&&1==e.chatType});if(d="有新消息",t.type==O.a.MSG_PRIVATE_AGREEADDFRIEND&&(d="你和"+t.send_nickname+"已成为好友可以聊天了"),t.type==O.a.MSG_MONEY_TRANSFER&&(d="[转账]"),t.type==O.a.MSG_PRIVATE_TXT&&(d=t.content),t.type==O.a.MSG_PRIVATE_RED&&(d="[有红包]"),t.type==O.a.MSG_PRIVATE_IMG&&(d="[图片]"),t.type==O.a.MSG_PRIVATE_ROB&&(d="[红包被领取]"),t.type==O.a.MSG_PRIVATE_AUDIO&&(d="[语音消息]"),t.type==O.a.MSG_PRIVATE_VIDEO&&(d="[视频]"),t.type==O.a.MSG_PRIVATE_SHARE&&(d="[盈亏]"),t.type==O.a.MSG_PRIVATE_SIGN&&(d="[签到]"),t.type==O.a.MSG_PRIVATE_DASHANG&&(d="[打赏]"),t.type==O.a.MSG_PRIVATE_SHARENOTE&&(d="[注单分享]"),t.type==O.a.MSG_GROUP_PLAN&&(d="[精准计划]"),t.type==O.a.MSG_GROUP_CARD&&(d="[名片]"),2!=t.is_admin&&3!=t.is_admin||(a=!0),-1!=n)K.state.chatListStore.chatlist[n].messages.date=t.create_time,K.state.chatListStore.chatlist[n].messages.unRead=t.total,K.state.chatListStore.chatlist[n].messages.lastMessage=d,K.commit("setChatGoUp",{id:t.send_uid,chatType:1});else if(K.state.chatListStore.chatlist.unshift({chatType:1,id:t.send_uid,chatCount:1,kefu:a,user:{name:t.send_remarkName||t.send_nickname,img:t.send_avatar},messages:{lastMessage:d,date:t.create_time,unRead:t.total}}),1==K.state.chatListStore.chatlist.length){var s={};s[t.send_uid]={msgList:[],unReadNum:0,count:0,activeWindowId:t.send_uid,activeName:""},K.state.msgListStore.friendMsgMap=h()({},s,K.state.msgListStore.friendMsgMap),K.commit("setActiveWindow",{id:t.send_uid,type:1,name:t.send_nickname,head_portrait:t.send_avatar}),K.dispatch("getLastMessageAction",{send_uid:t.accept_uid,accept_uid:t.send_uid})}},s=!0,o=!1,i=void 0;try{for(var r,g=G()(t.entries());!(s=(r=g.next()).done);s=!0){var d,c=r.value,u=k()(c,2);u[0];n(0,u[1])}}catch(e){o=!0,i=e}finally{try{!s&&g.return&&g.return()}finally{if(o)throw i}}},setGroupOfflineMessage:function(e,t){var a=function(e,t){var a=K.state.chatListStore.chatlist.findIndex(function(e){return t.group_id==e.id&&(2==e.chatType||3==e.chatType||4==e.chatType)});if(g=2,1e7==t.group_id&&(g=3),0==t.group_id&&(g=4),d="有新消息",t.type!=O.a.MSG_GROUP_TXT&&t.type!=O.a.MSG_GROUP_APPLY_JOIN||(d=t.content),t.type==O.a.MSG_SYSTEM_GG||t.type==O.a.MSG_STATION_LETTER)if(t.content){var n=JSON.parse(t.content);d=n.title+":"+n.announcement}else d="";if(t.type!=O.a.MSG_GROUP_RED&&t.type!=O.a.MSG_RED_LANDMINE&&t.type!=O.a.MSG_RED_COW&&t.type!=O.a.MSG_RED_DRAGON||(d="[有红包]"),t.type==O.a.MSG_GROUP_IMG&&(d="[图片]"),t.type==O.a.MSG_GROUP_CARD&&(d="[名片]"),t.type==O.a.MSG_GROUP_ROB&&(d="[红包被领取]"),t.type==O.a.MSG_GROUP_INGROUP&&(d="[新成员加入]"),t.type==O.a.MSG_GROUP_AUDIO&&(d="[语音消息]"),t.type==O.a.MSG_GROUP_VIDEO&&(d="[视频]"),t.type==O.a.MSG_GROUP_SHARE&&(d="[盈亏]"),t.type==O.a.MSG_GROUP_SIGN&&(d="[签到]"),t.type==O.a.MSG_GROUP_DASHANG&&(d="[打赏]"),t.type==O.a.MSG_GROUP_SHARENOTE&&(d="[注单分享]"),t.type==O.a.MSG_GROUP_PLAN&&(d="[精准计划]"),t.type==O.a.MSG_GROUP_CARD&&(d="[名片]"),-1!=a)K.state.chatListStore.chatlist[a].messages.date=t.create_time,K.state.chatListStore.chatlist[a].messages.unRead=t.total,K.state.chatListStore.chatlist[a].messages.lastMessage=d,K.commit("setChatGoUp",{id:t.group_id,chatType:g});else if(K.state.chatListStore.chatlist.unshift({chatType:g,id:t.group_id,chatCount:t.group_total,user:{name:t.group_name,img:3==g?D.a:4==g?R.a:A.a},messages:{lastMessage:d,date:t.create_time,unRead:t.total}}),1==K.state.chatListStore.chatlist.length){var s={};s[t.group_id]={msgList:[],unReadNum:0,count:0,activeWindowId:t.group_id,activeName:""},K.state.msgListStore.roomMsgMap=h()({},s,K.state.msgListStore.roomMsgMap),K.commit("setActiveWindow",{id:t.group_id,type:g,name:t.group_name,head_portrait:3==g?D.a:4==g?R.a:A.a}),2==g&&K.dispatch("getGlastMessageAction",{send_uid:K.state.chatuserInfoStore.loginData.id,group_id:t.group_id})}},n=!0,s=!1,o=void 0;try{for(var i,r=G()(t.entries());!(n=(i=r.next()).done);n=!0){var g,d,c=i.value,u=k()(c,2);u[0];a(0,u[1])}}catch(e){s=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}},setApplyMessage:function(e,t){t&&"{}"!==y()(t)&&t.forEach(function(e){if(K.state.msgListStore.friendMsgMap[e.send_uid])K.state.chatListStore.chatlist.forEach(function(a){t.find(function(e){return a.id==e.send_uid&&1==a.chatType})&&(a.messages.lastMessage="你们已经成为好友了，快开始聊天吧！",a.messages.date=e.create_time,a.messages.unRead=1)});else if(K.state.chatListStore.chatlist.unshift({chatType:1,id:e.send_uid,chatCount:1,user:{remarks_name:"",name:e.send_nickname,img:e.send_avatar},messages:{lastMessage:"你们已经成为好友了，快开始聊天吧！",date:e.create_time,unRead:1}}),1==K.state.chatListStore.chatlist.length){K.commit("setActiveWindow",{id:e.send_uid,type:1,name:e.send_nickname});var a={};a[e.send_uid]={msgList:[],unReadNum:0,count:0,activeWindowId:e.send_uid,activeName:""},K.state.msgListStore.friendMsgMap=h()({},a,K.state.msgListStore.friendMsgMap);var n={asFrom:e.send_uid,asGroup:1,asTo:e.accept_uid,content:"你们已经成为好友了，快开始聊天吧！",create_time:e.create_time,head_portrait:e.send_avatar,nickname:e.send_nickname,singlemessage:{acceptid:e.accept_uid,comment:"",content:"你们已经成为好友了，快开始聊天吧！",sendid:e.send_uid},read:1,status:"succeed",type:5,unique_value:e.unique_value,userMsg:!1};K.state.msgListStore.friendMsgMap[e.send_uid].msgList.push(n)}})},setTransferDetail:function(e,t){e.transferDetail=t},setMergeNoticeList:function(e,t){var a=t.data.reverse();e.mergeNoticeList.data=a},addMergeNoticeList:function(e,t){var a,n=t.data.reverse();(a=e.mergeNoticeList.data).unshift.apply(a,E()(n))},setIsGoDown:function(e,t){e.isGoDown=t},setRedId:function(e,t){e.red_id=t},setRedPackDetail:function(e,t){e.redPackDetail=t},getRedId:function(e,t){e.dataRedId=t},setOnlineState:function(e,t){e.onlineState=t},setRedSendUidType:function(e,t){e.redSendUid=t.id,e.thisRedType=t.type,e.redUnique_value=t.unique_value||""},setSendRedPackMessage:function(e,t){e.sendRedPackMessage=t},setFirstGrabRedEnvelope:function(e,t){e.firstRedState=t},setDaShangObj:function(e,t){e.daShangObj=t},setRewardUser:function(e,t){e.rewardUserObj=S()({},e.rewardUserObj,t)}},actions:{againSenAllTxt:function(e,t){var a=JSON.parse(y()(t)),n=a,s=a.singlemessage;delete n.content,delete n.asFrom,delete n.asTo,delete n.asGroup,delete n.redState,delete n.audioUnread,delete n.status,delete n.read,delete n.showTime,delete n.userMsg,delete n.gameState;var o=Object(x.c)(n,s,9);M.a.conn.send(o),t.status=null},dashangAction:function(e,t){var a=f.Loading.service({lock:!0,text:"支付中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){r.a.post(window.host+"/Api/Chat/Gratuity",c.a.stringify(t)).then(function(s){if(a.close(),K.getters.getCodeStateZh(s.data.code)){var o={};o.nickname=K.state.chatuserInfoStore.dataGetInfo.nickname,o.amount=t.amount,o.toNickName=t.toNickName;var i={to:K.state.msgListStore.activeWindowId,message:y()(o),type:1==K.state.msgListStore.activeTyep?O.a.MSG_PRIVATE_DASHANG:O.a.MSG_GROUP_DASHANG,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};if(2==K.state.msgListStore.activeTyep){var r={};r.groupName=K.state.friendsListStore.groupChatInfoList.data.group_name,r.count=K.state.friendsListStore.groupChatInfoList.data.count,i.groupinfo=r}e.dispatch("sendMessageIM",i),n()}else Object(f.Message)({message:s.data.message,type:"warning",showClose:!0})}).catch(function(e){})})},chatBetAction:function(e,t){r.a.post(window.host+"/Api/Game/postCode",c.a.stringify(t)).then(function(e){K.getters.getCodeStateZh(e.data.code)?Object(f.Message)({message:e.data.message,type:"success",showClose:!0}):Object(f.Message)({message:e.data.message,type:"warning",showClose:!0})}).catch(function(e){})},rewardUser:function(e,t){return new i.a(function(a,n){r.a.post(window.host+"/Api/Chat/GratuityUser",c.a.stringify(t)).then(function(t){K.getters.getCodeStateZh(t.data.code)?(e.commit("setRewardUser",t.data),a()):Object(f.Message)({message:t.data.message,type:"warning",showClose:!0})}).catch(function(e){})})},shareBillAction:function(e,t){var a={type:t.type};return new i.a(function(t){r.a.post(window.host+"/Api/Order/userProfitCount/",c.a.stringify(a)).then(function(a){if(t(),K.getters.getCodeStateZh(a.data.code)){var n={};n.touzhutotal=a.data.data.touzhutotal||"0",n.fanjiangtotal=a.data.data.fanjiangtotal||"0",n.tzyingkuitotal=a.data.data.tzyingkuitotal||"0",n.type=a.data.data.type||1,n.nickname=K.state.chatuserInfoStore.dataGetInfo.nickname;var s={to:K.state.msgListStore.activeWindowId,message:y()(n),type:1==K.state.msgListStore.activeTyep?O.a.MSG_PRIVATE_SHARE:O.a.MSG_GROUP_SHARE,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};if(2==K.state.msgListStore.activeTyep){var o={};o.groupName=K.state.friendsListStore.groupChatInfoList.data.group_name,o.count=K.state.friendsListStore.groupChatInfoList.data.count,s.groupinfo=o}e.dispatch("sendMessageIM",s)}else Object(f.Message)({message:a.data.message,type:"warning",showClose:!0})})})},signinAction:function(e,t){var a={nickname:K.state.chatuserInfoStore.dataGetInfo.nickname,sharetype:"signin"};return new i.a(function(t){r.a.post(window.host+"/Api/Chat/setSign/",c.a.stringify({username:K.state.chatuserInfoStore.dataGetInfo.username})).then(function(n){if(K.getters.getCodeStateZh(n.data.code)){var s={to:K.state.msgListStore.activeWindowId,message:y()(a),type:1==K.state.msgListStore.activeTyep?O.a.MSG_PRIVATE_SIGN:O.a.MSG_GROUP_SIGN,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};if(2==K.state.msgListStore.activeTyep){var o={};o.groupName=K.state.friendsListStore.groupChatInfoList.data.group_name,o.count=K.state.friendsListStore.groupChatInfoList.data.count,s.groupinfo=o}e.dispatch("sendMessageIM",s),t()}else Object(f.Message)({message:n.data.message,type:"warning",showClose:!0})})})},logout:function(e,t){M.a.conn.isOpened()&&M.a.conn.close("logout")},joinChatRoom:function(e,t){M.a.conn.joinChatRoom({roomId:t.roomId})},getSofflineMessageAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/message/soffline",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;1e4===t.data.code&&(e.commit("setApplyMessage",t.data.data.applyMessage),e.commit("setOfflineMessage",t.data.data.offlineMessage))})},getGroupOfflineMessageAction:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/message/goffline",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;1e4===t.data.code&&e.commit("setGroupOfflineMessage",t.data.data)})},getLastMessageAction:function(e,t){return new i.a(function(a){Object(r.a)({method:"post",url:window.hostIm+"/api/message/last",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;1e4===t.data.code&&(e.commit("setMessageTimes",t.data.data),e.commit("setFriendHistory",t.data.data),a(t.data.data))})})},getGlastMessageAction:function(e,t){new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/message/glast",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;1e4===t.data.code&&(e.commit("setMessageTimes",t.data.data),e.commit("setGroupHistory",t.data.data)),a(t.data)})})},getMergeNoticeAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.host+"/Api/Article/mergeNotice",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeStateZh(t.data.code))return!1;e.commit("setMergeNoticeList",t.data.data),a(t.data)})})},addMergeNoticeAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.host+"/Api/Article/mergeNotice",data:c.a.stringify(t)}).then(function(t){if(a(t.data),0!=t.data.code)return!1;e.commit("addMergeNoticeList",t.data.data)})})},getJudegMessageAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/message/judeg",data:c.a.stringify(t)}).then(function(n){if(!K.getters.getCodeState(n.data.code))return!1;1e4===n.data.code&&(e.commit("setMessageTimes",n.data.data),e.commit("setFriendUpDownHistory",{data:n.data.data,isUpDown:t.isUpDown}),a()),10002===n.data.code&&Object(f.Message)({message:"没有更多聊天记录",type:"warning",showClose:!0})})})},getGjudgeMessageAction:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.hostIm+"/api/message/gjudge",data:c.a.stringify(t)}).then(function(n){if(!K.getters.getCodeState(n.data.code))return!1;1e4===n.data.code&&(e.commit("setMessageTimes",n.data.data),e.commit("setGroupUpDownHistory",{data:n.data.data,isUpDown:t.isUpDown}),a()),10002===n.data.code&&Object(f.Message)({message:"没有更多聊天记录",type:"warning",showClose:!0})})})},getClearMessageAction:function(e,t){return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/clear/message",data:c.a.stringify(t)}).then(function(t){if(!K.getters.getCodeState(t.data.code))return!1;e()})})},sendRedPackActionIm:function(e,t){var a=f.Loading.service({lock:!0,text:"红包发送中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n){Object(r.a)({method:"post",url:window.host+"/Api/wechatGame/sendRedEnvelopes",data:c.a.stringify(t)}).then(function(s){if(a.close(),!K.getters.getCodeStateZh(s.data.code))return Object(f.Message)({message:s.data.message,type:"warning",showClose:!0}),!1;n(s.data);var o=Object(u.c)("loginData"),i="",r={id:s.data.data.redid,repcode:s.data.data.repcode,amount:t.total,topic:t.info,send_name:o.nickname,send_head_portrait:o.head_portrait};2==t.retype&&0==t.type&&(i=O.a.MSG_PRIVATE_RED),1==t.retype&&0==t.type&&(i=O.a.MSG_GROUP_RED),1==t.type&&(r.fval=t.thn,i=O.a.MSG_RED_LANDMINE),2==t.type&&(r.fval=t.jtype,i=O.a.MSG_RED_COW),3==t.type&&(i=O.a.MSG_RED_DRAGON);var g={to:t.jid,message:y()(r),type:i,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};if(1==t.retype){var d={};d.groupName=K.state.friendsListStore.groupChatInfoList.data.group_name,d.count=K.state.friendsListStore.groupChatInfoList.data.count,g.groupinfo=d}e.dispatch("sendMessageIM",g)})})},firstGrabRedEnvelopeAction:function(e,t){var a=f.Loading.service({lock:!0,text:"红包领取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.host+"/Api/wechatGame/firstGrabRedEnvelope",data:c.a.stringify(t)}).then(function(t){if(a.close(),e.commit("setFirstGrabRedEnvelope",t.data),n(t.data),!K.getters.getCodeStateZh(t.data.code))return!1})})},getRedPackAction:function(e,t){var a=f.Loading.service({lock:!0,text:"红包领取中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(n,s){Object(r.a)({method:"post",url:window.host+"/Api/wechatGame/grabRedEnvelope",data:c.a.stringify(t)}).then(function(s){if(a.close(),!K.getters.getCodeStateZh(s.data.code))return Object(f.Message)({message:s.data.message,type:"warning",showClose:!0}),!1;if(e.commit("setRedPackDetail",s.data.data),n(s.data.data),1==t.gtype&&0==s.data.code&&s.data.data.grab.money>0){var o={amount:s.data.data.grab.money};2==K.state.msgListStore.activeTyep&&(o.nickname=K.state.chatuserInfoStore.dataGetInfo.nickname);var i={to:K.state.msgListStore.activeWindowId,message:y()(o),type:2==K.state.msgListStore.activeTyep?O.a.MSG_GROUP_ROB:O.a.MSG_PRIVATE_ROB,reserved:y()({level:K.state.indexStore.userHomeData.data.userlevelid.levelName})};if(2==K.state.msgListStore.activeTyep){var r={};r.groupName=K.state.friendsListStore.groupChatInfoList.data.group_name,r.count=K.state.friendsListStore.groupChatInfoList.data.count,r.findId=e.state.redSendUid,r.findId=e.state.redSendUid+"",i.groupinfo=r}t.qtype&&2==t.qtype||e.dispatch("sendMessageIM",i)}})})},getTransferDetail:function(e,t){return new i.a(function(a,n){Object(r.a)({method:"post",url:window.host+"/Api/Transfer/Detail",data:c.a.stringify(t)}).then(function(t){return!!K.getters.getCodeStateZh(t.data.code)&&(e.commit("setTransferDetail",t.data.data),a(t.data.data),!0)})})},getbRedEnvelopeImList:function(e,t){var a=f.Loading.service({lock:!0,text:"获取列表中...",background:"rgba(0, 0, 0, 0.7)"});return new i.a(function(e,n){Object(r.a)({method:"post",url:window.host+"/Api/wechatGame/redEnvelopeList",data:c.a.stringify(t)}).then(function(t){if(a.close(),!K.getters.getCodeStateZh(t.data.code))return Object(f.Message)({message:t.data.message,type:"warning",showClose:!0}),!1;e(t.data.data)})})},sendMessageIM:function(e,t){var a,n=t.to,s=t.message,o=t.type,i=t.reserved,r=t.groupinfo,g=W(K.state.chatuserInfoStore.loginData.id,n,s,o,i,r),d=g,c=O.a._ifGroup(o)?10:9;a=9==c?g.singlemessage:g.groupmessage;var u=Object(x.c)(d,a,c);M.a.conn.send(u),o!=O.a.MSG_SYS_INDEX&&K.dispatch("addMsgAction",g)},retrySed:function(e,t){var a={};a.uniqueId=t.unique_value,a.from=t.from,a.type=t.type,a.sendTime=t.create_time,a.avatar=t.head_portrait,a.nickname=t.nickname,a.singleMessage=t.singlemessage,a.singleMessage.sendId=t.singlemessage.sendid||"",a.singleMessage.acceptId=t.singlemessage.acceptid||"",delete t.singlemessage.sendid,delete t.singlemessage.acceptid;var n={message:a=y()(a)};if(-1!=[5,6,7,15,13,14,25,47,46,40].indexOf(1*t.type))return new i.a(function(e,a){Object(r.a)({method:"post",url:window.hostIm+"/api/push/retry",data:c.a.stringify(n)}).then(function(e){if(!K.getters.getCodeState(e.data.code))return!1;t.status="succeed"})})}}},J=(a("B0xE"),{state:{activeWindowId:999999999,activeTyep:"1",activeName:"",activeNum:"",head_portrait:"",friendMsgMap:{id:{msgList:[],unReadNum:0,count:0,activeWindowId:"",activeName:""}},roomMsgMap:{id:{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""}},sysMsgMap:{id:{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""}},findMeMap:{id:{list:[],state:!1}},didiMp3State:!1,redPackMp3State:!1,questSoundMp3State:!1,isFirstLogin:!1},mutations:{setBullDataIm:function(e,t){var a=Object(u.c)("niuDetail");if(a)if(a[t.code])a[t.code]=t.detail,Object(u.j)("niuDetail",a);else{var n={};n[t.code]=t.detail,a=h()({},n,a),Object(u.j)("niuDetail",a)}else{var s={};s[t.code]=t.detail,Object(u.j)("niuDetail",s)}},setRedHuiIm:function(e,t){var a=Object(u.c)("redHui");if(a){a.some(function(e){return e==t.code})||(a.push(t.code),a.length>100&&a.splice(0,1),Object(u.j)("redHui",a))}else{var n=[];n.push(t.code),Object(u.j)("redHui",n)}},setChatGameState:function(e,t){var a;1==t.chatType&&(a=e.friendMsgMap[e.activeWindowId].msgList),2==t.chatType&&(a=e.roomMsgMap[e.activeWindowId].msgList),a.forEach(function(n,s){if(1==t.type&&n.unique_value==K.state.wechatIMstore.redUnique_value)if(2==t.data.base.type){var o=n;o.niu_detail?delete o.niu_detail:o.niu_detail=t.data,e.roomMsgMap[e.activeWindowId].msgList[s]=h()({},o,e.roomMsgMap[e.activeWindowId].msgList[s])}else{var i=n;0==i.redState?delete i.redState:i.redState=!0,e.roomMsgMap[e.activeWindowId].msgList[s]=h()({},i,e.roomMsgMap[e.activeWindowId].msgList[s])}if(2==t.type&&n.unique_value==t.data){0==n.audioUnread&&delete n.audioUnread;var r={audioUnread:!0};a[s]=h()({},r,a[s])}})},setIsFirstLogin:function(e,t){e.isFirstLogin=t},createFriendChatMessage:function(e,t){if(!e.friendMsgMap[t.id]){var a={};a[t.id]={msgList:[],unReadNum:0,count:0,activeWindowId:t.id,activeName:""},e.friendMsgMap=h()({},a,e.friendMsgMap)}},createGroupChatMessage:function(e,t){if(!e.roomMsgMap[t.id]){var a={};a[t.id]={msgList:[],unReadNum:0,count:0,activeWindowId:t.id,activeName:""},e.roomMsgMap=h()({},a,e.roomMsgMap)}},newBuildFriendChatBox:function(e,t){K.state.chatListStore.chatlist.findIndex(function(e){return t.singlemessage.sendid==e.id&&1==e.chatType});if(e.friendMsgMap[t.singlemessage.sendid])e.friendMsgMap[t.singlemessage.sendid].msgList.push(t),K.state.chatListStore.chatlist.forEach(function(e){t.singlemessage.sendid==e.id&&1==e.chatType&&(e.messages.lastMessage=t.singlemessage.content,e.messages.date=t.create_time,e.messages.unRead=1)}),K.commit("setActiveWindow",{id:t.singlemessage.sendid,type:1,name:t.nickname}),K.commit("setChatGoUp",{id:t.singlemessage.sendid,chatType:1});else{K.state.chatListStore.chatlist.unshift({chatType:1,id:t.singlemessage.sendid,chatCount:1,user:{remarks_name:"",name:t.nickname,img:t.head_portrait},messages:{lastMessage:t.singlemessage.content,date:t.create_time,unRead:1}}),K.commit("setActiveWindow",{id:t.singlemessage.sendid,type:1,name:t.nickname});var a={};a[t.singlemessage.sendid]={msgList:[],unReadNum:0,count:0,activeWindowId:t.singlemessage.sendid,activeName:""},e.friendMsgMap=h()({},a,e.friendMsgMap),e.friendMsgMap[t.singlemessage.sendid].msgList.push(t)}},setAllMp3State:function(e,t){e.didiMp3State=!1,e.redPackMp3State=!1,e.questSoundMp3State=!1},setQuestSound:function(e,t){e.questSoundMp3State=!1,setTimeout(function(){e.questSoundMp3State=!0},1e3)},setDiDiAudio:function(e,t){e.didiMp3State=!1,setTimeout(function(){e.didiMp3State=!0},1e3)},setRedPackMp3State:function(e,t){e.redPackMp3State=!1,setTimeout(function(){e.redPackMp3State=!0},1e3)},setCloseFindMeModal:function(e,t){e.findMeMap[e.activeWindowId].state=!1},setFindMeList:function(e,t){var a=t.groupmessage.groupid;if(e.findMeMap[a])e.findMeMap[a].list.splice(0,1,t);else{var n={};n[a]={list:[],state:!1},e.findMeMap=h()({},n,e.findMeMap),e.findMeMap[a].list.push(t)}setTimeout(function(){K.commit("upGroupOtherChatUserList",t)},300),e.findMeMap[a].state=!0},setGroupOfflineList:function(e,t){var a=t.id;if(e.findMeMap[a])e.findMeMap[a].list.splice(0,1,t);else{var n={};n[a]={list:[],state:!1},e.findMeMap=h()({},n,e.findMeMap),e.findMeMap[a].list.push(t)}e.findMeMap[a].state=!0},setFriendHistory:function(e,t){var a=t.reverse().filter(function(e){return 1==e.is_recall}),n={};n[e.activeWindowId]={msgList:[],unReadNum:0,count:0,activeWindowId:e.activeWindowId,activeName:""},e.friendMsgMap=h()({},n,e.friendMsgMap),e.friendMsgMap[e.activeWindowId].msgList=a,a.length>0&&K.commit("setOfflineLastMessage",a[a.length-1])},setOfflineLastMessage:function(e,t){var a=t.username?t.username+":":"";K.state.chatListStore.chatlist.forEach(function(n){n.id==e.activeWindowId&&n.chatType==e.activeTyep&&(n.messages.unRead=0,n.messages.date=t.create_time,t.type!=O.a.MSG_PRIVATE_TXT&&t.type!=O.a.MSG_GROUP_TXT||(n.messages.lastMessage=a+t.content),t.type!=O.a.MSG_GROUP_RED&&t.type!=O.a.MSG_PRIVATE_RED&&t.type!=O.a.MSG_RED_LANDMINE&&t.type!=O.a.MSG_RED_COW&&t.type!=O.a.MSG_RED_DRAGON||(n.messages.lastMessage=a+"[有红包]"),t.type==O.a.MSG_MONEY_TRANSFER&&(n.messages.lastMessage=a+"[转账]"),t.type!=O.a.MSG_PRIVATE_IMG&&t.type!=O.a.MSG_GROUP_IMG||(n.messages.lastMessage=a+"[图片]"),t.type!=O.a.MSG_GROUP_CARD&&t.type!=O.a.MSG_PRIVATE_CARD||(n.messages.lastMessage=a+"[名片]"),t.type!=O.a.MSG_PRIVATE_ROB&&t.type!=O.a.MSG_GROUP_ROB||(n.messages.lastMessage=a+"[红包被领取]"),t.type!=O.a.MSG_PRIVATE_AUDIO&&t.type!=O.a.MSG_GROUP_AUDIO||(n.messages.lastMessage=a+"[语音消息]"),t.type!=O.a.MSG_GROUP_VIDEO&&t.type!=O.a.MSG_PRIVATE_VIDEO||(n.messages.lastMessage=a+"[视频]"),t.type!=O.a.MSG_PRIVATE_SHARE&&t.type!=O.a.MSG_GROUP_SHARE||(n.messages.lastMessage=a+"[盈亏]"),t.type!=O.a.MSG_PRIVATE_SIGN&&t.type!=O.a.MSG_GROUP_SIGN||(n.messages.lastMessage=a+"[签到]"),t.type!=O.a.MSG_PRIVATE_DASHANG&&t.type!=O.a.MSG_GROUP_DASHANG||(n.messages.lastMessage=a+"[打赏]"),t.type!=O.a.MSG_PRIVATE_SHARENOTE&&t.type!=O.a.MSG_GROUP_SHARENOTE||(n.messages.lastMessage=a+"[注单分享]"),t.type==O.a.MSG_GROUP_PLAN&&(n.messages.lastMessage=a+"[进准计划]"),t.type==O.a.MSG_GROUP_INGROUP&&(n.messages.lastMessage=t.content))})},setGroupHistory:function(e,t){var a=t.reverse().filter(function(e){return 1==e.is_recall&&e.clear_time<e.create_time}),n={};n[e.activeWindowId]={msgList:[],unReadNum:0,count:0,activeWindowId:e.activeWindowId,activeName:""},e.roomMsgMap=h()({},n,e.roomMsgMap),e.roomMsgMap[e.activeWindowId].msgList=a,a.length>0&&K.commit("setOfflineLastMessage",a[a.length-1])},setFriendUpDownHistory:function(e,t){if(1==t.isUpDown){var a,n=t.reverse().filter(function(e){return 1==e.is_recall});(a=e.friendMsgMap[e.activeWindowId].msgList).push.apply(a,E()(n)),n.length>0&&K.commit("setOfflineLastMessage",n[n.length-1])}if(2==t.isUpDown){var s,o=t.data.filter(function(e){return 1==e.is_recall});(s=e.friendMsgMap[e.activeWindowId].msgList).unshift.apply(s,E()(o))}},setGroupUpDownHistory:function(e,t){if(1==t.isUpDown){var a,n=t.data.filter(function(e){return 1==e.is_recall&&e.clear_time<e.create_time});(a=e.roomMsgMap[e.activeWindowId].msgList).push.apply(a,E()(n)),n.length>0&&K.commit("setOfflineLastMessage",n[n.length-1])}if(2==t.isUpDown){var s,o=t.data.reverse().filter(function(e){return 1==e.is_recall&&e.clear_time<e.create_time});(s=e.roomMsgMap[e.activeWindowId].msgList).unshift.apply(s,E()(o))}},initChatInfo:function(e,t){var a={id:{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""}};e.friendMsgMap=a,e.roomMsgMap=a,e.sysMsgMap=a,K.state.chatListStore.chatlist=[],K.state.friendsListStore.goodFriendList=[],K.state.friendsListStore.kefuList=[],K.state.friendsListStore.newAddFriendHistory=[],K.state.chatListStore.ChatRightFriendBoxState=!1,K.state.chatListStore.ChatRightBoxState=!1},clearMessageBack:function(e,t){1==t.type?e.friendMsgMap[t.id].msgList.forEach(function(a,n){a.unique_value==t.unique_value&&e.friendMsgMap[t.id].msgList.splice(n,1)}):e.roomMsgMap[t.id].msgList.forEach(function(a,n){a.unique_value==t.unique_value&&e.roomMsgMap[t.id].msgList.splice(n,1)})},deleteMessageMap:function(e,t){1==t.chatType?delete e.friendMsgMap[t.id]:delete e.roomMsgMap[t.id]},clearChatHisTory:function(e,t){1==t.chatType?e.friendMsgMap[t.id].msgList=[]:e.roomMsgMap[t.id].msgList=[],K.state.chatListStore.chatlist.forEach(function(e){e.id==t.id&&e.chatType==t.chatType&&(e.messages.lastMessage="暂无消息记录")})},setActiveWindow:function(e,t){n.default.set(e,"activeWindowId",t.id||-1),n.default.set(e,"activeTyep",t.type||-1),n.default.set(e,"activeName",t.name||-1),n.default.set(e,"activeNum",t.num||-1),n.default.set(e,"activePortrait",t.head_portrait||-1),e.activeTyep==O.a.MSG_GROUP&&(e.roomMsgMap[e.activeWindowId]=e.roomMsgMap[e.activeWindowId]||{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""},e.roomMsgMap[e.activeWindowId].msgList.forEach(function(e,t,a){e.read=O.a.MSG_READ})),e.activeTyep==O.a.MSG_PRIVATE&&(e.friendMsgMap[e.activeWindowId]=e.friendMsgMap[e.activeWindowId]||{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""},e.friendMsgMap[e.activeWindowId].msgList.forEach(function(e,t,a){e.read=O.a.MSG_READ})),e.activeTyep==O.a.MSG_SYS&&(e.sysMsgMap[e.activeWindowId]=e.sysMsgMap[e.activeWindowId]||{msgList:[],unReadNum:0,count:0,activeWindowId:"id",activeName:""},e.sysMsgMap[e.activeWindowId].count=0,e.sysMsgMap[e.activeWindowId].unReadNum=0,e.sysMsgMap[e.activeWindowId].msgList.forEach(function(e,t,a){e.read=O.a.MSG_READ}))},updateFriendMsg:function(e,t){var a=t.id;delete t.id,e.friendMsgMap[a]=t.body},updatePrivateChat:function(e,t){var a=t.asTo,n=t.asFrom,s=t.unique_value;t.type,t.singlemessage;if(a==K.state.chatuserInfoStore.loginData.id&&(a=n),!K.state.chatListStore.chatlist.some(function(e){return a==e.id&&1==e.chatType})){var o,i="",r="";t.singlemessage.sendid==K.state.chatuserInfoStore.loginData.id?(i=(o=K.state.friendsListStore.allFriendList.find(function(e){return e.id==t.singlemessage.acceptid}))&&o.remarks_name||e.activeName,r=o&&o.head_portrait||e.activePortrait):(i=(o=K.state.friendsListStore.allFriendList.find(function(e){return e.id==t.singlemessage.sendid}))&&o.remarks_name||t.nickname,r=o&&o.head_portrait||t.head_portrait);var g={id:a,name:t.nickname,count:1,head_portrait:r||t.head_portrait,remarks_name:i};K.commit("sendNewChat",{message:g,lastMessage:t.singlemessage.content,type:1,state:!1})}if(e.friendMsgMap[a]){var d=e.friendMsgMap[a].msgList;console.log("进入了11",d);var c=!0,u=0;d.forEach(function(e,a,n){e.unique_value==s&&(c=!1,d.splice(a,1,t),d.length>1&&d[d.length-1].create_time-d[d.length-2].create_time<60&&(d[d.length-1].showTime=!0)),e.read==O.a.MSG_UNREAD&&u++}),c&&(d.push(t),t.read==O.a.MSG_UNREAD&&u++,t.userMsg||d.length>1&&d[d.length-1].create_time-d[d.length-2].create_time<60&&(d[d.length-1].showTime=!0),d.length>60&&d.splice(0,1)),e.friendMsgMap[a].unReadNum=u,e.friendMsgMap[a].count=e.friendMsgMap[a].msgList.length;var f=0;t.asFrom==K.state.chatuserInfoStore.loginData.id&&(f=t.asTo),t.asTo==K.state.chatuserInfoStore.loginData.id&&(f=t.asFrom),console.log("state.friendMsgMap[asTo]",e.friendMsgMap[a]),console.log("插入信息",d),K.commit("updateChatUserList",{lastMessage:d[d.length-1],unRead:u,date:t.create_time,chatType:t.asGroup,id:f})}else{console.log("进入了");var p={};if(p[a]={msgList:[],unReadNum:0,count:0,activeWindowId:a,activeName:""},e.friendMsgMap=h()({},p,e.friendMsgMap),!t.first){e.friendMsgMap[a].msgList.push(t);f=0;t.asFrom==K.state.chatuserInfoStore.loginData.id&&(f=t.asTo),t.asTo==K.state.chatuserInfoStore.loginData.id&&(f=t.asFrom);d=e.friendMsgMap[a].msgList,u=e.friendMsgMap[a].unReadNum;K.commit("updateChatUserList",{lastMessage:d[d.length-1],unRead:1,date:t.create_time,chatType:t.asGroup,id:f})}}console.log("dd",e.friendMsgMap),K.commit("setChatGoUp",{id:a,chatType:1})},updateGroupChat:function(e,t){var a=t.asTo,n=t.unique_value;t.type,t.groupmessage;if(!K.state.chatListStore.chatlist.some(function(e){return a==e.id&&2==e.chatType})){var s={id:a,name:t.groupmessage.groupName||"群组",count:t.groupmessage.groupPeoples,head_portrait:t.head_portrait,remarks_name:""};K.commit("sendNewChat",{message:s,lastMessage:t.groupmessage.content,type:2,state:!1})}if(e.roomMsgMap[a]){var o=!0,i=0;(g=e.roomMsgMap[a].msgList).forEach(function(e,a,s){e.unique_value==n&&(o=!1,g.splice(a,1,t),g.length>1&&g[g.length-1].create_time-g[g.length-2].create_time<60&&(g[g.length-1].showTime=!0)),e.read==O.a.MSG_UNREAD&&i++}),o&&(g.push(t),t.read==O.a.MSG_UNREAD&&i++,t.userMsg||g.length>1&&g[g.length-1].create_time-g[g.length-2].create_time<60&&(g[g.length-1].showTime=!0),g.length>60&&g.splice(0,1)),e.roomMsgMap[a].unReadNum=i,e.roomMsgMap[a].count=e.roomMsgMap[a].msgList.length,K.commit("updateChatUserList",{lastMessage:g[g.length-1],unRead:i,date:t.create_time,chatType:t.asGroup,id:a})}else{var r={};if(r[a]={msgList:[],unReadNum:0,count:0,activeWindowId:a,activeName:""},e.roomMsgMap=h()({},r,e.roomMsgMap),!t.first){e.roomMsgMap[a].msgList.push(t);var g=e.roomMsgMap[a].msgList;i=e.roomMsgMap[a].unReadNum;K.commit("updateChatUserList",{lastMessage:g[g.length-1],unRead:1,date:t.create_time,chatType:t.asGroup,id:a})}}K.commit("setChatGoUp",{id:a,chatType:2})},updateSysChat:function(e,t){var a=t.asTo,n=t.unique_value,s=(t.type,t.groupmessage,K.state.chatListStore.chatlist.some(function(e){return a==e.id&&3==e.chatType})),o=JSON.parse(t.content);if(!s){var i={id:a,name:"系统消息",count:0,head_portrait:"",remarks_name:""};K.commit("sendNewChat",{message:i,lastMessage:o,type:3,state:!1})}if(e.sysMsgMap[a]){var r=e.sysMsgMap[a].msgList,g=!0,d=0;r.forEach(function(e,a,s){e.unique_value==n&&(g=!1,r.splice(a,1,t)),2==t.read&&d++}),g&&(r.push(t),2==t.read&&d++),e.sysMsgMap[a].unReadNum=d,e.sysMsgMap[a].count=e.sysMsgMap[a].msgList.length,K.commit("upSystemChatUserList",{lastMessage:o,type:t.type,unRead:d,date:t.create_time,chatType:t.asGroup,id:a})}else{var c={};if(c[a]={msgList:[],unReadNum:0,count:0,activeWindowId:a,activeName:""},e.sysMsgMap=h()({},c,e.sysMsgMap),!t.first){e.sysMsgMap[a].msgList.push(t);d=e.sysMsgMap[a].unReadNum;K.commit("upSystemChatUserList",{lastMessage:o,unRead:d,date:t.create_time,chatType:t.asGroup,id:a})}}K.commit("setChatGoUp",{id:a,chatType:3})}},getters:{getChatList:function(e){switch(1*e.activeTyep){case O.a.MSG_GROUP:return e.roomMsgMap[e.activeWindowId]&&e.roomMsgMap[e.activeWindowId].msgList||[];case O.a.MSG_PRIVATE:return e.friendMsgMap[e.activeWindowId]&&e.friendMsgMap[e.activeWindowId].msgList||[];case O.a.MSG_SYS:return e.sysMsgMap[e.activeWindowId]&&e.sysMsgMap[e.activeWindowId].msgList||[]}},getFindMeMsg:function(e){return e.findMeMap[e.activeWindowId]&&e.findMeMap[e.activeWindowId].list||[]},getFindMeState:function(e){return e.findMeMap[e.activeWindowId].state}},actions:{findMeListAction:function(e,t){return(0,e.commit)("setFindMeList",t)},messageCallBack:function(e,t){return(0,e.commit)("clearMessageBack",t)},addMsgAction:function(e,t){var a=t.code,n=t.type,s=t.groupmessage,o=t.singlemessage;return O.a._ifSys(n)&&(t.content=s.content,t.asFrom=s.sendid,t.asTo=s.groupid,t.asGroup=O.a.MSG_SYS),O.a._ifGroup(n)&&(t.content=s.content,t.asFrom=s.sendid,t.asTo=s.groupid,t.asGroup=O.a.MSG_GROUP),O.a._ifPrivate(n)&&(t.content=o.content,t.asFrom=o.sendid,t.asTo=o.acceptid,t.asGroup=O.a.MSG_PRIVATE),t.redState=!1,a==O.a.MSG_MY_SED&&(t.status=O.a.MSG_STATUS_SED),a==O.a.MSG_SUCCEED&&(t.status=O.a.MSG_STATUS_SUCCEED),a==O.a.MSG_ERROR&&(t.status=O.a.MSG_STATUS_ERROR),t.read=O.a.MSG_UNREAD,t.showTime=!1,(t.asGroup==e.state.activeTyep&&t.asTo==e.state.activeWindowId||1==t.asGroup&&t.asFrom==e.state.activeWindowId)&&(t.read=O.a.MSG_READ),t.asFrom==K.state.chatuserInfoStore.loginData.id&&(t.read=O.a.MSG_READ,t.userMsg=!0),a==O.a.MSG_MY_SED&&(t.read=O.a.MSG_READ,t.userMsg=!0),a==O.a.MSG_ACTIVE&&O.a._ifPrivate(n)?(t.first=!0,void e.commit("updatePrivateChat",t)):a==O.a.MSG_ACTIVE&&O.a._ifGroup(n)?(t.first=!0,void e.commit("updateGroupChat",t)):(t.asGroup==O.a.MSG_PRIVATE&&e.commit("updatePrivateChat",t),t.asGroup==O.a.MSG_GROUP&&e.commit("updateGroupChat",t),t.asGroup==O.a.MSG_SYS&&e.commit("updateSysChat",t),void(a!=O.a.MSG_MY_SED&&a!=O.a.MSG_ERROR&&O.a.MSG_ACTIVE))},getPrivateHis:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/message/goffline",data:c.a.stringify(t)}).then(function(e){if(!K.getters.getCodeState(e.data.code))return!1})},getGroupHis:function(e,t){Object(r.a)({method:"post",url:window.hostIm+"/api/message/goffline",data:c.a.stringify(t)}).then(function(e){if(!K.getters.getCodeState(e.data.code))return!1})}}});n.default.use(s.a);var K=t.a=new s.a.Store({modules:{chatuserInfoStore:_,wechatIMstore:V,constantStore:{state:{10000:"10000",10002:"10002"},mutations:{},actions:{},getters:{getCodeState:function(e){return function(t){return t==e[10002]||t==e[1e4]}}}},webIMconstant_store:{state:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",20:"20"},mutations:{},actions:{},getters:{getWebImState:function(e){return function(t){return t!=e[7]||t==e[20]}},getGeneralState:function(e){return function(t){return t==e[3]||t==e[8]||t==e[9]||t==e[10]||t==e[11]}}}},chatListStore:L,friendsListStore:T,friendCircleStore:H,msgListStore:J,constantStoreZh:{state:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16",17:"17",18:"18",19:"19",20:"20",21:"21",22:"22",23:"23",24:"24",25:"25",26:"26",27:"27",28:"28",29:"29",30:"30",31:"31",41:"41",42:"42",43:"43",44:"44",45:"45",46:"46",47:"47",50:"50",51:"51",52:"52",53:"53",54:"54",55:"55",56:"56",57:"57",58:"58",59:"59",60:"60",61:"61",62:"62",63:"63",64:"64",65:"65",66:"66",67:"67",68:"68",69:"69",70:"70",71:"71",72:"72",73:"73",74:"74",75:"75",76:"76",77:"77",78:"78",79:"79",80:"80",81:"81",82:"82",83:"83",84:"84",85:"85",86:"86",87:"87",88:"88",89:"89",90:"90",91:"91",92:"92",93:"93",94:"94",95:"95",96:"96",97:"97",98:"98",99:"99",100:"100",101:"101",102:"102",103:"103",104:"104",105:"105",106:"106",107:"107",108:"108",109:"109",110:"110",111:"111",112:"112",113:"113",114:"114",115:"115",116:"116",117:"117",5000:"5000",8888:"8888",9999:"9999",10000:"10000"},mutations:{},actions:{},getters:{getCodeStateZh:function(e){return function(t){return t==e[0]||t==e[8888]}}}},indexStore:p},plugins:[Object(P.a)({storage:window.sessionStorage})]})},JMP6:function(e,t,a){e.exports=a.p+"pcImstatic/media/redPack.72afe81.mp3"},JMoe:function(e,t,a){e.exports=a.p+"pcImstatic/img/red_envelopes_icon.9a1d992.png"},N7RA:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i});var n={_t:"q",_d:"t",_n:"u",_p:"t"},s={_t:"c",_d:"a",_n:"9",_p:"5"};function o(){return n._t+n._d+n._n+n._p}function i(){return s._t+s._d+s._n+s._p}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("hKoQ"),s=a.n(n),o=a("7+uW"),i=a("ZK9U"),r=a.n(i),g=a("zL8q"),d=a.n(g),c=(a("tvR6"),a("iqGf")),u=a.n(c),f=a("NYxO");a("eOoE");o.default.component("wx-photo",function(e){return a.e(47).then(function(){var t=[a("03AX")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-video",function(e){return a.e(15).then(function(){var t=[a("klCD")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-send-redpack",function(e){return a.e(42).then(function(){var t=[a("2ZVr")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-send-bullpack",function(e){return a.e(74).then(function(){var t=[a("p22i")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-send-sweeppack",function(e){return a.e(34).then(function(){var t=[a("QMgU")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-send-dragonpack",function(e){return a.e(73).then(function(){var t=[a("fqDk")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-editorUserInfo",function(e){return a.e(32).then(function(){var t=[a("bLAV")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-resetPassword",function(e){return a.e(55).then(function(){var t=[a("1Ju8")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-setPayPassword",function(e){return a.e(69).then(function(){var t=[a("xDfW")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-newBuildGroup",function(e){return Promise.all([a.e(0),a.e(71)]).then(function(){var t=[a("sQ5k")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-addNewFriend",function(e){return Promise.all([a.e(0),a.e(35)]).then(function(){var t=[a("sH52")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-redYiqiang",function(e){return Promise.all([a.e(0),a.e(31)]).then(function(){var t=[a("tNQY")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-haveRedPack",function(e){return Promise.all([a.e(0),a.e(13)]).then(function(){var t=[a("a4XQ")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-notRedPack",function(e){return Promise.all([a.e(0),a.e(19)]).then(function(){var t=[a("BxM5")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-userDetail",function(e){return Promise.all([a.e(0),a.e(59)]).then(function(){var t=[a("IuDE")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-groupUserDetail",function(e){return Promise.all([a.e(0),a.e(21)]).then(function(){var t=[a("dnMz")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-red-open",function(e){return a.e(3).then(function(){var t=[a("Mk8a")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-red-detail",function(e){return a.e(2).then(function(){var t=[a("G9kE")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-transfer-detail",function(e){return Promise.all([a.e(0),a.e(66)]).then(function(){var t=[a("dgGp")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-wanfa-detail",function(e){return a.e(40).then(function(){var t=[a("8/zk")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-again-connect",function(e){return a.e(26).then(function(){var t=[a("qtHO")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-transpond",function(e){return Promise.all([a.e(0),a.e(64)]).then(function(){var t=[a("YaoC")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-shareCard",function(e){return Promise.all([a.e(0),a.e(62)]).then(function(){var t=[a("9m45")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-config",function(e){return a.e(37).then(function(){var t=[a("Tu3M")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("groupIncome",function(e){return Promise.all([a.e(0),a.e(18)]).then(function(){var t=[a("m0oe")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("enableSendMsgList",function(e){return Promise.all([a.e(0),a.e(53)]).then(function(){var t=[a("Phpp")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("searchRecord",function(e){return Promise.all([a.e(0),a.e(24)]).then(function(){var t=[a("/qwH")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("groupManageSet",function(e){return Promise.all([a.e(0),a.e(7)]).then(function(){var t=[a("vfyj")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("groupAssistant",function(e){return Promise.all([a.e(0),a.e(52)]).then(function(){var t=[a("zXvg")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("orderFollow",function(e){return Promise.all([a.e(0),a.e(56)]).then(function(){var t=[a("C8jB")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("planFollow",function(e){return Promise.all([a.e(0),a.e(44)]).then(function(){var t=[a("VPjc")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("moneyReward",function(e){return Promise.all([a.e(0),a.e(38)]).then(function(){var t=[a("VknR")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("groupQrcode",function(e){return Promise.all([a.e(0),a.e(16)]).then(function(){var t=[a("J03T")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-leftNav",function(e){return Promise.all([a.e(0),a.e(20)]).then(function(){var t=[a("F8Q/")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-search",function(e){return Promise.all([a.e(0),a.e(8)]).then(function(){var t=[a("lgc/")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-userChatList",function(e){return a.e(11).then(function(){var t=[a("j/IY")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-share-record",function(e){return a.e(70).then(function(){var t=[a("y787")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-da-shang",function(e){return a.e(65).then(function(){var t=[a("WqM+")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-share-order",function(e){return a.e(39).then(function(){var t=[a("KPEs")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-sharePlan",function(e){return a.e(50).then(function(){var t=[a("vwM8")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-sign",function(e){return a.e(17).then(function(){var t=[a("asdv")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-text",function(e){return a.e(33).then(function(){var t=[a("iVDO")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-images",function(e){return a.e(57).then(function(){var t=[a("mPzE")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-video",function(e){return a.e(14).then(function(){var t=[a("RTuz")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-audio",function(e){return a.e(6).then(function(){var t=[a("fFdj")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-redpack",function(e){return a.e(68).then(function(){var t=[a("KN5K")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-transfer",function(e){return a.e(27).then(function(){var t=[a("rVxX")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-bullpack",function(e){return a.e(5).then(function(){var t=[a("wRdy")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-sweeppack",function(e){return a.e(29).then(function(){var t=[a("gLgV")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chat-dragonpack",function(e){return a.e(22).then(function(){var t=[a("GA0O")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-redpack-message",function(e){return a.e(36).then(function(){var t=[a("teaI")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-message-back",function(e){return a.e(51).then(function(){var t=[a("LZay")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-user-card",function(e){return a.e(49).then(function(){var t=[a("vbEW")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("system-gongGao",function(e){return a.e(12).then(function(){var t=[a("62NF")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-newUserInto",function(e){return a.e(28).then(function(){var t=[a("gws3")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-remind-you",function(e){return a.e(46).then(function(){var t=[a("Rqt7")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-chatMessage",function(e){return a.e(10).then(function(){var t=[a("xMYe")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-send-text",function(e){return a.e(4).then(function(){var t=[a("Rxkh")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-my-friends",function(e){return Promise.all([a.e(0),a.e(9)]).then(function(){var t=[a("EQnt")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-userinfo",function(e){return Promise.all([a.e(0),a.e(58)]).then(function(){var t=[a("kuSn")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-groupChat",function(e){return Promise.all([a.e(0),a.e(41)]).then(function(){var t=[a("4A9S")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-friend-circle",function(e){return a.e(43).then(function(){var t=[a("0QHr")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-allFriendCircle",function(e){return Promise.all([a.e(0),a.e(23)]).then(function(){var t=[a("2+o2")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-blockList",function(e){return a.e(48).then(function(){var t=[a("Bxx8")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-sendFriendCircle",function(e){return a.e(54).then(function(){var t=[a("14/o")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-childFrinedCircle",function(e){return Promise.all([a.e(0),a.e(30)]).then(function(){var t=[a("3osg")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-accountchange",function(e){return a.e(63).then(function(){var t=[a("FF02")];e.apply(null,t)}.bind(this)).catch(a.oe)}),o.default.component("wx-level",function(e){return a.e(60).then(function(){var t=[a("etzS")];e.apply(null,t)}.bind(this)).catch(a.oe)});var p=a("Dd8w"),l=a.n(p),h=a("F+jZ"),m={name:"App",data:function(){return{}},created:function(){},methods:l()({},Object(f.d)([])),computed:{},watch:{},beforeDestroy:function(){}},S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var M=a("VU/8")(m,S,!1,function(e){a("UfyY")},null,null).exports,_=a("YaEn"),C=a("IcnI"),y=(a("AMYy"),a("1g2b"),a("AXdl"));a("VGuj");s.a.polyfill(),a("g3Gj"),a("5LIk"),window.hostIm=window.hostIm||"",window.Strophe=r.a.Strophe,window.Strophe.Connection.prototype.setJid=function(e){this.jid=e,this.authzid=Strophe.getBareJidFromJid(this.jid),this.authcid=Strophe.getNodeFromJid(this.jid)},window.Strophe.Connection.prototype.getJid=function(){return this.jid},o.default.use(d.a),o.default.use(u.a),o.default.use(f.a),o.default.use(y.a,{preLoad:1.1,error:"./assets/error.png",loading:"./assets/loading.png"}),o.default.config.productionTip=!1,o.default.prototype.$getTimes=h.d,window.App=new o.default({el:"#app",router:_.a,store:C.a,components:{App:M},template:"<App/>",computed:{},created:function(){window.diyRouter=this.$router},data:{config:{host:window.hostIm||""}}}),_.a.beforeEach(function(e,t,a){a()}),document.body.onclick=function(){var e=document.getElementsByClassName("el-loading-mask");e[0]&&document.body.removeChild(e[0])}},PD85:function(e,t,a){e.exports=a.p+"pcImstatic/img/not_sound_icon.9339c7d.png"},SQjO:function(e,t,a){"use strict";t.a={name:"Web_IM_DGG",logo:"",MSG_STATUS_SED:"sending",MSG_STATUS_SUCCEED:"succeed",MSG_STATUS_ERROR:"error",MSG_USER:1,MSG_READ:1,MSG_UNREAD:2,MSG_PRIVATE:1,MSG_GROUP:2,MSG_SYS:3,MSG_SUCCEED:4,MSG_ERROR:3,MSG_MY_SED:10,MSG_ACTIVE:100,MSG_PRIVATE_TXT:5,MSG_PRIVATE_IMG:6,MSG_PRIVATE_RED:7,MSG_PRIVATE_HINT:12,MSG_PRIVATE_ROB:17,MSG_PRIVATE_CARD:25,MSG_PRIVATE_APPLYFRIEND:13,MSG_PRIVATE_AGREEADDFRIEND:14,MSG_PRIVATE_RECALL:15,MSG_PRIVATE_GROUPRECALL:16,MSG_GROUP_TXT:8,MSG_GROUP_IMG:9,MSG_GROUP_RED:10,MSG_GROUP_AT:11,MSG_GROUP_INGROUP:18,MSG_GROUP_ROB:23,MSG_GROUP_CARD:24,MSG_GROUP_RECALL:16,MSG_GROUP_NOTICE:31,MSG_GROUP_REMOVEPERSON:32,MSG_SYS_SACK:21,MSG_SYS_GACK:22,MSG_SYS_THUMBS:19,MSG_SYS_COMMENT:20,MSG_SYS_INDEX:100,PAGE_NUM:20,MSG_RED_LANDMINE:30,MSG_RED_DRAGON:39,MSG_RED_COW:29,MSG_IMG_NICKNAME:26,MSG_GROUP_ADD_FRIEND:35,MSG_GROUP_SPEAK:34,MSG_GROUP_VIDEO:44,MSG_GROUP_AUDIO:45,MSG_PRIVATE_VIDEO:46,MSG_PRIVATE_AUDIO:47,MSG_MONEY_TRANSFER:40,MSG_SYSTEM_GG:41,MSG_STATION_LETTER:42,MSG_GROUP_AT_ALL:33,MSG_PRIVATE_SHARE:54,MSG_PRIVATE_SIGN:50,MSG_PRIVATE_DASHANG:52,MSG_PRIVATE_SHARENOTE:48,MSG_GROUP_SHARE:55,MSG_GROUP_SIGN:51,MSG_GROUP_SHARENOTE:49,MSG_GROUP_DASHANG:53,MSG_GROUP_APPLY_JOIN:56,MSG_SYS_CALLBACK:57,MSG_GROUP_PLAN:58,MERGE_GROUP:59,_ifGroup:function(e){return e==this.MSG_GROUP_TXT||e==this.MSG_GROUP_IMG||e==this.MSG_GROUP_RED||e==this.MSG_GROUP_AT||e==this.MSG_GROUP_AT_ALL||e==this.MSG_GROUP_INGROUP||e==this.MSG_GROUP_ROB||e==this.MSG_GROUP_RECALL||e==this.MSG_GROUP_CARD||e==this.MSG_RED_LANDMINE||e==this.MSG_RED_DRAGON||e==this.MSG_RED_COW||e==this.MSG_GROUP_VIDEO||e==this.MSG_GROUP_AUDIO||e==this.MSG_GROUP_NOTICE||e==this.MSG_GROUP_SHARE||e==this.MSG_GROUP_SIGN||e==this.MSG_GROUP_SHARENOTE||e==this.MSG_GROUP_DASHANG||e==this.MSG_GROUP_PLAN},_ifPrivate:function(e){return e==this.MSG_PRIVATE_TXT||e==this.MSG_PRIVATE_IMG||e==this.MSG_PRIVATE_RED||e==this.MSG_PRIVATE_HINT||e==this.MSG_PRIVATE_ROB||e==this.MSG_PRIVATE_CARD||e==this.MSG_PRIVATE_VIDEO||e==this.MSG_PRIVATE_AUDIO||e==this.MSG_PRIVATE_AGREEADDFRIEND||e==this.MSG_PRIVATE_SHARE||e==this.MSG_PRIVATE_SIGN||e==this.MSG_PRIVATE_SHARENOTE||e==this.MSG_PRIVATE_DASHANG||e==this.MSG_MONEY_TRANSFER},_ifSys:function(e){return e==this.MSG_SYS_COMMENT||e==this.MSG_SYS_THUMBS||e==this.MSG_SYSTEM_GG||e==this.MSG_STATION_LETTER},_ifUser:function(e){return 1==e.asFrom}}},UfyY:function(e,t){},VGuj:function(e,t,a){"use strict";var n=a("//Fk"),s=a.n(n),o=a("mvHQ"),i=a.n(o),r=a("IcnI"),g={xmppURL:"im-api.easemob.com",apiURL:"https://a1.easemob.com",appkey:"1103180723177473#dgg",https:!0,isMultiLoginSessions:!1,isWindowSDK:!1,isSandBox:!1,isDebug:!1,isStropheLog:!1,autoReconnectNumMax:2,autoReconnectInterval:2,isWebRTC:window.RTCPeerConnection&&/^https\:$/.test(window.location.protocol),i18n:"cn",isAutoLogin:!0,p2pMessageCacheSize:500,delivery:!0,groupMessageCacheSize:200,loglevel:"ERROR",enableLocalStorage:!0},d=a("SQjO"),c=a("6PR4"),u=a.n(c),f=a("mtWM"),p=a.n(f),l=a("F+jZ"),h=a("zL8q"),m=a("rfSu"),S=window.WebIM||{};S.config=g,window.againCountAll=0,S.conn={ws:{readyState:0},open:function(e){var t=r.a.state.chatuserInfoStore.loginData.imtoken;this.ws=new WebSocket(window.wsHostIm+"?token="+t+"&vcode="+(new Date).getTime()),this.ws.binaryType="arraybuffer",this.ws.onopen=function(){for(var t in window.WebIMws=this.ws,r.a.commit("setOnlineState",1),window.webIMpulse=window.webIMpulse||1,clearInterval(window.webIMpulse),window.againCount=0,window.againCountAll=0,window.webIMpulse=setInterval(function(){r.a.dispatch("sendMessageIM",{to:1,type:d.a.MSG_SYS_INDEX,message:"",reserved:i()({level:r.a.state.indexStore.userHomeData.data.userlevelid.levelName})})},6e4),this.ws.binaryType="arraybuffer",r.a.state.msgListStore.friendMsgMap)if(r.a.state.msgListStore.friendMsgMap[t].msgList)for(var a in r.a.state.msgListStore.friendMsgMap[t].msgList)"sending"!=r.a.state.msgListStore.friendMsgMap[t].msgList[a].status&&"error"!=r.a.state.msgListStore.friendMsgMap[t].msgList[a].status||r.a.dispatch("againSenAllTxt",r.a.state.msgListStore.friendMsgMap[t].msgList[a]);r.a.dispatch("getSofflineMessageAction",{is_ack:1,offlineKey:"",uid:r.a.state.chatuserInfoStore.loginData.id}),r.a.dispatch("getCustomerServiceAction",{}).then(function(e){e.applyCount>0&&(r.a.commit("setQuestSound"),r.a.dispatch("getCountApplyFriendAction",{self_uid:r.a.state.chatuserInfoStore.loginData.id}))}),e()}.bind(this),this.ws.binaryType="arraybuffer",this.ws.onmessage=function(e){var t=Object(m.b)(e.data);Object(m.a)(e.data).type===d.a.MERGE_GROUP&&r.a.dispatch("mergeGroup",t);var a=0;(a=t.singlemessage?t.singlemessage.sendid:t.groupmessage.sendid,-1!=[5,6,7,15,13,14,25,28,47,46,40].indexOf(1*t.type)&&r.a.getters.getUserId!=a&&r.a.dispatch("sendMessageIM",{to:1,type:d.a.MSG_SYS_CALLBACK,message:t.unique_value,reserved:i()({level:r.a.state.indexStore.userHomeData.data.userlevelid.levelName})}),t.status===d.a.MSG_STATUS_ERROR&&t.asFrom==r.a.state.chatuserInfoStore.loginData.id&&Object(h.Message)({message:t.content,type:"warning",showClose:!0}),r.a.dispatch("addMsgAction",t),1!=t.asGroup&&t.type!=d.a.MSG_IMG_NICKNAME||r.a.dispatch("upDataUserInfoAction",t),t.type==d.a.MSG_PRIVATE_RECALL&&t.singlemessage.sendid!=r.a.state.chatuserInfoStore.loginData.id&&r.a.dispatch("messageCallBack",{id:t.singlemessage.sendid,type:1,unique_value:t.unique_value}),t.type==d.a.MSG_GROUP_APPLY_JOIN&&r.a.commit("setGroupJoinApply",t),t.type==d.a.MSG_PRIVATE_GROUPRECALL&&t.groupmessage.sendid!=r.a.state.chatuserInfoStore.loginData.id&&r.a.dispatch("messageCallBack",{id:t.groupmessage.groupid,type:2,unique_value:t.groupmessage.content}),t.type!=d.a.MSG_GROUP_SPEAK&&t.type!=d.a.MSG_GROUP_ADD_FRIEND&&t.type!=d.a.MSG_GROUP_INGROUP||2==r.a.state.msgListStore.activeTyep&&t.groupmessage.groupid==r.a.state.msgListStore.activeWindowId&&r.a.dispatch("getGroupChatInfoAction",{self_uid:r.a.state.chatuserInfoStore.loginData.id,group_id:r.a.state.msgListStore.activeWindowId}),t.type==d.a.MSG_GROUP_NOTICE&&t.groupmessage.sendid!=r.a.state.chatuserInfoStore.loginData.id&&r.a.dispatch("findMeListAction",t),t.type==d.a.MSG_GROUP_REMOVEPERSON&&r.a.dispatch("findMeListAction",t),t.type!=d.a.MSG_GROUP_AT&&t.type!=d.a.MSG_GROUP_AT_ALL||t.groupmessage.sendid==r.a.state.chatuserInfoStore.loginData.id)||(t.groupmessage.comment.split(",").some(function(e){return e==r.a.state.chatuserInfoStore.loginData.id})||t.type==d.a.MSG_GROUP_AT_ALL)&&r.a.dispatch("findMeListAction",t);t.type==d.a.MSG_PRIVATE_APPLYFRIEND&&t.singlemessage.sendid!=r.a.state.chatuserInfoStore.loginData.id&&(r.a.commit("setQuestSound"),r.a.dispatch("getCountApplyFriendAction",{self_uid:r.a.state.chatuserInfoStore.loginData.id})),t.type==d.a.MSG_PRIVATE_AGREEADDFRIEND&&r.a.dispatch("getFriendList",{self_uid:r.a.state.chatuserInfoStore.loginData.id}),r.a.state.chatListStore.messageSoundOpen&&t.asFrom&&t.asFrom!=r.a.state.chatuserInfoStore.loginData.id&&t.type!=d.a.MSG_PRIVATE_RED&&t.type!=d.a.MSG_GROUP_RED&&t.type!=d.a.MSG_PRIVATE_ROB&&t.type!=d.a.MSG_GROUP_ROB&&t.type!=d.a.MSG_RED_COW&&t.type!=d.a.MSG_RED_LANDMINE&&t.type!=d.a.MSG_RED_DRAGON&&r.a.commit("setDiDiAudio"),r.a.state.chatListStore.redPackSoundOpen&&t.asFrom&&t.asFrom!=r.a.state.chatuserInfoStore.loginData.id&&(t.type==d.a.MSG_PRIVATE_RED||t.type==d.a.MSG_GROUP_RED||t.type==d.a.MSG_RED_COW||t.type==d.a.MSG_RED_LANDMINE||t.type==d.a.MSG_RED_DRAGON)&&r.a.commit("setRedPackMp3State")},this.ws.onclose=function(e){r.a.commit("setOnlineState",2),clearInterval(window.webIMpulse),window.againCountAll++,window.againCount<1&&setTimeout(function(){window.againCount++,S.conn.open()},2e3)}.bind(this)},isOpened:function(){return 1==this.ws.readyState},close:function(){this.ws.close()},send:function(e){var t=this;this.isOpened()?this.ws.send(e):this.open(function(){t.ws.send(e)})},listen:function(){},getUniqueId:function(){return Object(l.k)()}},S.conn.apiUrl||(S.conn.apiUrl=S.config.apiURL);var M=S.config.appkey.split("#"),_=p.a.create({baseURL:S.config.apiURL+"/"+M[0]+"/"+M[1],validateStatus:function(e){return!0}}),C=p.a.create({withCredentials:!0});function y(e){return e.data&&e.data.error_description?e.msg=e.data.error_description:e.data&&e.data.data&&e.data.data.error_description&&(e.msg=e.data.data.error_description),s.a.reject(e)}_.interceptors.response.use(function(e){return e.status>=300?y(e):e.data&&e.data.status&&200!==e.data.status?y(e.data):(e.data&&e.data.data&&(e.data=e.data.data),e)},function(e){console.log(e)}),S.uploadImg=function(e){var t=new FormData;t.append("file",e.value.data),t.append("website",Object(l.b)("website")),t.append("chat_uid",Object(l.b)("chat_uid")),t.append("msg_code",Object(l.k)());var a=Object(l.b)("IM_http");a=a.replace(/ws:/g,"http:"),C({method:"post",url:Object(l.b)("IM_https")+"chat/uploadFile",data:t}).then(function(e){if(r.a.getters.getCodeState(e.data.code)){var t=e.data.result.url,a=e.data.result.msg_code||Object(l.k)();setTimeout(function(){r.a.dispatch("sendDiyTxtMessage",{chatType:"chatroom",chatId:123456,message:{msg:i()({url:t})},msgTye:"image",message_code_md5:a})},1e3)}})},S.api=_,S.ajax=C,S.emoji=u.a;t.a=S},Wq1a:function(e,t,a){var n=a("LkYP"),s=n,o=Function("return this")();s.exportSymbol("proto.DggChat.DggChatGroupMessage",null,o),s.exportSymbol("proto.DggChat.DggChatSingleMessage",null,o),s.exportSymbol("proto.DggChat.DggCommon",null,o),proto.DggChat.DggChatSingleMessage=function(e){n.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.DggChat.DggChatSingleMessage,n.Message),s.DEBUG&&!COMPILED&&(proto.DggChat.DggChatSingleMessage.displayName="proto.DggChat.DggChatSingleMessage"),proto.DggChat.DggChatGroupMessage=function(e){n.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.DggChat.DggChatGroupMessage,n.Message),s.DEBUG&&!COMPILED&&(proto.DggChat.DggChatGroupMessage.displayName="proto.DggChat.DggChatGroupMessage"),proto.DggChat.DggCommon=function(e){n.Message.initialize(this,e,0,-1,null,null)},s.inherits(proto.DggChat.DggCommon,n.Message),s.DEBUG&&!COMPILED&&(proto.DggChat.DggCommon.displayName="proto.DggChat.DggCommon"),n.Message.GENERATE_TO_OBJECT&&(proto.DggChat.DggChatSingleMessage.prototype.toObject=function(e){return proto.DggChat.DggChatSingleMessage.toObject(e,this)},proto.DggChat.DggChatSingleMessage.toObject=function(e,t){var a={sendid:n.Message.getFieldWithDefault(t,1,0),acceptid:n.Message.getFieldWithDefault(t,2,0),content:n.Message.getFieldWithDefault(t,3,""),comment:n.Message.getFieldWithDefault(t,4,"")};return e&&(a.$jspbMessageInstance=t),a}),proto.DggChat.DggChatSingleMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.DggChat.DggChatSingleMessage;return proto.DggChat.DggChatSingleMessage.deserializeBinaryFromReader(a,t)},proto.DggChat.DggChatSingleMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readInt32();e.setSendid(a);break;case 2:a=t.readInt32();e.setAcceptid(a);break;case 3:a=t.readString();e.setContent(a);break;case 4:a=t.readString();e.setComment(a);break;default:t.skipField()}}return e},proto.DggChat.DggChatSingleMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.DggChat.DggChatSingleMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.DggChat.DggChatSingleMessage.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getSendid())&&t.writeInt32(1,a),0!==(a=e.getAcceptid())&&t.writeInt32(2,a),(a=e.getContent()).length>0&&t.writeString(3,a),(a=e.getComment()).length>0&&t.writeString(4,a)},proto.DggChat.DggChatSingleMessage.prototype.getSendid=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.DggChat.DggChatSingleMessage.prototype.setSendid=function(e){return n.Message.setProto3IntField(this,1,e)},proto.DggChat.DggChatSingleMessage.prototype.getAcceptid=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.DggChat.DggChatSingleMessage.prototype.setAcceptid=function(e){return n.Message.setProto3IntField(this,2,e)},proto.DggChat.DggChatSingleMessage.prototype.getContent=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.DggChat.DggChatSingleMessage.prototype.setContent=function(e){return n.Message.setProto3StringField(this,3,e)},proto.DggChat.DggChatSingleMessage.prototype.getComment=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.DggChat.DggChatSingleMessage.prototype.setComment=function(e){return n.Message.setProto3StringField(this,4,e)},n.Message.GENERATE_TO_OBJECT&&(proto.DggChat.DggChatGroupMessage.prototype.toObject=function(e){return proto.DggChat.DggChatGroupMessage.toObject(e,this)},proto.DggChat.DggChatGroupMessage.toObject=function(e,t){var a={sendid:n.Message.getFieldWithDefault(t,1,0),groupid:n.Message.getFieldWithDefault(t,2,0),content:n.Message.getFieldWithDefault(t,3,""),comment:n.Message.getFieldWithDefault(t,4,""),groupname:n.Message.getFieldWithDefault(t,5,""),grouppeoples:n.Message.getFieldWithDefault(t,6,0)};return e&&(a.$jspbMessageInstance=t),a}),proto.DggChat.DggChatGroupMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.DggChat.DggChatGroupMessage;return proto.DggChat.DggChatGroupMessage.deserializeBinaryFromReader(a,t)},proto.DggChat.DggChatGroupMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readInt32();e.setSendid(a);break;case 2:a=t.readInt32();e.setGroupid(a);break;case 3:a=t.readString();e.setContent(a);break;case 4:a=t.readString();e.setComment(a);break;case 5:a=t.readString();e.setGroupname(a);break;case 6:a=t.readInt32();e.setGrouppeoples(a);break;default:t.skipField()}}return e},proto.DggChat.DggChatGroupMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.DggChat.DggChatGroupMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.DggChat.DggChatGroupMessage.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getSendid())&&t.writeInt32(1,a),0!==(a=e.getGroupid())&&t.writeInt32(2,a),(a=e.getContent()).length>0&&t.writeString(3,a),(a=e.getComment()).length>0&&t.writeString(4,a),(a=e.getGroupname()).length>0&&t.writeString(5,a),0!==(a=e.getGrouppeoples())&&t.writeInt32(6,a)},proto.DggChat.DggChatGroupMessage.prototype.getSendid=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.DggChat.DggChatGroupMessage.prototype.setSendid=function(e){return n.Message.setProto3IntField(this,1,e)},proto.DggChat.DggChatGroupMessage.prototype.getGroupid=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.DggChat.DggChatGroupMessage.prototype.setGroupid=function(e){return n.Message.setProto3IntField(this,2,e)},proto.DggChat.DggChatGroupMessage.prototype.getContent=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.DggChat.DggChatGroupMessage.prototype.setContent=function(e){return n.Message.setProto3StringField(this,3,e)},proto.DggChat.DggChatGroupMessage.prototype.getComment=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.DggChat.DggChatGroupMessage.prototype.setComment=function(e){return n.Message.setProto3StringField(this,4,e)},proto.DggChat.DggChatGroupMessage.prototype.getGroupname=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.DggChat.DggChatGroupMessage.prototype.setGroupname=function(e){return n.Message.setProto3StringField(this,5,e)},proto.DggChat.DggChatGroupMessage.prototype.getGrouppeoples=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.DggChat.DggChatGroupMessage.prototype.setGrouppeoples=function(e){return n.Message.setProto3IntField(this,6,e)},n.Message.GENERATE_TO_OBJECT&&(proto.DggChat.DggCommon.prototype.toObject=function(e){return proto.DggChat.DggCommon.toObject(e,this)},proto.DggChat.DggCommon.toObject=function(e,t){var a,s={type:n.Message.getFieldWithDefault(t,1,0),code:n.Message.getFieldWithDefault(t,2,0),control:n.Message.getFieldWithDefault(t,3,""),action:n.Message.getFieldWithDefault(t,4,""),sendtime:n.Message.getFieldWithDefault(t,5,0),uniqueid:n.Message.getFieldWithDefault(t,6,""),token:n.Message.getFieldWithDefault(t,7,""),from:n.Message.getFieldWithDefault(t,8,""),singlemessage:(a=t.getSinglemessage())&&proto.DggChat.DggChatSingleMessage.toObject(e,a),groupmessage:(a=t.getGroupmessage())&&proto.DggChat.DggChatGroupMessage.toObject(e,a),comment:n.Message.getFieldWithDefault(t,11,""),avatar:n.Message.getFieldWithDefault(t,12,""),nickname:n.Message.getFieldWithDefault(t,13,""),reserved:n.Message.getFieldWithDefault(t,14,"")};return e&&(s.$jspbMessageInstance=t),s}),proto.DggChat.DggCommon.deserializeBinary=function(e){var t=new n.BinaryReader(e),a=new proto.DggChat.DggCommon;return proto.DggChat.DggCommon.deserializeBinaryFromReader(a,t)},proto.DggChat.DggCommon.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var a=t.readInt32();e.setType(a);break;case 2:a=t.readInt32();e.setCode(a);break;case 3:a=t.readString();e.setControl(a);break;case 4:a=t.readString();e.setAction(a);break;case 5:a=t.readInt64();e.setSendtime(a);break;case 6:a=t.readString();e.setUniqueid(a);break;case 7:a=t.readString();e.setToken(a);break;case 8:a=t.readString();e.setFrom(a);break;case 9:a=new proto.DggChat.DggChatSingleMessage;t.readMessage(a,proto.DggChat.DggChatSingleMessage.deserializeBinaryFromReader),e.setSinglemessage(a);break;case 10:a=new proto.DggChat.DggChatGroupMessage;t.readMessage(a,proto.DggChat.DggChatGroupMessage.deserializeBinaryFromReader),e.setGroupmessage(a);break;case 11:a=t.readString();e.setComment(a);break;case 12:a=t.readString();e.setAvatar(a);break;case 13:a=t.readString();e.setNickname(a);break;case 14:a=t.readString();e.setReserved(a);break;default:t.skipField()}}return e},proto.DggChat.DggCommon.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.DggChat.DggCommon.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.DggChat.DggCommon.serializeBinaryToWriter=function(e,t){var a=void 0;0!==(a=e.getType())&&t.writeInt32(1,a),0!==(a=e.getCode())&&t.writeInt32(2,a),(a=e.getControl()).length>0&&t.writeString(3,a),(a=e.getAction()).length>0&&t.writeString(4,a),0!==(a=e.getSendtime())&&t.writeInt64(5,a),(a=e.getUniqueid()).length>0&&t.writeString(6,a),(a=e.getToken()).length>0&&t.writeString(7,a),(a=e.getFrom()).length>0&&t.writeString(8,a),null!=(a=e.getSinglemessage())&&t.writeMessage(9,a,proto.DggChat.DggChatSingleMessage.serializeBinaryToWriter),null!=(a=e.getGroupmessage())&&t.writeMessage(10,a,proto.DggChat.DggChatGroupMessage.serializeBinaryToWriter),(a=e.getComment()).length>0&&t.writeString(11,a),(a=e.getAvatar()).length>0&&t.writeString(12,a),(a=e.getNickname()).length>0&&t.writeString(13,a),(a=e.getReserved()).length>0&&t.writeString(14,a)},proto.DggChat.DggCommon.prototype.getType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.DggChat.DggCommon.prototype.setType=function(e){return n.Message.setProto3IntField(this,1,e)},proto.DggChat.DggCommon.prototype.getCode=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.DggChat.DggCommon.prototype.setCode=function(e){return n.Message.setProto3IntField(this,2,e)},proto.DggChat.DggCommon.prototype.getControl=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.DggChat.DggCommon.prototype.setControl=function(e){return n.Message.setProto3StringField(this,3,e)},proto.DggChat.DggCommon.prototype.getAction=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.DggChat.DggCommon.prototype.setAction=function(e){return n.Message.setProto3StringField(this,4,e)},proto.DggChat.DggCommon.prototype.getSendtime=function(){return n.Message.getFieldWithDefault(this,5,0)},proto.DggChat.DggCommon.prototype.setSendtime=function(e){return n.Message.setProto3IntField(this,5,e)},proto.DggChat.DggCommon.prototype.getUniqueid=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.DggChat.DggCommon.prototype.setUniqueid=function(e){return n.Message.setProto3StringField(this,6,e)},proto.DggChat.DggCommon.prototype.getToken=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.DggChat.DggCommon.prototype.setToken=function(e){return n.Message.setProto3StringField(this,7,e)},proto.DggChat.DggCommon.prototype.getFrom=function(){return n.Message.getFieldWithDefault(this,8,"")},proto.DggChat.DggCommon.prototype.setFrom=function(e){return n.Message.setProto3StringField(this,8,e)},proto.DggChat.DggCommon.prototype.getSinglemessage=function(){return n.Message.getWrapperField(this,proto.DggChat.DggChatSingleMessage,9)},proto.DggChat.DggCommon.prototype.setSinglemessage=function(e){return n.Message.setWrapperField(this,9,e)},proto.DggChat.DggCommon.prototype.clearSinglemessage=function(){return this.setSinglemessage(void 0)},proto.DggChat.DggCommon.prototype.hasSinglemessage=function(){return null!=n.Message.getField(this,9)},proto.DggChat.DggCommon.prototype.getGroupmessage=function(){return n.Message.getWrapperField(this,proto.DggChat.DggChatGroupMessage,10)},proto.DggChat.DggCommon.prototype.setGroupmessage=function(e){return n.Message.setWrapperField(this,10,e)},proto.DggChat.DggCommon.prototype.clearGroupmessage=function(){return this.setGroupmessage(void 0)},proto.DggChat.DggCommon.prototype.hasGroupmessage=function(){return null!=n.Message.getField(this,10)},proto.DggChat.DggCommon.prototype.getComment=function(){return n.Message.getFieldWithDefault(this,11,"")},proto.DggChat.DggCommon.prototype.setComment=function(e){return n.Message.setProto3StringField(this,11,e)},proto.DggChat.DggCommon.prototype.getAvatar=function(){return n.Message.getFieldWithDefault(this,12,"")},proto.DggChat.DggCommon.prototype.setAvatar=function(e){return n.Message.setProto3StringField(this,12,e)},proto.DggChat.DggCommon.prototype.getNickname=function(){return n.Message.getFieldWithDefault(this,13,"")},proto.DggChat.DggCommon.prototype.setNickname=function(e){return n.Message.setProto3StringField(this,13,e)},proto.DggChat.DggCommon.prototype.getReserved=function(){return n.Message.getFieldWithDefault(this,14,"")},proto.DggChat.DggCommon.prototype.setReserved=function(e){return n.Message.setProto3StringField(this,14,e)},s.object.extend(t,proto.DggChat)},YaEn:function(e,t,a){"use strict";var n=a("7+uW"),s=a("/ocq"),o=a("Dd8w"),i=a.n(o),r=a("NYxO"),g=(a("F+jZ"),a("zL8q"),{name:"home",data:function(){return{auto:!0}},provide:function(){return{}},mounted:function(){},created:function(){},watch:{},methods:i()({},Object(r.d)(["setPicture","setModalState","closeSomeModal"]),Object(r.b)(["initData","getFriendList"]),{closePhoto:function(){this.setPicture({img:"",state:!1})}}),components:{},computed:i()({},Object(r.e)(["chatListStore","wechatIMstore","msgListStore","friendsListStore"]),Object(r.c)(["getUserId"])),filters:{}}),d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wechat-home",on:{click:function(t){return e.closeSomeModal()}}},[n("div",{staticClass:"chat-content",attrs:{id:"privateWindow"}},[n("div",{staticClass:"sidebar"},[n("wx-leftNav",{ref:"leftNav"})],1),e._v(" "),n("div",{staticClass:"chat-right"},[n("router-view")],1)]),e._v(" "),e.chatListStore.pictureObj.state||e.chatListStore.sendRedPackState||e.chatListStore.enableSendState||e.chatListStore.searchRecord||e.chatListStore.AddContactState||e.chatListStore.AddFriendState||e.chatListStore.userInfoState||e.chatListStore.groupUserInfoState||e.chatListStore.testDemo||2==e.wechatIMstore.onlineState||e.chatListStore.redPupContainer||e.chatListStore.sendBullRedState||e.chatListStore.sendSweepRedState||e.chatListStore.redDetailState||e.chatListStore.sendDragonRedState||e.chatListStore.groupIncomeState||e.chatListStore.groupManageState||e.chatListStore.groupZhuShou||e.chatListStore.moneyRewardState||e.chatListStore.orderFollowState||e.chatListStore.groupErWeiMaState||e.chatListStore.planFollowState?n("div",{staticClass:"bg-modal",on:{click:e.closePhoto}}):e._e(),e._v(" "),e.chatListStore.groupErWeiMaState?n("groupQrcode"):e._e(),e._v(" "),e.chatListStore.moneyRewardState?n("moneyReward"):e._e(),e._v(" "),e.chatListStore.orderFollowState?n("orderFollow"):e._e(),e._v(" "),e.chatListStore.planFollowState?n("planFollow"):e._e(),e._v(" "),e.chatListStore.videoObj.state?n("wx-video"):e._e(),e._v(" "),e.chatListStore.pictureObj.state?n("wx-photo"):e._e(),e._v(" "),e.chatListStore.sendRedPackState?n("wx-send-redpack"):e._e(),e._v(" "),e.chatListStore.sendBullRedState?n("wx-send-bullpack"):e._e(),e._v(" "),e.chatListStore.sendSweepRedState?n("wx-send-sweeppack"):e._e(),e._v(" "),e.chatListStore.sendDragonRedState?n("wx-send-dragonpack"):e._e(),e._v(" "),e.chatListStore.groupIncomeState?n("groupIncome"):e._e(),e._v(" "),e.chatListStore.enableSendState?n("enableSendMsgList"):e._e(),e._v(" "),e.chatListStore.searchRecord?n("searchRecord"):e._e(),e._v(" "),e.chatListStore.groupManageState?n("groupManageSet"):e._e(),e._v(" "),e.chatListStore.groupZhuShou?n("groupAssistant"):e._e(),e._v(" "),e.chatListStore.AddContactState?n("wx-newBuildGroup"):e._e(),e._v(" "),e.chatListStore.AddFriendState?n("wx-addNewFriend"):e._e(),e._v(" "),e.chatListStore.userInfoState?n("wx-userDetail"):e._e(),e._v(" "),e.chatListStore.redDetailState?n("wx-red-detail"):e._e(),e._v(" "),e.chatListStore.redPupContainer?n("wx-red-open"):e._e(),e._v(" "),e.chatListStore.transferDetail?n("wx-transfer-detail"):e._e(),e._v(" "),e.chatListStore.groupUserInfoState?n("wx-groupUserDetail"):e._e(),e._v(" "),e.chatListStore.setPassword?n("wx-setPayPassword"):e._e(),e._v(" "),2==e.wechatIMstore.onlineState?n("wx-again-connect"):e._e(),e._v("z\n  "),e.msgListStore.didiMp3State?n("div",[n("audio",{attrs:{autoplay:e.msgListStore.didiMp3State,loop:!1}},[n("source",{attrs:{src:a("zzvs"),type:"audio/mp3"}})])]):e._e(),e._v(" "),e.msgListStore.redPackMp3State?n("div",[n("audio",{attrs:{autoplay:e.msgListStore.redPackMp3State,loop:!1}},[n("source",{attrs:{src:a("JMP6"),type:"audio/mp3"}})])]):e._e(),e._v(" "),e.msgListStore.questSoundMp3State?n("div",[n("audio",{attrs:{autoplay:e.msgListStore.questSoundMp3State,loop:!1}},[n("source",{attrs:{src:a("HQJy"),type:"audio/wav"}})])]):e._e(),e._v(" "),n("div",{staticClass:"sound-setting"},[n("ul",[n("li",{class:{line:!e.chatListStore.messageSoundOpen},on:{click:function(t){return e.setModalState("messageSoundOpen")}}},[e.chatListStore.messageSoundOpen?n("img",{attrs:{src:a("6Xz1"),alt:""}}):n("img",{attrs:{src:a("PD85"),alt:""}}),e._v(" 消息提醒\n      ")]),e._v(" "),n("li",{class:{line:!e.chatListStore.redPackSoundOpen},on:{click:function(t){return e.setModalState("redPackSoundOpen")}}},[e.chatListStore.redPackSoundOpen?n("img",{attrs:{src:a("JMoe"),alt:""}}):n("img",{attrs:{src:a("9wfE"),alt:""}}),e._v(" 红包提醒\n      ")])])])],1)},staticRenderFns:[]};var c=a("VU/8")(g,d,!1,function(e){a("vfZG")},"data-v-3fc86c43",null).exports;n.default.use(s.a);var u=s.a.prototype.push;s.a.prototype.push=function(e){return u.call(this,e).catch(function(e){return e})};t.a=new s.a({routes:[{path:"/login",name:"login",component:function(e){return a.e(61).then(function(){var t=[a("K31e")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"/registered",name:"registered",component:function(e){return a.e(1).then(function(){var t=[a("kSr9")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"/index/user/r/:id",name:"registeredIndex",component:function(e){return a.e(1).then(function(){var t=[a("kSr9")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"/chat",name:"weChatIndex",component:c,children:[{path:"/chat",name:"chat",component:function(e){return Promise.all([a.e(0),a.e(25)]).then(function(){var t=[a("lQAV")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"/friend",name:"friend",component:function(e){return a.e(67).then(function(){var t=[a("5BYJ")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"/circle",name:"circle",component:function(e){return a.e(45).then(function(){var t=[a("dPpc")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0}]},{path:"/dbTest",name:"dbTest",component:function(e){return a.e(72).then(function(){var t=[a("sjha")];e.apply(null,t)}.bind(this)).catch(a.oe)},props:!0},{path:"*",redirect:"/login"}],linkActiveClass:"active"})},eOoE:function(e,t,a){"use strict";var n=a("//Fk"),s=a.n(n),o=a("mvHQ"),i=a.n(o),r=a("NC6I"),g=a.n(r),d=a("mtWM"),c=a.n(d),u=(a("IcnI"),a("mw3O")),f=a.n(u),p=a("F+jZ"),l=a("7MRW"),h=a("zL8q"),m=(a("rSpy"),{_t:"v",_d:"k",_n:"x",_p:"v"}),S={_t:"5",_d:"m",_n:"i",_p:"t"};var M={_t:"6",_d:"o",_n:"0",_p:"q"},_={_t:"q",_d:"2",_n:"n",_p:"k"};var C=c.a.create({});C.defaults.baseURL="",C.defaults.retry=5,C.defaults.retryDelay=5e3,C.defaults.withCredentials=!0;var y="",I=(y+=m._t+m._d+m._n+m._p+(S._t+S._d+S._n+S._p))+(M._t+M._d+M._n+M._p)+(_._t+_._d+_._n+_._p);C.interceptors.request.use(function(e){if(Object(p.c)("imtoken")&&-1!=e.url.indexOf(window.hostIm)&&(e.headers.Authorization=Object(p.c)("imtoken")),Object(p.c)("imtoken")&&Object(p.c)("token")&&-1==e.url.indexOf("api/uploadFile/upload")&&-1==e.url.indexOf("Api/User/vcode")&&-1==e.url.indexOf("Api/User/logined")){var t={};t=f.a.parse(e.data)||{},-1!=e.url.indexOf(window.host)?t.token=Object(p.c)("token"):t.token=Object(p.c)("imtoken"),t=f.a.stringify(t),e.data=t}if(e.data&&!e.__retryCount&&-1==e.url.indexOf("api/uploadFile/upload")){(t={}).Param=f.a.parse(e.data)||{};var a=i()(t.Param);t.Param=Object(l.b)(a);var n=a+I;t.Autograph=g()(n),t=f.a.stringify(t),e.data=t}return e},function(e){return s.a.reject(e)}),C.interceptors.response.use(function(e){try{window.location.href;if("12"==e.data.code)(Object(p.c)("imtoken")||Object(p.c)("token"))&&(Object(p.a)("imtoken"),Object(p.a)("RoomIdData"),window.location.assign("#/login"));if("9999"==e.data.code&&Object(h.Message)({message:"网站正在维护",type:"warning",showClose:!0}),10003==e.data.code||10004==e.data.code)(Object(p.c)("imtoken")||Object(p.c)("token")||"#/login"!=window.location.hash)&&(Object(p.a)("imtoken"),Object(p.a)("token"),Object(p.a)("loginData"),window.location.assign("#/login"),Object(h.Message)({message:"请重新登录！",type:"warning",showClose:!0}))}catch(e){console.log(e)}return e},function(e){console.error("web报错",e);var t=e.config;return t&&t.retry?(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry?s.a.reject(e):(t.__retryCount+=1,new s.a(function(e){setTimeout(function(){e()},t.retryDelay||1)}).then(function(){return C(t)}))):s.a.reject(e)});t.a=C},g3Gj:function(e,t){},rfSu:function(e,t,a){"use strict";a.d(t,"c",function(){return p}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return h});var n=a("Zrlr"),s=a.n(n),o=a("wxAW"),i=a.n(o),r=a("Wq1a"),g=(a.n(r),[{key:"type",get:"getType",set:"setType"},{key:"code",get:"getCode",set:"setCode"},{key:"control",get:"getControl",set:"setControl"},{key:"action",get:"getAction",set:"setAction"},{key:"create_time",get:"getSendtime",set:"setSendtime"},{key:"unique_value",get:"getUniqueid",set:"setUniqueid"},{key:"token",get:"getToken",set:"setToken"},{key:"from",get:"getFrom",set:"setFrom"},{key:"singlemessage",get:"getSinglemessage",set:"setSinglemessage"},{key:"groupmessage",get:"getGroupmessage",set:"setGroupmessage"},{key:"comment",get:"getComment",set:"setComment"},{key:"head_portrait",get:"getAvatar",set:"setAvatar"},{key:"nickname",get:"getNickname",set:"setNickname"},{key:"reserved",get:"getReserved",set:"setReserved"}]),d=[{key:"type",get:"getType",set:"setType"},{key:"control",get:"getControl",set:"setControl"},{key:"action",get:"getAction",set:"setAction"},{key:"create_time",get:"getSendtime",set:"setSendtime"},{key:"unique_value",get:"getUniqueid",set:"setUniqueid"},{key:"token",get:"getToken",set:"setToken"},{key:"from",get:"getFrom",set:"setFrom"},{key:"singlemessage",get:"getSinglemessage",set:"setSinglemessage"},{key:"groupmessage",get:"getGroupmessage",set:"setGroupmessage"},{key:"comment",get:"getComment",set:"setComment"},{key:"head_portrait",get:"getAvatar",set:"setAvatar"},{key:"nickname",get:"getNickname",set:"setNickname"},{key:"reserved",get:"getReserved",set:"setReserved"}],c=[{key:"sendid",get:"getSendid",set:"setSendid"},{key:"acceptid",get:"getAcceptid",set:"setAcceptid"},{key:"content",get:"getContent",set:"setContent"},{key:"comment",get:"getComment",set:"setComment"}],u=[{key:"sendid",get:"getSendid",set:"setSendid"},{key:"groupid",get:"getGroupid",set:"setGroupid"},{key:"content",get:"getContent",set:"setContent"},{key:"comment",get:"getComment",set:"setComment"},{key:"groupName",get:"getGroupname",set:"setGroupname"},{key:"groupPeoples",get:"getGrouppeoples",set:"setGrouppeoples"}],f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,a=arguments[1];s()(this,e),this.protoMsg=null,this.list=[],9==t&&(this.protoMsg=a||new proto.DggChat.DggChatSingleMessage,this.list=c),10==t&&(this.protoMsg=a||new proto.DggChat.DggChatGroupMessage,this.list=u)}return i()(e,[{key:"get",value:function(){var e=this.list,t=this.protoMsg,a={};for(var n in e){var s=e[n].key,o=e[n].get;a[s]=t[o]()}return a}},{key:"set",value:function(e){var t=this.list,a=this.protoMsg,n=function(n){var s=t.filter(function(e){return e.key==n}),o=s[0]?s[0].set:null;a[o](e[n])};for(var s in e)n(s)}}]),e}(),p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9,n=new proto.DggChat.DggCommon,s=new f(a);s.set(t);var o=function(t){var o=d.filter(function(e){return e.key==t}),i=o[0]?o[0].set:null;9==a&&"singlemessage"==t?n[i](s.protoMsg):10==a&&"groupmessage"==t?n[i](s.protoMsg):n[i](e[t])};for(var i in e)o(i);return n.serializeBinary()},l=function(e){var t=new proto.DggChat.DggCommon.deserializeBinary(e),a={},n=function(e){var n=g[e].key,s=g.filter(function(e){return e.key==n}),o=s[0]?s[0].get:null,i="";o&&(i=t[o]()),a[n]=i};for(var s in g)n(s);if(a.singlemessage){var o=new f(9,a.singlemessage);a.singlemessage=o.get()}if(a.groupmessage){var i=new f(10,a.groupmessage);a.groupmessage=i.get()}return a},h=function(e){return l(e)}},tvR6:function(e,t){},vfZG:function(e,t){},x9P2:function(e,t,a){e.exports=a.p+"pcImstatic/img/group_chat.67efbda.png"},yb3w:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i});var n={_t:"w",_d:"u",_n:"u",_p:"5"},s={_t:"q",_d:"k",_n:"8",_p:"r"};function o(){return n._t+n._d+n._n+n._p}function i(){return s._t+s._d+s._n+s._p}},zcHY:function(e,t,a){e.exports=a.p+"pcImstatic/img/group_tip.1bd7825.png"},zzvs:function(e,t,a){e.exports=a.p+"pcImstatic/media/dididi.cadac77.mp3"}},["NHnr"]);