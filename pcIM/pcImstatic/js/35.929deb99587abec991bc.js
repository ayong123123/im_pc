webpackJsonp([35],{AYLL:function(e,t){},sH52:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),n=a("NYxO"),r=(a("zL8q"),a("y1Vc")),d=a.n(r),c=(a("SQjO"),{data:function(){return{openNewFriendModal:!1,searchParam:"",userDetail:{},moren:d.a,addMsgModal:!1,applyMsg:"",f_id:""}},computed:i()({},Object(n.e)(["chatListStore","chatuserInfoStore","friendsListStore","msgListStore"]),Object(n.c)(["getUserId"])),watch:{},created:function(){},mounted:function(){},methods:i()({},Object(n.b)(["getLastMessageAction"]),Object(n.d)(["createFriendChatMessage","sendNewChat"]),{openMsgModal:function(e){this.f_id=e,this.applyMsg="",this.addMsgModal=!0},sendChat:function(){var e=this;this.setModalState("AddFriendState"),this.createFriendChatMessage({id:this.userDetail.id}),this.setActiveWindow({id:this.userDetail.id,type:this.userDetail.chatType||1,name:this.userDetail.nickname,head_portrait:this.userDetail.head_portrait}),1==this.userDetail.chatType&&this.getLastMessageAction({send_uid:this.getUserId,accept_uid:this.userDetail.id}).then(function(t){var a={id:e.userDetail.id,name:e.userDetail.nickname,count:0,head_portrait:e.userDetail.head_portrait,remarks_name:e.userDetail.remarks_name};e.sendNewChat({message:a,type:1,state:!0})})},openNewFriendFn:function(e){var t=this;this.userDetail={},this.getFriendInfoAction({self_uid:this.getUserId,friend_uid:e.id}).then(function(e){t.userDetail=e,t.userDetail.chatType=1,t.openNewFriendModal=!0})},searchUserFn:function(){var e={uid:this.getUserId,searchParam:this.searchParam};this.searchFriendListAction(e)},addForFriendFn:function(){var e=this;this.addMyFriendAction({self_uid:this.getUserId,friend_uid:this.f_id,agree:0,searchParam:this.searchParam,add_msg:this.applyMsg}).then(function(){e.addMsgModal=!1})}},Object(n.b)(["getFriendInfoAction","searchFriendListAction","addMyFriendAction","sendMessageIM"]),Object(n.d)(["setModalState","setActiveWindow","createFriendChatMessage","sendNewChat"]))}),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("transition",{attrs:{name:"showbox"}},[s("div",{staticClass:"add-friend-box"},[s("div",{staticClass:"friend-box-header"},[e._v("\n        添加朋友\n        "),s("i",{staticClass:"icon-set",on:{click:function(t){return e.setModalState("AddFriendState")}}})]),e._v(" "),s("div",{staticClass:"search-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchParam,expression:"searchParam"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.searchParam},on:{input:function(t){t.target.composing||(e.searchParam=t.target.value)}}}),e._v(" "),s("div",{on:{click:e.searchUserFn}},[s("i",{staticClass:"icon iconfont icon-search"})])]),e._v(" "),s("p",[e._v("我的账号："+e._s(e.chatuserInfoStore.loginData.username))]),e._v(" "),s("div",{staticClass:"search-yes-user"},[s("p",[e._v("搜索结果")]),e._v(" "),s("div",{staticClass:"search-alluser"},e._l(e.chatListStore.SearchFriendList.data,function(t,a){return s("div",{staticClass:"flex-between search-alluser-item"},[s("div",{class:{offline:0==t.online}},[s("img",{attrs:{src:t.head_portrait||e.moren,alt:""}}),e._v("\n              "+e._s(t.nickname)+"\n            ")]),e._v(" "),s("div",{staticClass:"search-friend-option"},[1==t.is_friend?s("span",{staticClass:"color-gray"},[e._v("已添加")]):0==t.is_friend?s("span",{staticClass:"add-active point",on:{click:function(a){return e.openMsgModal(t.id)}}},[e._v("添加")]):s("span",{staticClass:"color-gray"},[e._v("已申请")]),e._v(" "),s("span",{staticClass:"check-active point",on:{click:function(a){return e.openNewFriendFn(t)}}},[e._v("查看")])])])}),0)]),e._v(" "),s("transition",[e.openNewFriendModal?s("div",{staticClass:"look-new-friend"},[s("div",{staticClass:"look-new-friend-head"},[s("i",{staticClass:"el-icon-arrow-left",on:{click:function(t){e.openNewFriendModal=!1}}}),e._v("\n            用户详情\n          ")]),e._v(" "),s("div",{staticClass:"look-new-friend-detail flex"},[s("img",{attrs:{src:e.userDetail.head_portrait||e.moren,alt:""}}),e._v(" "),s("div",{staticClass:"look-new-friend-user"},[s("div",{staticClass:"look-new-friend-name"},[e._v("\n                "+e._s(e.userDetail.remarks_name||e.userDetail.nickname)+"\n                "),2==e.userDetail.sex?s("img",{attrs:{src:a("FJyc"),width:"12",alt:""}}):s("img",{attrs:{src:a("v8Cw"),width:"12",alt:""}})]),e._v(" "),s("div",{staticClass:"look-new-friend-diqu"},[e._v("昵   称: "+e._s(e.userDetail.nickname||"--"))]),e._v(" "),s("div",{staticClass:"look-new-friend-diqu"},[e._v("用户名: "+e._s(e.userDetail.username||"--"))])])]),e._v(" "),s("div",{staticClass:"friend-other-message"}),e._v(" "),1==e.userDetail.is_friend?s("div",{staticClass:"other-message-select",on:{click:e.sendChat}},[s("img",{attrs:{src:a("G/IV"),width:"24",alt:""}}),e._v("发消息\n          ")]):s("div",{staticClass:"other-message-select",on:{click:function(t){return e.openMsgModal(e.userDetail.id)}}},[e._v("\n            添加好友\n          ")])]):e._e()])],1)]),e._v(" "),s("el-dialog",{staticClass:"add_f_msg",attrs:{title:"验证消息",visible:e.addMsgModal,width:"400px",center:""},on:{"update:visible":function(t){e.addMsgModal=t}}},[s("el-form",{ref:"setPassForm",staticClass:"demo-ruleForm",attrs:{"status-icon":""}},[s("el-form-item",{attrs:{label:"朋友验证(选填):"}},[s("el-input",{attrs:{type:"text",placeholder:"请输入好友申请消息"},model:{value:e.applyMsg,callback:function(t){e.applyMsg=t},expression:"applyMsg"}})],1),e._v(" "),s("el-form-item",{staticClass:"footer",staticStyle:{"text-align":"right"}},[s("el-button",{on:{click:function(t){e.addMsgModal=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.addForFriendFn()}}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(c,o,!1,function(e){a("AYLL")},"data-v-b3d503dc",null);t.default=l.exports}});