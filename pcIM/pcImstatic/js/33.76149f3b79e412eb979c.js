webpackJsonp([33],{B4NL:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__=__webpack_require__("mvHQ"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_2_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_3__common_common__=__webpack_require__("F+jZ"),__WEBPACK_IMPORTED_MODULE_4__configWX_configWX__=__webpack_require__("SQjO"),__WEBPACK_IMPORTED_MODULE_5__configWX_emoji__=__webpack_require__("6PR4"),__WEBPACK_IMPORTED_MODULE_5__configWX_emoji___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__configWX_emoji__);__webpack_exports__.a={props:["msg","forbiddenInfo"],computed:__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({},Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.c)(["selectedChat","getUserId","getGroupRemarkName","isBoss","isManagement"]),Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.e)(["chatListStore","msgListStore","chatuserInfoStore","friendsListStore"]),Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.d)(["setHandleUserVible"])),data:function(){return{getTimes:__WEBPACK_IMPORTED_MODULE_3__common_common__.d,config:__WEBPACK_IMPORTED_MODULE_4__configWX_configWX__.a,reg:"操你妈*鸡吧",errorTimer:null}},mounted:function(){},watch:{},created:function(){var e=this;this.errorTimer=setTimeout(function(){e.setError()},1e4)},beforeDestroy:function(){clearTimeout(this.errorTimer)},methods:__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({isStopTalking:function(e){this.$emit("isStopTalking",e)},removeGroupUser:function(e){this.$emit("removeGroupUser",e)},openHandleUserVible:function(e){this.$emit("openHandleUserVible",e)},setError:function(){this.msg.code&&3!=this.msg.code||this.msg.status!=this.config.MSG_STATUS_SED||(this.msg.status=this.config.MSG_STATUS_ERROR,clearTimeout(this.errorTimer))},chongFa:function(){var e=this;(this.msg.send_uid&&this.msg.send_uid==this.getUserId||this.msg.userMsg&&this.msg.status==this.config.MSG_STATUS_ERROR)&&this.$confirm("是否重发该消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("reSendMessage",e.msg)}).catch(function(){})},findUser:function(e){this.$emit("setFindUser",e)},renderTxt:function(e){for(var t=[],_=null,s=/(\[.*?\])/g,i=0,n=0;_=s.exec(e);){if((n=_.index)>i&&t.push(e.substring(i,n)),_[1]in __WEBPACK_IMPORTED_MODULE_5__configWX_emoji___default.a.map){var r=__WEBPACK_IMPORTED_MODULE_5__configWX_emoji___default.a.map[_[1]];t.push('<img  class="" src=./pcImstatic/images/faces/'+r+" />")}else t.push(_[1]);i=n+_[1].length}try{t.push(e.substring(i,e.length))}catch(_){t.push(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(e))}var a="";return t.forEach(function(e,t,_){a+=e}),a.replace(/\r\n/g,"</br>").replace(/\n/g,"</br>")},filterTxt:function filterTxt(t){var t1=t,arr=this.reg.split("*");for(var i in arr)try{var imgReg=eval("/"+arr[i]+"(?=[^>]*(<|$))/g");t1=t1.replace(imgReg,"***")}catch(e){}return t1}},Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.b)(["sendMessageIM"]),Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.d)(["clearMessageBack"]),{messageBack:function(){var e=this;this.msg.send_uid&&this.msg.send_uid==this.getUserId||this.msg.userMsg&&this.msg.status==this.config.MSG_STATUS_SUCCEED||this.isBoss&&2==this.msgListStore.activeTyep||this.isManagement&&2==this.msgListStore.activeTyep?this.$emit("openConfig",this.msg):this.$confirm("是否转发该消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("getZhuanFa")}).catch(function(){})},replaceFace:function(e){if(e.includes("/:")){for(var t=this.chatListStore.emojis,_=0;_<t.length;_++)e=e.replace(t[_].reg,'<img src="pcImstatic/emoji/'+t[_].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return e}return e}},Object(__WEBPACK_IMPORTED_MODULE_2_vuex__.d)([])),filters:{}}},iVDO:function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=_("B4NL"),i={render:function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"texts"},[_("div",{staticClass:"time"},[e.msg.showTime?e._e():_("span",[e._v(e._s(e.getTimes(e.msg.create_time)))])]),e._v(" "),_("div",{staticClass:"main",class:{self:e.msg.userMsg||e.msg.send_uid==e.getUserId}},[e.msg.head_portrait?_("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.msg.head_portrait,expression:"msg.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}):e.msg.send_uid==e.getUserId?_("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.chatuserInfoStore.dataGetInfo.head_portrait,expression:"chatuserInfoStore.dataGetInfo.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}):_("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.selectedChat.user.img,expression:"selectedChat.user.img"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(t){return e.findUser(e.msg)},contextmenu:function(t){return t.preventDefault(),e.openHandleUserVible(e.msg)}}}),e._v(" "),_("div",{directives:[{name:"show",rawName:"v-show",value:e.chatListStore.handleUserVible&&e.forbiddenInfo.unique_value==e.msg.unique_value&&e.msg.send_uid!=e.getUserId,expression:"chatListStore.handleUserVible && forbiddenInfo.unique_value ==msg.unique_value && msg.send_uid != getUserId"}],staticClass:"handleConfig"},[_("ul",[2!=e.forbiddenInfo.forbiddenStatus?_("li",{on:{click:function(t){return e.isStopTalking(e.msg)}}},[e._v("\n          禁言\n        ")]):e._e(),e._v(" "),1!=e.forbiddenInfo.forbiddenStatus?_("li",{on:{click:function(t){return e.isStopTalking(e.msg)}}},[e._v("\n          解禁\n        ")]):e._e(),e._v(" "),_("li",{on:{click:function(t){return e.removeGroupUser(e.msg)}}},[e._v("\n          移除\n        ")]),e._v(" "),_("li",{on:{click:function(t){return e.findUser(e.msg)}}},[e._v("\n          @TA\n        ")])])]),e._v(" "),e.msg.userMsg||e.msg.send_uid==e.getUserId?_("span",{staticClass:"chat-username"},[_("wx-level",{attrs:{msg:e.msg}}),e._v(e._s(e.chatuserInfoStore.dataGetInfo.nickname)+"\n    ")],1):1==e.msgListStore.activeTyep?_("span",{staticClass:"chat-username"},[e._v("\n      "+e._s(e.msgListStore.activeName)),_("wx-level",{attrs:{msg:e.msg}})],1):_("span",{staticClass:"chat-username"},[e._v("\n     "+e._s(e.getGroupRemarkName({uid:e.msg.asFrom,send_uid:e.msg.send_uid})||e.msg.nickname||e.msg.username)),_("wx-level",{attrs:{msg:e.msg}})],1),e._v(" "),_("div",{staticClass:"content chat-content-dom",on:{contextmenu:function(t){return t.preventDefault(),e.messageBack()}}},[_("div",{staticClass:"text",domProps:{innerHTML:e._s(e.filterTxt(e.renderTxt(e.msg.content)))}}),e._v(" "),e.msg.status==e.config.MSG_STATUS_SED?_("i",{staticClass:"el-icon-loading chat-loading"}):e._e(),e._v(" "),e.msg.status==e.config.MSG_STATUS_ERROR?_("i",{staticClass:"el-icon-warning chat-loading error",on:{click:function(t){return e.chongFa()}}}):e._e()])])])},staticRenderFns:[]};var n=function(e){_("lXMI")},r=_("VU/8")(s.a,i,!1,n,"data-v-5df9d77a",null);t.default=r.exports},lXMI:function(e,t){}});