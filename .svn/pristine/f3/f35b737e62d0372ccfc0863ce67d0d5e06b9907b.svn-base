webpackJsonp([25],{"2+o2":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Dd8w"),s=i.n(n),a=i("NYxO"),o=(i("SQjO"),{data:function(){return{like:!0,friendComment:"",remarkShow:!1,targetInfo:{},com_id:"",placeConetent:"",parm:{self_uid:"",friend_uid:"",page:1,page_size:"10"},loadding:"",clientHeight:0,isKaiGuan:!1,dataList:[],conName:"",activeIndex:"-1",offdata:[],showContent:"0",messgeid:""}},created:function(){var t=this;this.parm.self_uid=this.getUserId,this.getFriendListAction(this.parm).then(function(e){1e4==e.code?(t.showContent="1",t.dataList=e.data,t.dataList.length>=10?(t.isKaiGuan=!0,t.loadding=0):(t.isKaiGuan=!1,t.loadding=1)):t.showContent="0"})},computed:s()({},Object(a.c)(["getUserId"]),Object(a.e)(["friendCircleStore","chatuserInfoStore","msgListStore"])),mounted:function(){var t=this;this.$nextTick(function(){t.$refs.scrollList.addEventListener("scroll",t.menu)})},watch:{dataList:function(){var t=this;setTimeout(function(){t.getDataHe()},100)}},methods:s()({},Object(a.d)(["setPicture","windowMove","setActiveWindow","createFriendChatMessage","sendNewChat"]),Object(a.b)(["getFriendListAction","addLikeAction","deleteMoment","addComment","cancelLikeAction","getFriendCircleList","getFriendInfoAction","searchUser"]),{getHeight:function(t){for(var e=0;e<this.offdata.length;e++)if(t==e)return this.offdata[e]},getDataHe:function(){this.offdata=[];for(var t=this.$refs.group,e=0;e<t.length;e++)this.offdata.push(t[e].offsetHeight)},menu:function(){var t=this;this.isKaiGuan&&(0==this.getScrollTop()+this.getWindowHeight()-this.getScrollHeight()&&(this.parm.page++,this.parm.self_uid=this.getUserId,this.loadding=0,this.getFriendListAction(this.parm).then(function(e){if(1e4==e.code){for(var i=0;i<e.data.length;i++)t.dataList.push(e.data[i]);e.data.length>10?(t.loadding=0,t.isKaiGuan=!0):(t.loadding=1,t.isKaiGuan=!1)}else{for(i=0;i<e.data.length;i++)t.dataList.push([]);t.loadding=1,t.isKaiGuan=!1}})))},enterFriendList:function(t){if(t.uid!=this.getUserId){var e={it:t.uid,itname:t.name};this.$emit("childData",e)}},enterMessage:function(t,e){var i=this;this.messgeid=1==e?t.uid:2==e?t.l_uid:t.com_uid,this.messgeid!=this.getUserId&&this.getFriendInfoAction({self_uid:this.getUserId,friend_uid:this.messgeid}).then(function(t){i.createFriendChatMessage({id:t.id});var e={id:t.id,name:t.nickname,count:0,head_portrait:t.head_portrait,remarks_name:t.remarks_name};i.sendNewChat({message:e,type:1,state:!0})})},getScrollTop:function(){return this.$refs.scrollList.scrollTop},getScrollHeight:function(){return this.$refs.scrollList.scrollHeight},getWindowHeight:function(){return this.$refs.scrollList.clientHeight},nameData:function(t){return t.map(function(t){return t.name}).join(",")},changeFoldState:function(t,e){this.activeIndex=this.activeIndex==e?-1:e},moreContent:function(t){t.intoState;for(var e in this.dataList)t.id==this.dataList[e].id?this.$set(this.dataList[e],"intoState",!t.intoState):(this.$set(this.dataList[e],"intoState",!1),this.remarkShow=!1)},removeIntoState:function(){var t=this;this.dataList.map(function(e){t.$set(e,"intoState",!1)}),this.remarkShow=!1},sendFriendCircle:function(){this.$emit("sendData",!0)},delMoments:function(t){var e=this;this.$confirm("是否删除该条朋友圈","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteMoment({self_uid:e.getUserId,fcm_id:t.id}).then(function(t){var i=e.dataList.findIndex(function(e){return e.id==t.id});e.dataList.splice(i,1)})}).catch(function(){})},remarkContent:function(t,e){t.uid!=this.getUserId?(this.targetInfo=t,this.remarkShow=!this.remarkShow,this.placeConetent="评论",this.$set(this.dataList[e],"intoState",!1),this.remarkShow&&(this.com_id="",this.$refs.commentInput&&this.$refs.commentInput.focus())):(this.$notify({title:"警告",message:"不能评论自己",type:"warning"}),this.$set(this.dataList[e],"intoState",!1))},aLike:function(t,e){var i=this;this.getLikeState(t.like)?this.cancelLikeAction({self_uid:this.getUserId,fcmid:t.id}).then(function(t){if(t.id)for(var e in i.dataList)if(i.dataList[e].id==t.id){var n=i.dataList[e].like.findIndex(function(t){return t.l_uid==i.getUserId});i.dataList[e].like.splice(n,1)}}):this.addLikeAction({likeUid:this.getUserId,fcmid:t.id,circleUid:t.uid}).then(function(t){if(t.id)for(var e in i.dataList)i.dataList[e].id==t.id&&i.dataList[e].like.push(t.data)})},getLikeState:function(t){var e=this;return!(0==t.length||!t)&&t.some(function(t){return t.l_uid==e.getUserId})},sendContent:function(){var t=this;this.friendComment?this.addComment({comUid:this.getUserId,fcmid:this.targetInfo.id,circleUid:this.targetInfo.uid,content:this.friendComment,repeatUid:this.com_id,conName:this.conName}).then(function(e){for(var i in t.friendComment="",t.remarkShow=!1,t.dataList)t.dataList[i].id==e.id&&t.dataList[i].comment.push(e.data)}):this.$message("请输入要评论的内容")},recoveComment:function(t,e){this.getUserId!=e.com_uid&&(this.targetInfo=t,this.com_id=e.com_uid,this.remarkShow=!0,this.conName=e.name,this.placeConetent="回复"+e.name+":")}})}),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Info-wrapper"},[n("div",{staticClass:"newfriend",on:{mousedown:function(e){return t.windowMove(e)}}},[n("div",{staticClass:"nickname"},[t._v("朋友圈")]),t._v(" "),n("i",{staticClass:"photos point",on:{click:t.sendFriendCircle}})]),t._v(" "),"0"==t.showContent?n("div",{staticClass:"noneData"},[t._v("暂无内容，去发表一条朋友圈吧")]):t._e(),t._v(" "),n("div",{ref:"scrollList",staticClass:"content-div"},["1"==t.showContent?n("ul",{staticClass:"friend-circles",class:{on:t.remarkShow}},[t._l(t.dataList,function(e,s){return n("li",{key:s,staticClass:"cirlist"},[n("div",{staticClass:"friend-overall"},[e.head_portrait?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.head_portrait,expression:"item.head_portrait"}],staticClass:"friendleft point",on:{click:function(i){return t.enterMessage(e,1)}}}):n("img",{staticClass:"friendleft point",attrs:{src:i("y1Vc")},on:{click:function(i){return t.enterMessage(e,1)}}}),t._v(" "),n("div",{staticClass:"friendright",on:{click:function(e){return t.removeIntoState()}}},[n("p",{staticClass:"send-name point",on:{click:function(i){return t.enterFriendList(e)}}},[t._v(t._s(e.name))]),t._v(" "),n("div",{class:t.activeIndex==s?"detailed-introduce":"total-introduce"},[n("div",{staticClass:"intro-content"},[n("p",{ref:"group",refInFor:!0,domProps:{innerHTML:t._s(e.content)}})])]),t._v(" "),t.getHeight(s)>126?n("span",{staticClass:"send-all point",on:{click:function(i){return t.changeFoldState(e,s)}}},[t._v(t._s(t.activeIndex==s?"收起":"全文"))]):t._e(),t._v(" "),n("div",{staticClass:"send-img"},t._l(e.picture,function(e){return n("div",{on:{click:function(i){return t.setPicture({img:e,state:!0})}}},[n("img",e?{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"it"}]}:{attrs:{src:i("MKkq")}})])}),0),t._v(" "),n("div",{staticClass:"send-set"},[n("div",[n("span",{staticClass:"send-time"},[t._v(t._s(t.$getTimes(e.create_time)))]),t._v(" "),e.uid==t.getUserId?n("span",{staticClass:"send-detal",on:{click:function(i){return t.delMoments(e)}}},[t._v("删除")]):t._e()]),t._v(" "),n("i",{staticClass:"point send-i",on:{click:function(i){return i.stopPropagation(),t.moreContent(e)}}}),t._v(" "),n("transition",{attrs:{name:"showbox"}},[e.intoState?n("div",{staticClass:"emojiBox"},[n("div",{staticClass:"emojileft point",on:{click:function(i){return t.aLike(e,s)}}},[n("i",{staticClass:"nonelike"}),t._v(" "),n("a",[t._v(t._s(t.getLikeState(e.like)?"取消":"赞"))])]),t._v(" "),n("div",{staticClass:"emojiright point",on:{click:function(i){return i.stopPropagation(),t.remarkContent(e,s)}}},[n("i"),n("a",[t._v("评论")])])]):t._e()])],1),t._v(" "),n("div",{staticClass:"commentsUp"},[e.like.length>0||e.comment.length>0?n("span",{staticClass:"triangle"}):t._e(),t._v(" "),e.like.length>0?n("div",{staticClass:"flex-all liveContent"},[n("div",{staticClass:"flex-all commentsdown"},[n("i",{staticClass:"nonelike"}),t._v(" "),n("div",t._l(e.like,function(e){return n("span",{staticClass:"point",on:{click:function(i){return t.enterMessage(e,2)}}},[t._v(t._s(e.name))])}),0)])]):t._e(),t._v(" "),e.comment.length>0?n("ul",t._l(e.comment,function(i){return n("li",{staticClass:"comment-content flex"},[n("p",[n("span",{staticClass:"nameSpan",on:{click:function(e){return t.enterMessage(i,3)}}},[t._v(t._s(i.name)+"：")]),n("span",{on:{click:function(n){return n.stopPropagation(),t.recoveComment(e,i)}}},[t._v(t._s(i.content))])])])}),0):t._e()])])])])}),t._v(" "),0==t.loadding?n("li",{staticClass:"cirlist loadingContent"},[t._v("加载中，请稍后")]):t._e(),t._v(" "),1==t.loadding?n("li",{staticClass:"cirlist loadingContent"},[t._v("— 没有更多数据了 —")]):t._e()],2):t._e()]),t._v(" "),t.remarkShow?n("div",{staticClass:"CommentsV2-footer"},[n("div",{staticClass:"commentsleft"},[n("el-input",{ref:"commentInput",attrs:{type:"textarea",autosize:"",autofocus:"",placeholder:t.placeConetent},model:{value:t.friendComment,callback:function(e){t.friendComment=e},expression:"friendComment"}})],1),t._v(" "),n("button",{staticClass:"singleButton",attrs:{type:"button"},on:{click:t.sendContent}},[t._v("发布")])]):t._e()])},staticRenderFns:[]};var c=i("VU/8")(o,r,!1,function(t){i("PT8E")},"data-v-5c6d1ba2",null);e.default=c.exports},MKkq:function(t,e,i){t.exports=i.p+"pcImstatic/img/notime.6735426.jpg"},PT8E:function(t,e){}});