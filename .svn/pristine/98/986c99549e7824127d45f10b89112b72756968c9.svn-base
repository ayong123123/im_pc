webpackJsonp([8],{"7+IR":function(t,e,s){t.exports=s.p+"pcImstatic/img/laba_right.e1611e4.gif"},YAHt:function(t,e){},fFdj:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),n=s.n(i),a=s("NYxO"),r=s("F+jZ"),o=s("SQjO"),u={props:["msg","forbiddenInfo"],computed:n()({},Object(a.c)(["getUserId","selectedChat","getGroupRemarkName","isBoss","isManagement"]),Object(a.e)(["chatuserInfoStore","msgListStore","chatListStore","friendsListStore"]),{chatObj:function(){try{return JSON.parse(this.msg.content)||""}catch(t){}}}),data:function(){return{getTimes:r.d,config:o.a,getTimesYueRi:r.e,diyState:!0,atimer:null,reading:!1,longClick:0,timeOutEvent:0,timeOutEvent2:0,options:!1,errorTimer:null}},mounted:function(){},watch:{},created:function(){var t=this;this.msg.isPlay=!1,this.errorTimer=setTimeout(function(){t.setError()},1e4)},beforeDestroy:function(){clearTimeout(this.atimer),clearTimeout(this.errorTimer)},methods:n()({},Object(a.b)([]),Object(a.d)(["setAudioUnreadIm","setChatGameState"]),{isStopTalking:function(t){this.$emit("isStopTalking",t)},removeGroupUser:function(t){this.$emit("removeGroupUser",t)},openHandleUserVible:function(t){this.$emit("openHandleUserVible",t)},messageBack:function(){var t=this;(this.msg.send_uid&&this.msg.send_uid==this.getUserId||this.msg.userMsg&&this.msg.status==this.config.MSG_STATUS_SUCCEED||this.isBoss&&2==this.msgListStore.activeTyep||this.isManagement&&2==this.msgListStore.activeTyep)&&this.$confirm("是否撤回该消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$emit("messageBack")}).catch(function(){})},playAudio:function(t){var e=this;this.$emit("audioPaused");var s=this.$refs.audio;"true"==s.getAttribute("data-flag")?(s.play(),s.setAttribute("data-flag","false"),this.$set(t,"isPlay",!0),s.addEventListener("ended",function(){s.pause(),s.setAttribute("data-flag","true"),e.$set(t,"isPlay",!1)},!1)):(s.currentTime=0,s.pause(),s.setAttribute("data-flag","true"),this.$set(t,"isPlay",!1))},setError:function(){this.msg.code&&3!=this.msg.code||this.msg.status!=this.config.MSG_STATUS_SED||(this.msg.status=this.config.MSG_STATUS_ERROR,clearTimeout(this.errorTimer))},findUser:function(t){this.$emit("setFindUser",t)}})},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"main audio",class:{self:t.msg.userMsg||t.msg.send_uid==t.getUserId}},[t.msg.head_portrait?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.msg.head_portrait,expression:"msg.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(e){return t.findUser(t.msg)},contextmenu:function(e){return e.preventDefault(),t.openHandleUserVible(t.msg)}}}):t.msg.send_uid==t.getUserId?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.chatuserInfoStore.dataGetInfo.head_portrait,expression:"chatuserInfoStore.dataGetInfo.head_portrait"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(e){return t.findUser(t.msg)},contextmenu:function(e){return e.preventDefault(),t.openHandleUserVible(t.msg)}}}):i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.selectedChat.user.img,expression:"selectedChat.user.img"}],staticClass:"avatar",attrs:{width:"36",height:"36"},on:{click:function(e){return t.findUser(t.msg)},contextmenu:function(e){return e.preventDefault(),t.openHandleUserVible(t.msg)}}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.chatListStore.handleUserVible&&t.forbiddenInfo.unique_value==t.msg.unique_value&&t.msg.send_uid!=t.getUserId,expression:"chatListStore.handleUserVible && forbiddenInfo.unique_value ==msg.unique_value && msg.send_uid != getUserId"}],staticClass:"handleConfig"},[i("ul",[2!=t.forbiddenInfo.forbiddenStatus?i("li",{on:{click:function(e){return t.isStopTalking(t.msg)}}},[t._v("\n          禁言\n        ")]):t._e(),t._v(" "),1!=t.forbiddenInfo.forbiddenStatus?i("li",{on:{click:function(e){return t.isStopTalking(t.msg)}}},[t._v("\n          解禁\n        ")]):t._e(),t._v(" "),i("li",{on:{click:function(e){return t.removeGroupUser(t.msg)}}},[t._v("\n          移除\n        ")]),t._v(" "),i("li",{on:{click:function(e){return t.findUser(t.msg)}}},[t._v("\n          @TA\n        ")])])]),t._v(" "),i("div",[t.msg.userMsg||t.msg.send_uid==t.getUserId?i("p",[t._v("\n      "+t._s(t.chatuserInfoStore.dataGetInfo.nickname)+"\n    ")]):1==t.msgListStore.activeTyep?i("p",[t._v("\n      "+t._s(t.msgListStore.activeName)+"\n    ")]):i("p",[t._v("\n      "+t._s(t.getGroupRemarkName({uid:t.msg.asFrom,send_uid:t.msg.send_uid})||t.msg.nickname||t.msg.username)+"\n    ")]),t._v(" "),i("div",{staticClass:"whatsay",style:{textAlign:t.msg.userMsg||t.msg.send_uid==t.getUserId?"right":"left"}},[i("audio",{ref:"audio",staticClass:"audio_tag",staticStyle:{display:"none"},attrs:{controls:"controls","data-flag":"false"}},[i("source",{attrs:{src:t.chatObj.qiniu_url,type:"audio/wav"}}),t._v(" "),i("source",{attrs:{src:t.chatObj.qiniu_url,type:"audio/mp3"}}),t._v(" "),i("p",[t._v("格式不支持")])]),t._v(" "),i("div",{staticClass:"whatsay_text",style:{width:1*t.chatObj.time+100+"px",display:"inline-block"},on:{click:function(e){return t.playAudio(t.msg)},contextmenu:function(e){return e.preventDefault(),t.messageBack()}}},[t._v("\n          "+t._s(t.chatObj.time)+"''  \n          "),t.msg.userMsg&&!t.msg.isPlay||t.msg.send_uid==t.getUserId&&!t.msg.isPlay?i("img",{staticStyle:{"vertical-align":"sub"},attrs:{src:s("iTCy"),alt:"",width:"18"}}):t.msg.isPlay?t._e():i("img",{staticStyle:{"vertical-align":"sub"},attrs:{src:s("nVJL"),alt:"",width:"18"}}),t._v(" "),t.msg.userMsg&&t.msg.isPlay||t.msg.send_uid==t.getUserId&&t.msg.isPlay?i("img",{staticStyle:{"vertical-align":"sub"},attrs:{src:s("mmXz"),alt:"",width:"18"}}):t.msg.isPlay?i("img",{staticStyle:{"vertical-align":"sub"},attrs:{src:s("7+IR"),alt:"",width:"18"}}):t._e()])])])])])},staticRenderFns:[]};var m=s("VU/8")(u,c,!1,function(t){s("YAHt")},"data-v-252a936f",null);e.default=m.exports},iTCy:function(t,e,s){t.exports=s.p+"pcImstatic/img/yuyin_left.d73a57f.png"},mmXz:function(t,e,s){t.exports=s.p+"pcImstatic/img/laba_left.2ebcf3c.gif"},nVJL:function(t,e,s){t.exports=s.p+"pcImstatic/img/yuyin_right.a59100b.png"}});