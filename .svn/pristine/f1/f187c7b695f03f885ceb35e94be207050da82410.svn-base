webpackJsonp([60],{"9m45":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("woOf"),a=e.n(i),n=e("mvHQ"),r=e.n(n),c=e("Dd8w"),o=e.n(c),h=e("NYxO"),g=e("SQjO"),_={name:"transpond",props:["shareCardInfo"],data:function(){return{userObj:{},pageId:"",config:g.a,chatListMessage:[],sendId:""}},created:function(){},methods:o()({},Object(h.d)(["setActiveWindow","createFriendChatMessage"]),Object(h.b)(["getFriendList","sendMessageIM","messageForward"]),{shareFn:function(t){this.shareList.forEach(function(t){t.checked=!1}),t.checked=!0,this.sendId=t.id},isGroup:function(t){return this.config.MSG_GROUP_TXT==t||this.config.MSG_GROUP_IMG==t||this.config.MSG_GROUP_VIDEO==t||this.config.MSG_GROUP_SHARENOTE==t||this.config.MSG_GROUP_CARD==t},getSingleType:function(t){switch(t){case this.config.MSG_GROUP_TXT:return this.config.MSG_PRIVATE_TXT;case this.config.MSG_GROUP_IMG:return this.config.MSG_PRIVATE_IMG;case this.config.MSG_GROUP_VIDEO:return this.config.MSG_PRIVATE_VIDEO;case this.config.MSG_GROUP_SHARENOTE:return this.config.MSG_PRIVATE_SHARENOTE;case this.config.MSG_GROUP_CARD:return this.config.MSG_PRIVATE_CARD}},getGroupType:function(t){switch(1*t){case this.config.MSG_PRIVATE_TXT:return this.config.MSG_GROUP_TXT;case this.config.MSG_PRIVATE_IMG:return this.config.MSG_GROUP_IMG;case this.config.MSG_PRIVATE_VIDEO:return this.config.MSG_GROUP_VIDEO;case this.config.MSG_PRIVATE_SHARENOTE:return this.config.MSG_GROUP_SHARENOTE;case this.config.MSG_PRIVATE_CARD:return this.config.MSG_GROUP_CARD}},closeModal:function(){this.$emit("closeTranspond")},messageForwardFn:function(){var t=this;if(this.chatListMessage.some(function(t){return t.checked})){var s=[],e=[];this.chatListMessage.forEach(function(t){t.checked&&(t.initials?s.push(t.id):e.push(t.id))});var i={selfUid:this.getUserId,singleList:"",groupList:"",singleData:"",groupData:""},a=this.chatListStore.zhuanFaMessage.type;a=a==this.config.MSG_GROUP_NOTICE||a==this.config.MSG_GROUP_AT||a==this.config.MSG_GROUP_AT_ALL?this.config.MSG_GROUP_TXT:this.chatListStore.zhuanFaMessage.type;var n=this.isGroup(a);if(s.length>0){i.singleList=s.join(",");var c={to:0,message:this.chatListStore.zhuanFaMessage.content,type:a};n&&(c.type=this.getSingleType(a));var o=this.initForwardMessage(c);i.singleData=r()(o)}if(e.length>0){i.groupList=e.join(",");var h={to:0,message:this.chatListStore.zhuanFaMessage.content,type:a};n||(h.type=this.getGroupType(a));var g=this.initForwardMessage(h);i.groupData=r()(g)}this.createFriendChatMessage({id:this.sendId}),this.messageForward(i).then(function(){t.$emit("closeTranspond")})}else this.$message({type:"warning",message:"请选择转发对象!"})},shareCard:function(){var t=this.chatListStore.zhuanFaMessage.type;t==this.config.MSG_GROUP_VIDEO&&(t=this.config.MSG_PRIVATE_VIDEO),t==this.config.MSG_GROUP_IMG&&(t=this.config.MSG_PRIVATE_IMG);var s={to:this.userObj.id,message:this.chatListStore.zhuanFaMessage.content,type:t};this.sendMessageIM(s),this.$message.success("转发消息成功！"),this.$emit("closeTranspond")}}),computed:o()({},Object(h.c)(["getUserId","initForwardMessage"]),Object(h.e)(["friendsListStore","msgListStore","chatuserInfoStore","chatListStore"]),{shareList:function(){if(this.shareCardInfo.shareList.length>0){this.chatListMessage=[];for(var t=0,s=this.shareCardInfo.shareList.length;t<s;t++){var e={},i=this.shareCardInfo.shareList[t];i.checked=!1,e=a()({},i,e),this.chatListMessage.push(e)}return this.chatListMessage}}})},f={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shareCard"},[i("el-dialog",{attrs:{title:"分享名片",visible:t.shareCardInfo.visible,width:"30%",center:""},on:{"update:visible":function(s){return t.$set(t.shareCardInfo,"visible",s)}}},[i("div",{staticClass:"transpond_box"},t._l(t.shareList,function(s){return i("div",{staticClass:"user-card flex",class:{curr:s.checked},on:{click:function(e){return t.shareFn(s)}}},[s.initials?i("div",[s.head_portrait?i("img",{attrs:{src:s.head_portrait,alt:""}}):i("img",{staticClass:"avatar",attrs:{src:e("y1Vc")}}),t._v(" "),i("div",{staticClass:"flex-1"},[t._v("\n                        "+t._s(s.remarks_name||s.name)+"\n                    ")])]):i("div",[s.group_cover?i("img",{attrs:{src:s.group_cover,alt:""}}):i("img",{staticClass:"avatar",attrs:{src:e("y1Vc")}}),t._v(" "),i("div",{staticClass:"flex-1"},[t._v("\n                        "+t._s(s.name)+" "),i("span",[t._v("("+t._s(s.count)+")")])])])])}),0),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.messageForwardFn}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=e("VU/8")(_,f,!1,function(t){e("WcrE")},"data-v-38b27b49",null);s.default=d.exports},WcrE:function(t,s){}});