webpackJsonp([69],{YaoC:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("mvHQ"),a=e.n(i),n=e("Dd8w"),c=e.n(n),r=e("woOf"),o=e.n(r),h=e("NYxO"),g=e("SQjO"),_={name:"transpond",props:["transpondData"],data:function(){return{userObj:{},pageId:"",config:g.a,chatListMessage:[]}},created:function(){if(this.chatListStore.chatlist.length>0){this.chatListMessage=[];for(var t=0,s=this.chatListStore.chatlist.length;t<s;t++){var e={},i=this.chatListStore.chatlist[t];i.checked=!1,e=o()({},i,e),this.chatListMessage.push(e)}}},methods:c()({},Object(h.d)(["setActiveWindow"]),Object(h.b)(["getFriendList","sendMessageIM","messageForward"]),{shareFn:function(t){t.checked=!t.checked},isGroup:function(t){return this.config.MSG_GROUP_TXT==t||this.config.MSG_GROUP_IMG==t||this.config.MSG_GROUP_VIDEO==t||this.config.MSG_GROUP_SHARENOTE==t||this.config.MSG_GROUP_CARD==t},getSingleType:function(t){switch(t){case this.config.MSG_GROUP_TXT:return this.config.MSG_PRIVATE_TXT;case this.config.MSG_GROUP_IMG:return this.config.MSG_PRIVATE_IMG;case this.config.MSG_GROUP_VIDEO:return this.config.MSG_PRIVATE_VIDEO;case this.config.MSG_GROUP_SHARENOTE:return this.config.MSG_PRIVATE_SHARENOTE;case this.config.MSG_GROUP_CARD:return this.config.MSG_PRIVATE_CARD}},getGroupType:function(t){switch(1*t){case this.config.MSG_PRIVATE_TXT:return this.config.MSG_GROUP_TXT;case this.config.MSG_PRIVATE_IMG:return this.config.MSG_GROUP_IMG;case this.config.MSG_PRIVATE_VIDEO:return this.config.MSG_GROUP_VIDEO;case this.config.MSG_PRIVATE_SHARENOTE:return this.config.MSG_GROUP_SHARENOTE;case this.config.MSG_PRIVATE_CARD:return this.config.MSG_GROUP_CARD}},closeModal:function(){this.$emit("closeTranspond")},messageForwardFn:function(){var t=this;if(this.chatListMessage.some(function(t){return t.checked})){var s=[],e=[],i=0;if(this.chatListMessage.forEach(function(t){t.checked&&(i++,1==t.chatType&&s.push(t.id),2==t.chatType&&e.push(t.id))}),i>30)this.$message({type:"warning",message:"最多只能选择30个!"});else{var n={selfUid:this.getUserId,singleList:"",groupList:"",singleData:"",groupData:""},c=this.chatListStore.zhuanFaMessage.type;c=c==this.config.MSG_GROUP_NOTICE||c==this.config.MSG_GROUP_AT||c==this.config.MSG_GROUP_AT_ALL?this.config.MSG_GROUP_TXT:this.chatListStore.zhuanFaMessage.type;var r=this.isGroup(c);if(s.length>0){n.singleList=s.join(",");var o={to:0,message:this.chatListStore.zhuanFaMessage.content,type:c};r&&(o.type=this.getSingleType(c));var h=this.initForwardMessage(o);n.singleData=a()(h)}if(e.length>0){n.groupList=e.join(",");var g={to:0,message:this.chatListStore.zhuanFaMessage.content,type:c};r||(g.type=this.getGroupType(c));var _=this.initForwardMessage(g);n.groupData=a()(_)}this.messageForward(n).then(function(){t.$emit("closeTranspond")})}}else this.$message({type:"warning",message:"请选择转发对象!"})},shareCard:function(){var t=this.chatListStore.zhuanFaMessage.type;t==this.config.MSG_GROUP_VIDEO&&(t=this.config.MSG_PRIVATE_VIDEO),t==this.config.MSG_GROUP_IMG&&(t=this.config.MSG_PRIVATE_IMG);var s={to:this.userObj.id,message:this.chatListStore.zhuanFaMessage.content,type:t};this.sendMessageIM(s),this.$message.success("转发消息成功！"),this.$emit("closeTranspond")}}),computed:c()({},Object(h.c)(["getUserId","initForwardMessage"]),Object(h.e)(["friendsListStore","msgListStore","chatuserInfoStore","chatListStore"]))},f={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"transpond"},[i("el-dialog",{attrs:{title:"选择转发对象",visible:t.transpondData.visible,width:"30%",center:""},on:{"update:visible":function(s){return t.$set(t.transpondData,"visible",s)}}},[i("div",{staticClass:"transpond_box"},t._l(t.chatListMessage,function(s){return 1==s.chatType&&!s.kefu||2==s.chatType?i("div",{staticClass:"user-card flex",class:{curr:s.checked},on:{click:function(e){return t.shareFn(s)}}},[s.user.img?i("img",{attrs:{src:s.user.img,alt:""}}):i("img",{staticClass:"avatar",attrs:{src:e("y1Vc")}}),t._v(" "),i("div",{staticClass:"flex-1"},[t._v("\n                  "+t._s(s.user.remarks_name||s.user.name)+" "),2==s.chatType?i("span",[t._v("("+t._s(s.chatCount)+")")]):t._e()])]):t._e()}),0),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.messageForwardFn}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=e("VU/8")(_,f,!1,function(t){e("jUhS")},"data-v-082a86f7",null);s.default=u.exports},jUhS:function(t,s){}});