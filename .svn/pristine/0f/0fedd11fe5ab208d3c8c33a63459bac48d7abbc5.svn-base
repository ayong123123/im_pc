webpackJsonp([52],{iatb:function(t,e){},sQ5k:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),n=s("NYxO"),r=s("zL8q"),d=s("SQjO"),o=s("y1Vc"),c=s.n(o),u={data:function(){return{addSearchData:{searchVal:"",placeVal:"搜索",isChange:!1},moren:c.a,addList:[],newGroupSearchText:""}},computed:a()({},Object(n.e)(["friendsListStore","chatListStore","chatuserInfoStore"]),Object(n.c)(["getUserId"]),{groupUserList:function(){var t=this,e=[],s=0;return this.friendsListStore.goodFriendList.forEach(function(i,a){var n=i.filter(function(e){return e.remarks_name?e.remarks_name.includes(t.newGroupSearchText):e.nickname.includes(t.newGroupSearchText)});n.length>0&&(e[s]=n,s++)}),e}}),watch:{},created:function(){this.addList=[],this.getFriendList({self_uid:this.getUserId}),this.newGroupSearchText=""},mounted:function(){},methods:a()({},Object(n.b)(["getFriendList","getGroupChatList","firstAddGroupChat","getGroupChatInfoAction","sendMessageIM","addManyGroupChat"]),Object(n.d)(["setModalState","setIsAddUser"]),{closeBuildGroup:function(){this.setIsAddUser(!1),this.setModalState("AddContactState"),this.getFriendList({self_uid:this.getUserId})},selectAdd:function(t,e){var s=this;t.isChecked=!t.isChecked,t.isChecked?this.addList.push(t):this.addList.map(function(e,i){e.id==t.id&&s.addList.splice(i,1)})},selectDelete:function(t){var e=this;this.addList.map(function(s,i){s.id==t.id&&e.addList.splice(i,1)}),this.friendsListStore.goodFriendList.map(function(e,s){e.map(function(e,s){e.id==t.id&&(e.isChecked=!1)})})},sureAdd:function(){var t=this;if(0!=this.addList.length)if(!this.friendsListStore.isAddUser&&this.addList.length<2)Object(r.Message)({message:"请选择超过两个好友",type:"warning",showClose:!0});else{var e=[],s=[];this.addList.map(function(t){e.push(t.id)}),this.addList.map(function(t){s.push(t.nickname)});var i={self_uid:this.getUserId,friend_uid:e.join(",")};this.friendsListStore.isAddUser?(i.group_id=this.friendsListStore.GroupChatId,this.addManyGroupChat(i).then(function(e){t.getGroupChatList({self_uid:t.getUserId}),t.setModalState("AddContactState"),t.getGroupChatInfoAction({self_uid:t.getUserId,group_id:t.friendsListStore.GroupChatId});var i={to:t.friendsListStore.GroupChatId,message:t.chatuserInfoStore.dataGetInfo.nickname+" 邀请 "+s.join(",")+" 加入了群聊",type:d.a.MSG_GROUP_INGROUP};t.sendMessageIM(i)})):(i.group_name=this.chatListStore.newBuildGroupName,this.firstAddGroupChat(i).then(function(e){t.getGroupChatList({self_uid:t.getUserId}),t.setModalState("AddContactState")}))}else Object(r.Message)({message:"请选择好友",type:"warning",showClose:!0})}})},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"showbox"}},[s("div",{staticClass:"new-adduser-Box"},[s("div",{staticClass:"left-content"},[s("div",{staticClass:"search "},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newGroupSearchText,expression:"newGroupSearchText"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.newGroupSearchText},on:{input:function(e){e.target.composing||(t.newGroupSearchText=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"friend-list",attrs:{id:"friends"}},t._l(t.groupUserList,function(e,i){return s("div",{key:i,staticClass:"list"},[e[0].initials?s("div",{staticClass:"sort-letter"},[t._v(t._s(e[0].initials))]):t._e(),t._v(" "),t._l(e,function(i,a){return s("ul",{key:a,staticClass:"friends"},[s("li",{class:i.isChecked?"on":"",on:{click:function(s){return t.selectAdd(i,e)}}},[s("div",{staticClass:"lf-content"},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.head_portrait||t.moren,expression:"vv.head_portrait || moren"}],attrs:{alt:""}})]),t._v(" "),s("p",{staticClass:"name"},[t._v(t._s(i.remarks_name||i.nickname))])]),t._v(" "),s("i",{class:["iconfont",i.isChecked?"icon-xuanze select":"icon-weixuanze"]})])])})],2)}),0)]),t._v(" "),s("div",{staticClass:"right-content"},[s("i",{staticClass:"iconfont icon-guanbi closed-right-content",on:{click:function(e){return t.closeBuildGroup()}}}),t._v(" "),s("p",{staticClass:"title"},[t._v("请勾选需要添加的联系人")]),t._v(" "),s("ul",{staticClass:"waitAdd-box"},t._l(t.addList,function(e,i){return s("li",{key:i},[s("div",{staticClass:"lf-content"},[s("div",{staticClass:"avatar"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.head_portrait||t.moren,expression:"item.head_portrait || moren"}],attrs:{alt:""}})]),t._v(" "),s("p",{staticClass:"name"},[t._v(t._s(e.remarks_name||e.nickname))])]),t._v(" "),s("i",{staticClass:"iconfont icon-shanchu",on:{click:function(s){return t.selectDelete(e)}}})])}),0),t._v(" "),s("div",{staticClass:"btn-box"},[s("div"),t._v(" "),s("div",{staticClass:"btn"},[s("button",{class:["sure",t.addList.length<1?"canadd":""],on:{click:t.sureAdd}},[t._v("确认")]),t._v(" "),s("button",{staticClass:"cancel",on:{click:function(e){return t.closeBuildGroup()}}},[t._v("取消")])])])])])])],1)},staticRenderFns:[]};var h=s("VU/8")(u,l,!1,function(t){s("iatb")},"data-v-5a5b5476",null);e.default=h.exports}});